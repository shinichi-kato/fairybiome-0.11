/*! For license information please see part.worker-50bfe737012a4bfba057.worker.js.LICENSE.txt */
!function(){var t={716:function(t,e){var r;!function(n){"use strict";var i=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:.5*(Math.exp(t)+Math.exp(-t))},u=Math.sinh||function(t){return Math.abs(t)<1e-9?t:.5*(Math.exp(t)-Math.exp(-t))},o=function(){throw SyntaxError("Invalid Param")};function a(t,e){var r=Math.abs(t),n=Math.abs(e);return 0===t?Math.log(n):0===e?Math.log(r):r<3e3&&n<3e3?.5*Math.log(t*t+e*e):(t/=2,e/=2,.5*Math.log(t*t+e*e)+Math.LN2)}function s(t,e){if(!(this instanceof s))return new s(t,e);var r=function(t,e){var r={re:0,im:0};if(null==t)r.re=r.im=0;else if(void 0!==e)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return s.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return s.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else 2===t.length?(r.re=t[0],r.im=t[1]):o();break;case"string":r.im=r.re=0;var n=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,u=0;null===n&&o();for(var a=0;a<n.length;a++){var c=n[a];" "===c||"\t"===c||"\n"===c||("+"===c?i++:"-"===c?u++:"i"===c||"I"===c?(i+u===0&&o()," "===n[a+1]||isNaN(n[a+1])?r.im+=parseFloat((u%2?"-":"")+"1"):(r.im+=parseFloat((u%2?"-":"")+n[a+1]),a++),i=u=0):((i+u===0||isNaN(c))&&o(),"i"===n[a+1]||"I"===n[a+1]?(r.im+=parseFloat((u%2?"-":"")+c),a++):r.re+=parseFloat((u%2?"-":"")+c),i=u=0))}i+u>0&&o();break;case"number":r.im=0,r.re=t;break;default:o()}return isNaN(r.re)||isNaN(r.im),r}(t,e);this.re=r.re,this.im=r.im}s.prototype={re:0,im:0,sign:function(){var t=this.abs();return new s(this.re/t,this.im/t)},add:function(t,e){var r=new s(t,e);return this.isInfinite()&&r.isInfinite()?s.NAN:this.isInfinite()||r.isInfinite()?s.INFINITY:new s(this.re+r.re,this.im+r.im)},sub:function(t,e){var r=new s(t,e);return this.isInfinite()&&r.isInfinite()?s.NAN:this.isInfinite()||r.isInfinite()?s.INFINITY:new s(this.re-r.re,this.im-r.im)},mul:function(t,e){var r=new s(t,e);return this.isInfinite()&&r.isZero()||this.isZero()&&r.isInfinite()?s.NAN:this.isInfinite()||r.isInfinite()?s.INFINITY:0===r.im&&0===this.im?new s(this.re*r.re,0):new s(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){var r=new s(t,e);if(this.isZero()&&r.isZero()||this.isInfinite()&&r.isInfinite())return s.NAN;if(this.isInfinite()||r.isZero())return s.INFINITY;if(this.isZero()||r.isInfinite())return s.ZERO;t=this.re,e=this.im;var n,i,u=r.re,o=r.im;return 0===o?new s(t/u,e/u):Math.abs(u)<Math.abs(o)?new s((t*(i=u/o)+e)/(n=u*i+o),(e*i-t)/n):new s((t+e*(i=o/u))/(n=o*i+u),(e-t*i)/n)},pow:function(t,e){var r=new s(t,e);if(t=this.re,e=this.im,r.isZero())return s.ONE;if(0===r.im){if(0===e&&t>0)return new s(Math.pow(t,r.re),0);if(0===t)switch((r.re%4+4)%4){case 0:return new s(Math.pow(e,r.re),0);case 1:return new s(0,Math.pow(e,r.re));case 2:return new s(-Math.pow(e,r.re),0);case 3:return new s(0,-Math.pow(e,r.re))}}if(0===t&&0===e&&r.re>0&&r.im>=0)return s.ZERO;var n=Math.atan2(e,t),i=a(t,e);return t=Math.exp(r.re*i-r.im*n),e=r.im*i+r.re*n,new s(t*Math.cos(e),t*Math.sin(e))},sqrt:function(){var t,e,r=this.re,n=this.im,i=this.abs();if(r>=0){if(0===n)return new s(Math.sqrt(r),0);t=.5*Math.sqrt(2*(i+r))}else t=Math.abs(n)/Math.sqrt(2*(i-r));return e=r<=0?.5*Math.sqrt(2*(i-r)):Math.abs(n)/Math.sqrt(2*(i+r)),new s(t,n<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new s(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,e=this.im;return new s(Math.expm1(t)*Math.cos(e)+function(t){var e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;var r=t*t;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(e),Math.exp(t)*Math.sin(e))},log:function(){var t=this.re,e=this.im;return new s(a(t,e),Math.atan2(e,t))},abs:function(){return t=this.re,e=this.im,r=Math.abs(t),n=Math.abs(e),r<3e3&&n<3e3?Math.sqrt(r*r+n*n):(r<n?(r=n,n=t/e):n=e/t,r*Math.sqrt(1+n*n));var t,e,r,n},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new s(Math.sin(t)*i(e),Math.cos(t)*u(e))},cos:function(){var t=this.re,e=this.im;return new s(Math.cos(t)*i(e),-Math.sin(t)*u(e))},tan:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)+i(e);return new s(Math.sin(t)/r,u(e)/r)},cot:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)-i(e);return new s(-Math.sin(t)/r,u(e)/r)},sec:function(){var t=this.re,e=this.im,r=.5*i(2*e)+.5*Math.cos(2*t);return new s(Math.cos(t)*i(e)/r,Math.sin(t)*u(e)/r)},csc:function(){var t=this.re,e=this.im,r=.5*i(2*e)-.5*Math.cos(2*t);return new s(Math.sin(t)*i(e)/r,-Math.cos(t)*u(e)/r)},asin:function(){var t=this.re,e=this.im,r=new s(e*e-t*t+1,-2*t*e).sqrt(),n=new s(r.re-e,r.im+t).log();return new s(n.im,-n.re)},acos:function(){var t=this.re,e=this.im,r=new s(e*e-t*t+1,-2*t*e).sqrt(),n=new s(r.re-e,r.im+t).log();return new s(Math.PI/2-n.im,n.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new s(0,1/0);if(-1===e)return new s(0,-1/0)}var r=t*t+(1-e)*(1-e),n=new s((1-e*e-t*t)/r,-2*t/r).log();return new s(-.5*n.im,.5*n.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new s(Math.atan2(1,t),0);var r=t*t+e*e;return 0!==r?new s(t/r,-e/r).atan():new s(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new s(0,1/0);var r=t*t+e*e;return 0!==r?new s(t/r,-e/r).acos():new s(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new s(Math.PI/2,1/0);var r=t*t+e*e;return 0!==r?new s(t/r,-e/r).asin():new s(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new s(u(t)*Math.cos(e),i(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new s(i(t)*Math.cos(e),u(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,r=i(t)+Math.cos(e);return new s(u(t)/r,Math.sin(e)/r)},coth:function(){var t=2*this.re,e=2*this.im,r=i(t)-Math.cos(e);return new s(u(t)/r,-Math.sin(e)/r)},csch:function(){var t=this.re,e=this.im,r=Math.cos(2*e)-i(2*t);return new s(-2*u(t)*Math.cos(e)/r,2*i(t)*Math.sin(e)/r)},sech:function(){var t=this.re,e=this.im,r=Math.cos(2*e)+i(2*t);return new s(2*i(t)*Math.cos(e)/r,-2*u(t)*Math.sin(e)/r)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t=this.acos();if(t.im<=0){var e=t.re;t.re=-t.im,t.im=e}else{e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){var t=this.re,e=this.im,r=t>1&&0===e,n=1-t,i=1+t,u=n*n+e*e,o=0!==u?new s((i*n-e*e)/u,(e*n+i*e)/u):new s(-1!==t?t/0:0,0!==e?e/0:0),c=o.re;return o.re=a(o.re,o.im)/2,o.im=Math.atan2(o.im,c)/2,r&&(o.im=-o.im),o},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new s(0,Math.PI/2);var r=t*t+e*e;return 0!==r?new s(t/r,-e/r).atanh():new s(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new s(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var r=t*t+e*e;return 0!==r?new s(t/r,-e/r).asinh():new s(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(this.isZero())return s.INFINITY;var r=t*t+e*e;return 0!==r?new s(t/r,-e/r).acosh():new s(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return s.INFINITY;if(this.isInfinite())return s.ZERO;var t=this.re,e=this.im,r=t*t+e*e;return new s(t/r,-e/r)},conjugate:function(){return new s(this.re,-this.im)},neg:function(){return new s(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new s(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new s(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new s(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){var r=new s(t,e);return Math.abs(r.re-this.re)<=s.EPSILON&&Math.abs(r.im-this.im)<=s.EPSILON},clone:function(){return new s(this.re,this.im)},toString:function(){var t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<s.EPSILON&&(t=0),Math.abs(e)<s.EPSILON&&(e=0),0===e?r+t:(0!==t?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),1!==e&&(r+=e),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},s.ZERO=new s(0,0),s.ONE=new s(1,0),s.I=new s(0,1),s.PI=new s(Math.PI,0),s.E=new s(Math.E,0),s.INFINITY=new s(1/0,1/0),s.NAN=new s(NaN,NaN),s.EPSILON=1e-15,void 0===(r=function(){return s}.apply(e,[]))||(t.exports=r)}()},744:function(t,e,r){t.exports=function(){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)},e=function(){return(e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,e,r){if(r||2===arguments.length)for(var n,i=0,u=e.length;i<u;i++)!n&&i in e||((n=n||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:r.g,u=Object.keys,o=Array.isArray;function a(t,e){return"object"!=typeof e||u(e).forEach((function(r){t[r]=e[r]})),t}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var s=Object.getPrototypeOf,c={}.hasOwnProperty;function f(t,e){return c.call(t,e)}function l(t,e){"function"==typeof e&&(e=e(s(t))),("undefined"==typeof Reflect?u:Reflect.ownKeys)(e).forEach((function(r){p(t,r,e[r])}))}var h=Object.defineProperty;function p(t,e,r,n){h(t,e,a(r&&f(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function d(t){return{from:function(e){return t.prototype=Object.create(e.prototype),p(t.prototype,"constructor",t),{extend:l.bind(null,t.prototype)}}}}var m=Object.getOwnPropertyDescriptor,y=[].slice;function v(t,e,r){return y.call(t,e,r)}function g(t,e){return e(t)}function D(t){if(!t)throw new Error("Assertion Failed")}function w(t){i.setImmediate?setImmediate(t):setTimeout(t,0)}function b(t,e){if("string"==typeof e&&f(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var r=[],n=0,i=e.length;n<i;++n){var u=b(t,e[n]);r.push(u)}return r}var o=e.indexOf(".");if(-1!==o){var a=t[e.substr(0,o)];return null==a?void 0:b(a,e.substr(o+1))}}function x(t,e,r){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){D("string"!=typeof r&&"length"in r);for(var n=0,i=e.length;n<i;++n)x(t,e[n],r[n])}else{var u,a,s=e.indexOf(".");-1!==s?(u=e.substr(0,s),""===(a=e.substr(s+1))?void 0===r?o(t)&&!isNaN(parseInt(u))?t.splice(u,1):delete t[u]:t[u]=r:x(s=(s=t[u])&&f(t,u)?s:t[u]={},a,r)):void 0===r?o(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=r}}function _(t){var e,r={};for(e in t)f(t,e)&&(r[e]=t[e]);return r}var A=[].concat;function E(t){return A.apply([],t)}var F="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return i[t]})),C=new Set(F.map((function(t){return i[t]}))),M=null;function B(t){return M=new WeakMap,t=function t(e){if(!e||"object"!=typeof e)return e;var r=M.get(e);if(r)return r;if(o(e)){r=[],M.set(e,r);for(var n=0,i=e.length;n<i;++n)r.push(t(e[n]))}else if(C.has(e.constructor))r=e;else{var u,a=s(e);for(u in r=a===Object.prototype?{}:Object.create(a),M.set(e,r),e)f(e,u)&&(r[u]=t(e[u]))}return r}(t),M=null,t}var N={}.toString;function S(t){return N.call(t).slice(8,-1)}var O="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",I="symbol"==typeof O?function(t){var e;return null!=t&&(e=t[O])&&e.apply(t)}:function(){return null};function T(t,e){return 0<=(e=t.indexOf(e))&&t.splice(e,1),0<=e}var k={};function z(t){var e,r,n,i;if(1===arguments.length){if(o(t))return t.slice();if(this===k&&"string"==typeof t)return[t];if(i=I(t)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(null==t)return[t];if("number"!=typeof(e=t.length))return[t];for(r=new Array(e);e--;)r[e]=t[e];return r}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}var P="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},j=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(st=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(t,e){this.name=t,this.message=e}function H(t,e){return t+". Errors: "+Object.keys(e).map((function(t){return e[t].toString()})).filter((function(t,e,r){return r.indexOf(t)===e})).join("\n")}function R(t,e,r,n){this.failures=e,this.failedKeys=n,this.successCount=r,this.message=H(t,e)}function U(t,e){this.name="BulkError",this.failures=Object.keys(e).map((function(t){return e[t]})),this.failuresByPos=e,this.message=H(t,this.failures)}d(K).from(Error).extend({toString:function(){return this.name+": "+this.message}}),d(R).from(K),d(U).from(K);var L=j.reduce((function(t,e){return t[e]=e+"Error",t}),{}),W=K,V=j.reduce((function(t,e){var r=e+"Error";function n(t,n){this.name=r,t?"string"==typeof t?(this.message="".concat(t).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof t&&(this.message="".concat(t.name," ").concat(t.message),this.inner=t):(this.message=q[e]||r,this.inner=null)}return d(n).from(W),t[e]=n,t}),{});V.Syntax=SyntaxError,V.Type=TypeError,V.Range=RangeError;var $=st.reduce((function(t,e){return t[e+"Error"]=V[e],t}),{}),Z=j.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=V[e]),t}),{});function Q(){}function Y(t){return t}function J(t,e){return null==t||t===Y?e:function(r){return e(t(r))}}function G(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function X(t,e){return t===Q?e:function(){var r=t.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var u=e.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?G(n,this.onsuccess):n),i&&(this.onerror=this.onerror?G(i,this.onerror):i),void 0!==u?u:r}}function tt(t,e){return t===Q?e:function(){t.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?G(r,this.onsuccess):r),n&&(this.onerror=this.onerror?G(n,this.onerror):n)}}function et(t,e){return t===Q?e:function(r){var n=t.apply(this,arguments);a(r,n);var i=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,r=e.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?G(i,this.onsuccess):i),u&&(this.onerror=this.onerror?G(u,this.onerror):u),void 0===n?void 0===r?void 0:r:a(n,r)}}function rt(t,e){return t===Q?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function nt(t,e){return t===Q?e:function(){var r=t.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,i=arguments.length,u=new Array(i);i--;)u[i]=arguments[i];return r.then((function(){return e.apply(n,u)}))}return e.apply(this,arguments)}}Z.ModifyError=R,Z.DexieError=K,Z.BulkError=U;var it="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ut(t){it=t}var ot={},at=100,st=(F="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,s(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,s(e),t]}(),F[0]),ct=(j=F[1],F=F[2],j=j&&j.then,st&&st.constructor),ft=!!F,lt=function(t,e){Dt.push([t,e]),pt&&(queueMicrotask(Bt),pt=!1)},ht=!0,pt=!0,dt=[],mt=[],yt=Y,vt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Q,pgp:!1,env:{},finalize:Q},gt=vt,Dt=[],wt=0,bt=[];function xt(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var e=this._PSD=gt;if("function"!=typeof t){if(t!==ot)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Et(this,this._value))}this._state=null,this._value=null,++e.ref,function t(e,r){try{r((function(r){if(null===e._state){if(r===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Nt();r&&"function"==typeof r.then?t(e,(function(t,e){r instanceof xt?r._then(t,e):r.then(t,e)})):(e._state=!0,e._value=r,Ft(e)),n&&St()}}),Et.bind(null,e))}catch(r){Et(e,r)}}(this,t)}var _t={get:function(){var t=gt,e=qt;function r(r,n){var i=this,u=!t.global&&(t!==gt||e!==qt),o=u&&!Ut(),a=new xt((function(e,a){Ct(i,new At(Qt(r,t,u,o),Qt(n,t,u,o),e,a,t))}));return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return r.prototype=ot,r},set:function(t){p(this,"then",t&&t.prototype===ot?_t:{get:function(){return t},set:_t.set})}};function At(t,e,r,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=r,this.reject=n,this.psd=i}function Et(t,e){var r,n;mt.push(e),null===t._state&&(r=t._lib&&Nt(),e=yt(e),t._state=!1,t._value=e,n=t,dt.some((function(t){return t._value===n._value}))||dt.push(n),Ft(t),r&&St())}function Ft(t){var e=t._listeners;t._listeners=[];for(var r=0,n=e.length;r<n;++r)Ct(t,e[r]);var i=t._PSD;--i.ref||i.finalize(),0===wt&&(++wt,lt((function(){0==--wt&&Ot()}),[]))}function Ct(t,e){if(null!==t._state){var r=t._state?e.onFulfilled:e.onRejected;if(null===r)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++wt,lt(Mt,[r,t,e])}else t._listeners.push(e)}function Mt(t,e,r){try{var n,i=e._value;!e._state&&mt.length&&(mt=[]),n=it&&e._consoleTask?e._consoleTask.run((function(){return t(i)})):t(i),e._state||-1!==mt.indexOf(i)||function(t){for(var e=dt.length;e;)if(dt[--e]._value===t._value)return dt.splice(e,1)}(e),r.resolve(n)}catch(t){r.reject(t)}finally{0==--wt&&Ot(),--r.psd.ref||r.psd.finalize()}}function Bt(){Zt(vt,(function(){Nt()&&St()}))}function Nt(){var t=ht;return pt=ht=!1,t}function St(){var t,e,r;do{for(;0<Dt.length;)for(t=Dt,Dt=[],r=t.length,e=0;e<r;++e){var n=t[e];n[0].apply(null,n[1])}}while(0<Dt.length);pt=ht=!0}function Ot(){var t=dt;dt=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var e=bt.slice(0),r=e.length;r;)e[--r]()}function It(t){return new xt(ot,!1,t)}function Tt(t,e){var r=gt;return function(){var n=Nt(),i=gt;try{return Vt(r,!0),t.apply(this,arguments)}catch(n){e&&e(n)}finally{Vt(i,!1),n&&St()}}}l(xt.prototype,{then:_t,_then:function(t,e){Ct(this,new At(null,null,t,e,gt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=t,r=arguments[1];return"function"==typeof e?this.then(null,(function(t){return(t instanceof e?r:It)(t)})):this.then(null,(function(t){return(t&&t.name===e?r:It)(t)}))},finally:function(t){return this.then((function(e){return xt.resolve(t()).then((function(){return e}))}),(function(e){return xt.resolve(t()).then((function(){return It(e)}))}))},timeout:function(t,e){var r=this;return t<1/0?new xt((function(n,i){var u=setTimeout((function(){return i(new V.Timeout(e))}),t);r.then(n,i).finally(clearTimeout.bind(null,u))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(xt.prototype,Symbol.toStringTag,"Dexie.Promise"),vt.env=$t(),l(xt,{all:function(){var t=z.apply(null,arguments).map(Lt);return new xt((function(e,r){0===t.length&&e([]);var n=t.length;t.forEach((function(i,u){return xt.resolve(i).then((function(r){t[u]=r,--n||e(t)}),r)}))}))},resolve:function(t){return t instanceof xt?t:t&&"function"==typeof t.then?new xt((function(e,r){t.then(e,r)})):new xt(ot,!0,t)},reject:It,race:function(){var t=z.apply(null,arguments).map(Lt);return new xt((function(e,r){t.map((function(t){return xt.resolve(t).then(e,r)}))}))},PSD:{get:function(){return gt},set:function(t){return gt=t}},totalEchoes:{get:function(){return qt}},newPSD:Ht,usePSD:Zt,scheduler:{get:function(){return lt},set:function(t){lt=t}},rejectionMapper:{get:function(){return yt},set:function(t){yt=t}},follow:function(t,e){return new xt((function(r,n){return Ht((function(e,r){var n=gt;n.unhandleds=[],n.onunhandled=r,n.finalize=G((function(){var t,n=this;t=function(){0===n.unhandleds.length?e():r(n.unhandleds[0])},bt.push((function e(){t(),bt.splice(bt.indexOf(e),1)})),++wt,lt((function(){0==--wt&&Ot()}),[])}),n.finalize),t()}),e,r,n)}))}}),ct&&(ct.allSettled&&p(xt,"allSettled",(function(){var t=z.apply(null,arguments).map(Lt);return new xt((function(e){0===t.length&&e([]);var r=t.length,n=new Array(r);t.forEach((function(t,i){return xt.resolve(t).then((function(t){return n[i]={status:"fulfilled",value:t}}),(function(t){return n[i]={status:"rejected",reason:t}})).then((function(){return--r||e(n)}))}))}))})),ct.any&&"undefined"!=typeof AggregateError&&p(xt,"any",(function(){var t=z.apply(null,arguments).map(Lt);return new xt((function(e,r){0===t.length&&r(new AggregateError([]));var n=t.length,i=new Array(n);t.forEach((function(t,u){return xt.resolve(t).then((function(t){return e(t)}),(function(t){i[u]=t,--n||r(new AggregateError(i))}))}))}))})));var kt={awaits:0,echoes:0,id:0},zt=0,Pt=[],jt=0,qt=0,Kt=0;function Ht(t,e,r,n){var i=gt,u=Object.create(i);return u.parent=i,u.ref=0,u.global=!1,u.id=++Kt,vt.env,u.env=ft?{Promise:xt,PromiseProp:{value:xt,configurable:!0,writable:!0},all:xt.all,race:xt.race,allSettled:xt.allSettled,any:xt.any,resolve:xt.resolve,reject:xt.reject}:{},e&&a(u,e),++i.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},n=Zt(u,t,r,n),0===u.ref&&u.finalize(),n}function Rt(){return kt.id||(kt.id=++zt),++kt.awaits,kt.echoes+=at,kt.id}function Ut(){return!!kt.awaits&&(0==--kt.awaits&&(kt.id=0),kt.echoes=kt.awaits*at,!0)}function Lt(t){return kt.echoes&&t&&t.constructor===ct?(Rt(),t.then((function(t){return Ut(),t}),(function(t){return Ut(),Jt(t)}))):t}function Wt(){var t=Pt[Pt.length-1];Pt.pop(),Vt(t,!1)}function Vt(t,e){var r,n=gt;(e?!kt.echoes||jt++&&t===gt:!jt||--jt&&t===gt)||queueMicrotask(e?function(t){++qt,kt.echoes&&0!=--kt.echoes||(kt.echoes=kt.awaits=kt.id=0),Pt.push(gt),Vt(t,!0)}.bind(null,t):Wt),t!==gt&&(gt=t,n===vt&&(vt.env=$t()),ft&&(r=vt.env.Promise,e=t.env,(n.global||t.global)&&(Object.defineProperty(i,"Promise",e.PromiseProp),r.all=e.all,r.race=e.race,r.resolve=e.resolve,r.reject=e.reject,e.allSettled&&(r.allSettled=e.allSettled),e.any&&(r.any=e.any))))}function $t(){var t=i.Promise;return ft?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject}:{}}function Zt(t,e,r,n,i){var u=gt;try{return Vt(t,!0),e(r,n,i)}finally{Vt(u,!1)}}function Qt(t,e,r,n){return"function"!=typeof t?t:function(){var i=gt;r&&Rt(),Vt(e,!0);try{return t.apply(this,arguments)}finally{Vt(i,!1),n&&queueMicrotask(Ut)}}}function Yt(t){Promise===ct&&0===kt.echoes?0===jt?t():enqueueNativeMicroTask(t):setTimeout(t,0)}-1===(""+j).indexOf("[native code]")&&(Rt=Ut=Q);var Jt=xt.reject,Gt=String.fromCharCode(65535),Xt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",te="String expected.",ee=[],re="__dbnames",ne="readonly",ie="readwrite";function ue(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var oe={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ae(t){return"string"!=typeof t||/\./.test(t)?function(t){return t}:function(e){return void 0===e[t]&&t in e&&delete(e=B(e))[t],e}}function se(){throw V.Type()}function ce(t,e){try{var r=fe(t),n=fe(e);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return e<t?1:t<e?-1:0;case"binary":return function(t,e){for(var r=t.length,n=e.length,i=r<n?r:n,u=0;u<i;++u)if(t[u]!==e[u])return t[u]<e[u]?-1:1;return r===n?0:r<n?-1:1}(le(t),le(e));case"Array":return function(t,e){for(var r=t.length,n=e.length,i=r<n?r:n,u=0;u<i;++u){var o=ce(t[u],e[u]);if(0!==o)return o}return r===n?0:r<n?-1:1}(t,e)}}catch(t){}return NaN}function fe(t){var e=typeof t;return"object"!=e?e:ArrayBuffer.isView(t)||"ArrayBuffer"===(t=S(t))?"binary":t}function le(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var he=(pe.prototype._trans=function(t,e,r){var n=this._tx||gt.trans,i=this.name,u=it&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===t?"read":"write"," ").concat(this.name));function o(t,r,n){if(!n.schema[i])throw new V.NotFound("Table "+i+" not part of transaction");return e(n.idbtrans,n)}var a=Nt();try{var s=n&&n.db._novip===this.db._novip?n===gt.trans?n._promise(t,o,r):Ht((function(){return n._promise(t,o,r)}),{trans:n,transless:gt.transless||gt}):function e(r,n,i,u){if(r.idbdb&&(r._state.openComplete||gt.letThrough||r._vip)){var o=r._createTransaction(n,i,r._dbSchema);try{o.create(),r._state.PR1398_maxLoop=3}catch(t){return t.name===L.InvalidState&&r.isOpen()&&0<--r._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),r.close({disableAutoOpen:!1}),r.open().then((function(){return e(r,n,i,u)}))):Jt(t)}return o._promise(n,(function(t,e){return Ht((function(){return gt.trans=o,u(t,e,o)}))})).then((function(t){if("readwrite"===n)try{o.idbtrans.commit()}catch(t){}return"readonly"===n?t:o._completion.then((function(){return t}))}))}if(r._state.openComplete)return Jt(new V.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return Jt(new V.DatabaseClosed);r.open().catch(Q)}return r._state.dbReadyPromise.then((function(){return e(r,n,i,u)}))}(this.db,t,[this.name],o);return u&&(s._consoleTask=u,s=s.catch((function(t){return console.trace(t),Jt(t)}))),s}finally{a&&St()}},pe.prototype.get=function(t,e){var r=this;return t&&t.constructor===Object?this.where(t).first(e):null==t?Jt(new V.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(e){return r.core.get({trans:e,key:t}).then((function(t){return r.hook.reading.fire(t)}))})).then(e)},pe.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(o(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var e=u(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter((function(t){if(t.compound&&e.every((function(e){return 0<=t.keyPath.indexOf(e)}))){for(var r=0;r<e.length;++r)if(-1===e.indexOf(t.keyPath[r]))return!1;return!0}return!1})).sort((function(t,e){return t.keyPath.length-e.keyPath.length}))[0];if(r&&this.db._maxKey!==Gt){var n=r.keyPath.slice(0,e.length);return this.where(n).equals(n.map((function(e){return t[e]})))}!r&&it&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(e.join("+"),"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function s(t,e){return 0===a.cmp(t,e)}var c=e.reduce((function(e,r){var n=e[0],u=e[1],a=(e=i[r],t[r]);return[n||e,n||!e?ue(u,e&&e.multi?function(t){return t=b(t,r),o(t)&&t.some((function(t){return s(a,t)}))}:function(t){return s(a,b(t,r))}):u]}),[null,null]);return n=c[0],c=c[1],n?this.where(n.name).equals(t[n.keyPath]).filter(c):r?this.filter(c):this.where(e).equals("")},pe.prototype.filter=function(t){return this.toCollection().and(t)},pe.prototype.count=function(t){return this.toCollection().count(t)},pe.prototype.offset=function(t){return this.toCollection().offset(t)},pe.prototype.limit=function(t){return this.toCollection().limit(t)},pe.prototype.each=function(t){return this.toCollection().each(t)},pe.prototype.toArray=function(t){return this.toCollection().toArray(t)},pe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pe.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,o(t)?"[".concat(t.join("+"),"]"):t))},pe.prototype.reverse=function(){return this.toCollection().reverse()},pe.prototype.mapToClass=function(e){var r,n=this.db,i=this.name;function u(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof se&&(function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(u,r=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return i},e=u);for(var o=new Set,a=e.prototype;a;a=s(a))Object.getOwnPropertyNames(a).forEach((function(t){return o.add(t)}));function c(t){if(!t)return t;var r,n=Object.create(e.prototype);for(r in t)if(!o.has(r))try{n[r]=t[r]}catch(t){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),e},pe.prototype.defineClass=function(){return this.mapToClass((function(t){a(this,t)}))},pe.prototype.add=function(t,e){var r=this,n=this.schema.primKey,i=n.auto,u=n.keyPath,o=t;return u&&i&&(o=ae(u)(t)),this._trans("readwrite",(function(t){return r.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[o]})})).then((function(t){return t.numFailures?xt.reject(t.failures[0]):t.lastResult})).then((function(e){if(u)try{x(t,u,e)}catch(e){}return e}))},pe.prototype.update=function(t,e){return"object"!=typeof t||o(t)?this.where(":id").equals(t).modify(e):void 0===(t=b(t,this.schema.primKey.keyPath))?Jt(new V.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(e)},pe.prototype.put=function(t,e){var r=this,n=this.schema.primKey,i=n.auto,u=n.keyPath,o=t;return u&&i&&(o=ae(u)(t)),this._trans("readwrite",(function(t){return r.core.mutate({trans:t,type:"put",values:[o],keys:null!=e?[e]:null})})).then((function(t){return t.numFailures?xt.reject(t.failures[0]):t.lastResult})).then((function(e){if(u)try{x(t,u,e)}catch(e){}return e}))},pe.prototype.delete=function(t){var e=this;return this._trans("readwrite",(function(r){return e.core.mutate({trans:r,type:"delete",keys:[t]})})).then((function(t){return t.numFailures?xt.reject(t.failures[0]):void 0}))},pe.prototype.clear=function(){var t=this;return this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"deleteRange",range:oe})})).then((function(t){return t.numFailures?xt.reject(t.failures[0]):void 0}))},pe.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",(function(r){return e.core.getMany({keys:t,trans:r}).then((function(t){return t.map((function(t){return e.hook.reading.fire(t)}))}))}))},pe.prototype.bulkAdd=function(t,e,r){var n=this,i=Array.isArray(e)?e:void 0,u=(r=r||(i?void 0:e))?r.allKeys:void 0;return this._trans("readwrite",(function(e){var r=(a=n.schema.primKey).auto;if((a=a.keyPath)&&i)throw new V.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var o=t.length,a=a&&r?t.map(ae(a)):t;return n.core.mutate({trans:e,type:"add",keys:i,values:a,wantResults:u}).then((function(t){var e=t.numFailures,r=t.results,i=t.lastResult;if(t=t.failures,0===e)return u?r:i;throw new U("".concat(n.name,".bulkAdd(): ").concat(e," of ").concat(o," operations failed"),t)}))}))},pe.prototype.bulkPut=function(t,e,r){var n=this,i=Array.isArray(e)?e:void 0,u=(r=r||(i?void 0:e))?r.allKeys:void 0;return this._trans("readwrite",(function(e){var r=(a=n.schema.primKey).auto;if((a=a.keyPath)&&i)throw new V.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var o=t.length,a=a&&r?t.map(ae(a)):t;return n.core.mutate({trans:e,type:"put",keys:i,values:a,wantResults:u}).then((function(t){var e=t.numFailures,r=t.results,i=t.lastResult;if(t=t.failures,0===e)return u?r:i;throw new U("".concat(n.name,".bulkPut(): ").concat(e," of ").concat(o," operations failed"),t)}))}))},pe.prototype.bulkUpdate=function(t){var e=this,r=this.core,n=t.map((function(t){return t.key})),i=t.map((function(t){return t.changes})),u=[];return this._trans("readwrite",(function(o){return r.getMany({trans:o,keys:n,cache:"clone"}).then((function(a){var s=[],c=[];t.forEach((function(t,r){var n=t.key,i=t.changes,o=a[r];if(o){for(var f=0,l=Object.keys(i);f<l.length;f++){var h=l[f],p=i[h];if(h===e.schema.primKey.keyPath){if(0!==ce(p,n))throw new V.Constraint("Cannot update primary key in bulkUpdate()")}else x(o,h,p)}u.push(r),s.push(n),c.push(o)}}));var f=s.length;return r.mutate({trans:o,type:"put",keys:s,values:c,updates:{keys:n,changeSpecs:i}}).then((function(t){var r=t.numFailures,n=t.failures;if(0===r)return f;for(var i=0,o=Object.keys(n);i<o.length;i++){var a,s=o[i],c=u[Number(s)];null!=c&&(a=n[s],delete n[s],n[c]=a)}throw new U("".concat(e.name,".bulkUpdate(): ").concat(r," of ").concat(f," operations failed"),n)}))}))}))},pe.prototype.bulkDelete=function(t){var e=this,r=t.length;return this._trans("readwrite",(function(r){return e.core.mutate({trans:r,type:"delete",keys:t})})).then((function(t){var n=t.numFailures,i=t.lastResult;if(t=t.failures,0===n)return i;throw new U("".concat(e.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),t)}))},pe);function pe(){}function de(t){function e(e,n){if(n){for(var i=arguments.length,u=new Array(i-1);--i;)u[i-1]=arguments[i];return r[e].subscribe.apply(null,u),t}if("string"==typeof e)return r[e]}var r={};e.addEventType=a;for(var n=1,i=arguments.length;n<i;++n)a(arguments[n]);return e;function a(t,n,i){if("object"!=typeof t){var s;n=n||rt;var c={subscribers:[],fire:i=i||Q,subscribe:function(t){-1===c.subscribers.indexOf(t)&&(c.subscribers.push(t),c.fire=n(c.fire,t))},unsubscribe:function(t){c.subscribers=c.subscribers.filter((function(e){return e!==t})),c.fire=c.subscribers.reduce(n,i)}};return r[t]=e[t]=c}u(s=t).forEach((function(t){var e=s[t];if(o(e))a(t,s[t][0],s[t][1]);else{if("asap"!==e)throw new V.InvalidArgument("Invalid event config");var r=a(t,Y,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach((function(t){w((function(){t.apply(null,e)}))}))}))}}))}}function me(t,e){return d(e).from({prototype:t}),e}function ye(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function ve(t,e){t.filter=ue(t.filter,e)}function ge(t,e,r){var n=t.replayFilter;t.replayFilter=n?function(){return ue(n(),e())}:e,t.justLimit=r&&!n}function De(t,e){if(t.isPrimKey)return e.primaryKey;var r=e.getIndexByKeyPath(t.index);if(!r)throw new V.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return r}function we(t,e,r){var n=De(t,e.schema);return e.openCursor({trans:r,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:n,range:t.range}})}function be(t,e,r,n){var i=t.replayFilter?ue(t.filter,t.replayFilter()):t.filter;if(t.or){var u={},o=function(t,r,n){var o,a;i&&!i(r,n,(function(t){return r.stop(t)}),(function(t){return r.fail(t)}))||("[object ArrayBuffer]"==(a=""+(o=r.primaryKey))&&(a=""+new Uint8Array(o)),f(u,a)||(u[a]=!0,e(t,r,n)))};return Promise.all([t.or._iterate(o,r),xe(we(t,n,r),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return xe(we(t,n,r),ue(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function xe(t,e,r,n){var i=Tt(n?function(t,e,i){return r(n(t),e,i)}:r);return t.then((function(t){if(t)return t.start((function(){var r=function(){return t.continue()};e&&!e(t,(function(t){return r=t}),(function(e){t.stop(e),r=Q}),(function(e){t.fail(e),r=Q}))||i(t.value,t,(function(t){return r=t})),r()}))}))}F=Symbol();var _e=(Ae.prototype.execute=function(t){if(void 0!==this.add){var e=this.add;if(o(e))return n(n([],o(t)?t:[],!0),e,!0).sort();if("number"==typeof e)return(Number(t)||0)+e;if("bigint"==typeof e)try{return BigInt(t)+e}catch(t){return BigInt(0)+e}throw new TypeError("Invalid term ".concat(e))}if(void 0!==this.remove){var r=this.remove;if(o(r))return o(t)?t.filter((function(t){return!r.includes(t)})).sort():[];if("number"==typeof r)return Number(t)-r;if("bigint"==typeof r)try{return BigInt(t)-r}catch(t){return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return(e=null===(e=this.replacePrefix)||void 0===e?void 0:e[0])&&"string"==typeof t&&t.startsWith(e)?this.replacePrefix[1]+t.substring(e.length):t},Ae);function Ae(t){Object.assign(this,t)}var Ee=(Fe.prototype._read=function(t,e){var r=this._ctx;return r.error?r.table._trans(null,Jt.bind(null,r.error)):r.table._trans("readonly",t).then(e)},Fe.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,Jt.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},Fe.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=ue(e.algorithm,t)},Fe.prototype._iterate=function(t,e){return be(this._ctx,t,e,this._ctx.table.core)},Fe.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&a(r,t),e._ctx=r,e},Fe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Fe.prototype.each=function(t){var e=this._ctx;return this._read((function(r){return be(e,t,r,e.table.core)}))},Fe.prototype.count=function(t){var e=this;return this._read((function(t){var r=e._ctx,n=r.table.core;if(ye(r,!0))return n.count({trans:t,query:{index:De(r,n.schema),range:r.range}}).then((function(t){return Math.min(t,r.limit)}));var i=0;return be(r,(function(){return++i,!1}),t,n).then((function(){return i}))})).then(t)},Fe.prototype.sortBy=function(t,e){var r=t.split(".").reverse(),n=r[0],i=r.length-1;function u(t,e){return e?u(t[r[e]],e-1):t[n]}var o="next"===this._ctx.dir?1:-1;function a(t,e){return(t=u(t,i))<(e=u(e,i))?-o:e<t?o:0}return this.toArray((function(t){return t.sort(a)})).then(e)},Fe.prototype.toArray=function(t){var e=this;return this._read((function(t){var r=e._ctx;if("next"===r.dir&&ye(r,!0)&&0<r.limit){var n=r.valueMapper,i=De(r,r.table.core.schema);return r.table.core.query({trans:t,limit:r.limit,values:!0,query:{index:i,range:r.range}}).then((function(t){return t=t.result,n?t.map(n):t}))}var u=[];return be(r,(function(t){return u.push(t)}),t,r.table.core).then((function(){return u}))}),t)},Fe.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,ye(e)?ge(e,(function(){var e=t;return function(t,r){return 0===e||(1===e?--e:r((function(){t.advance(e),e=0})),!1)}})):ge(e,(function(){var e=t;return function(){return--e<0}}))),this},Fe.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ge(this._ctx,(function(){var e=t;return function(t,r,n){return--e<=0&&r(n),0<=e}}),!0),this},Fe.prototype.until=function(t,e){return ve(this._ctx,(function(r,n,i){return!t(r.value)||(n(i),e)})),this},Fe.prototype.first=function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},Fe.prototype.last=function(t){return this.reverse().first(t)},Fe.prototype.filter=function(t){var e;return ve(this._ctx,(function(e){return t(e.value)})),(e=this._ctx).isMatch=ue(e.isMatch,t),this},Fe.prototype.and=function(t){return this.filter(t)},Fe.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},Fe.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Fe.prototype.desc=function(){return this.reverse()},Fe.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,r){t(r.key,r)}))},Fe.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},Fe.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,r){t(r.primaryKey,r)}))},Fe.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var r=[];return this.each((function(t,e){r.push(e.key)})).then((function(){return r})).then(t)},Fe.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&ye(e,!0)&&0<e.limit)return this._read((function(t){var r=De(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:r,range:e.range}})})).then((function(t){return t.result})).then(t);e.keysOnly=!e.isMatch;var r=[];return this.each((function(t,e){r.push(e.primaryKey)})).then((function(){return r})).then(t)},Fe.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},Fe.prototype.firstKey=function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},Fe.prototype.lastKey=function(t){return this.reverse().firstKey(t)},Fe.prototype.distinct=function(){var t;if(!(t=(t=this._ctx).index&&t.table.schema.idxByName[t.index])||!t.multi)return this;var e={};return ve(this._ctx,(function(t){var r=t.primaryKey.toString();return t=f(e,r),e[r]=!0,!t})),this},Fe.prototype.modify=function(t){var e=this,r=this._ctx;return this._write((function(n){var i,o,a;function s(t,e){var r=e.failures;e=e.numFailures,m+=t-e;for(var n=0,i=u(r);n<i.length;n++){var o=i[n];d.push(r[o])}}a="function"==typeof t?t:(i=u(t),o=i.length,function(e){for(var r=!1,n=0;n<o;++n){var u=i[n],a=t[u],s=b(e,u);a instanceof _e?(x(e,u,a.execute(s)),r=!0):s!==a&&(x(e,u,a),r=!0)}return r});var c=r.table.core,f=c.schema.primaryKey,l=f.outbound,h=f.extractKey,p=e.db._options.modifyChunkSize||200,d=[],m=0,y=[];return e.clone().primaryKeys().then((function(e){function i(r){var o=Math.min(p,e.length-r);return c.getMany({trans:n,keys:e.slice(r,r+o),cache:"immutable"}).then((function(f){for(var d=[],m=[],y=l?[]:null,v=[],g=0;g<o;++g){var D=f[g],w={value:B(D),primKey:e[r+g]};!1!==a.call(w,w.value,w)&&(null==w.value?v.push(e[r+g]):l||0===ce(h(D),h(w.value))?(m.push(w.value),l&&y.push(e[r+g])):(v.push(e[r+g]),d.push(w.value)))}return Promise.resolve(0<d.length&&c.mutate({trans:n,type:"add",values:d}).then((function(t){for(var e in t.failures)v.splice(parseInt(e),1);s(d.length,t)}))).then((function(){return(0<m.length||u&&"object"==typeof t)&&c.mutate({trans:n,type:"put",keys:y,values:m,criteria:u,changeSpec:"function"!=typeof t&&t,isAdditionalChunk:0<r}).then((function(t){return s(m.length,t)}))})).then((function(){return(0<v.length||u&&t===Ce)&&c.mutate({trans:n,type:"delete",keys:v,criteria:u,isAdditionalChunk:0<r}).then((function(t){return s(v.length,t)}))})).then((function(){return e.length>r+o&&i(r+p)}))}))}var u=ye(r)&&r.limit===1/0&&("function"!=typeof t||t===Ce)&&{index:r.index,range:r.range};return i(0).then((function(){if(0<d.length)throw new R("Error modifying one or more objects",d,m,y);return e.length}))}))}))},Fe.prototype.delete=function(){var t=this._ctx,e=t.range;return ye(t)&&(t.isPrimKey||3===e.type)?this._write((function(r){var n=t.table.core.schema.primaryKey,i=e;return t.table.core.count({trans:r,query:{index:n,range:i}}).then((function(e){return t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then((function(t){var r=t.failures;if(t.lastResult,t.results,t=t.numFailures)throw new R("Could not delete some values",Object.keys(r).map((function(t){return r[t]})),e-t);return e-t}))}))})):this.modify(Ce)},Fe);function Fe(){}var Ce=function(t,e){return e.value=null};function Me(t,e){return t<e?-1:t===e?0:1}function Be(t,e){return e<t?-1:t===e?0:1}function Ne(t,e,r){return(t=t instanceof ke?new t.Collection(t):t)._ctx.error=new(r||TypeError)(e),t}function Se(t){return new t.Collection(t,(function(){return Te("")})).limit(0)}function Oe(t,e,r,n){var i,u,o,a,s,c,f,l=r.length;if(!r.every((function(t){return"string"==typeof t})))return Ne(t,te);function h(t){i="next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()},u="next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()},o="next"===t?Me:Be;var e=r.map((function(t){return{lower:u(t),upper:i(t)}})).sort((function(t,e){return o(t.lower,e.lower)}));a=e.map((function(t){return t.upper})),s=e.map((function(t){return t.lower})),f="next"===(c=t)?"":n}h("next"),(t=new t.Collection(t,(function(){return Ie(a[0],s[l-1]+n)})))._ondirectionchange=function(t){h(t)};var p=0;return t._addAlgorithm((function(t,r,n){var i=t.key;if("string"!=typeof i)return!1;var h=u(i);if(e(h,s,p))return!0;for(var d=null,m=p;m<l;++m){var y=function(t,e,r,n,i,u){for(var o=Math.min(t.length,n.length),a=-1,s=0;s<o;++s){var c=e[s];if(c!==n[s])return i(t[s],r[s])<0?t.substr(0,s)+r[s]+r.substr(s+1):i(t[s],n[s])<0?t.substr(0,s)+n[s]+r.substr(s+1):0<=a?t.substr(0,a)+e[a]+r.substr(a+1):null;i(t[s],c)<0&&(a=s)}return o<n.length&&"next"===u?t+r.substr(t.length):o<t.length&&"prev"===u?t.substr(0,r.length):a<0?null:t.substr(0,a)+n[a]+r.substr(a+1)}(i,h,a[m],s[m],o,c);null===y&&null===d?p=m+1:(null===d||0<o(d,y))&&(d=y)}return r(null!==d?function(){t.continue(d+f)}:n),!1})),t}function Ie(t,e,r,n){return{type:2,lower:t,upper:e,lowerOpen:r,upperOpen:n}}function Te(t){return{type:1,lower:t,upper:t}}var ke=(Object.defineProperty(ze.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ze.prototype.between=function(t,e,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(t,e)||0===this._cmp(t,e)&&(r||n)&&(!r||!n)?Se(this):new this.Collection(this,(function(){return Ie(t,e,!r,!n)}))}catch(t){return Ne(this,Xt)}},ze.prototype.equals=function(t){return null==t?Ne(this,Xt):new this.Collection(this,(function(){return Te(t)}))},ze.prototype.above=function(t){return null==t?Ne(this,Xt):new this.Collection(this,(function(){return Ie(t,void 0,!0)}))},ze.prototype.aboveOrEqual=function(t){return null==t?Ne(this,Xt):new this.Collection(this,(function(){return Ie(t,void 0,!1)}))},ze.prototype.below=function(t){return null==t?Ne(this,Xt):new this.Collection(this,(function(){return Ie(void 0,t,!1,!0)}))},ze.prototype.belowOrEqual=function(t){return null==t?Ne(this,Xt):new this.Collection(this,(function(){return Ie(void 0,t)}))},ze.prototype.startsWith=function(t){return"string"!=typeof t?Ne(this,te):this.between(t,t+Gt,!0,!0)},ze.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):Oe(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],Gt)},ze.prototype.equalsIgnoreCase=function(t){return Oe(this,(function(t,e){return t===e[0]}),[t],"")},ze.prototype.anyOfIgnoreCase=function(){var t=z.apply(k,arguments);return 0===t.length?Se(this):Oe(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},ze.prototype.startsWithAnyOfIgnoreCase=function(){var t=z.apply(k,arguments);return 0===t.length?Se(this):Oe(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,Gt)},ze.prototype.anyOf=function(){var t=this,e=z.apply(k,arguments),r=this._cmp;try{e.sort(r)}catch(n){return Ne(this,Xt)}if(0===e.length)return Se(this);var n=new this.Collection(this,(function(){return Ie(e[0],e[e.length-1])}));n._ondirectionchange=function(n){r="next"===n?t._ascending:t._descending,e.sort(r)};var i=0;return n._addAlgorithm((function(t,n,u){for(var o=t.key;0<r(o,e[i]);)if(++i===e.length)return n(u),!1;return 0===r(o,e[i])||(n((function(){t.continue(e[i])})),!1)})),n},ze.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ze.prototype.noneOf=function(){var t=z.apply(k,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return Ne(this,Xt)}var e=t.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]}),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},ze.prototype.inAnyRange=function(t,e){var r=this,n=this._cmp,i=this._ascending,u=this._descending,o=this._min,a=this._max;if(0===t.length)return Se(this);if(!t.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&i(t[0],t[1])<=0})))return Ne(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",V.InvalidArgument);var s,c=!e||!1!==e.includeLowers,f=e&&!0===e.includeUppers,l=i;function h(t,e){return l(t[0],e[0])}try{(s=t.reduce((function(t,e){for(var r=0,i=t.length;r<i;++r){var u=t[r];if(n(e[0],u[1])<0&&0<n(e[1],u[0])){u[0]=o(u[0],e[0]),u[1]=a(u[1],e[1]);break}}return r===i&&t.push(e),t}),[])).sort(h)}catch(t){return Ne(this,Xt)}var p=0,d=f?function(t){return 0<i(t,s[p][1])}:function(t){return 0<=i(t,s[p][1])},m=c?function(t){return 0<u(t,s[p][0])}:function(t){return 0<=u(t,s[p][0])},y=d;return(t=new this.Collection(this,(function(){return Ie(s[0][0],s[s.length-1][1],!c,!f)})))._ondirectionchange=function(t){l="next"===t?(y=d,i):(y=m,u),s.sort(h)},t._addAlgorithm((function(t,e,n){for(var u,o=t.key;y(o);)if(++p===s.length)return e(n),!1;return!d(u=o)&&!m(u)||(0===r._cmp(o,s[p][1])||0===r._cmp(o,s[p][0])||e((function(){l===i?t.continue(s[p][0]):t.continue(s[p][1])})),!1)})),t},ze.prototype.startsWithAnyOf=function(){var t=z.apply(k,arguments);return t.every((function(t){return"string"==typeof t}))?0===t.length?Se(this):this.inAnyRange(t.map((function(t){return[t,t+Gt]}))):Ne(this,"startsWithAnyOf() only works with strings")},ze);function ze(){}function Pe(t){return Tt((function(e){return je(e),t(e.target.error),!1}))}function je(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var qe="storagemutated",Ke="x-storagemutated-1",He=de(null,qe),Re=(Ue.prototype._lock=function(){return D(!gt.global),++this._reculock,1!==this._reculock||gt.global||(gt.lockOwnerFor=this),this},Ue.prototype._unlock=function(){if(D(!gt.global),0==--this._reculock)for(gt.global||(gt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{Zt(t[1],t[0])}catch(t){}}return this},Ue.prototype._locked=function(){return this._reculock&&gt.lockOwnerFor!==this},Ue.prototype.create=function(t){var e=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(D(!this.idbtrans),!t&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new V.DatabaseClosed(n);case"MissingAPIError":throw new V.MissingAPI(n.message,n);default:throw new V.OpenFailed(n)}if(!this.active)throw new V.TransactionInactive;return D(null===this._completion._state),(t=this.idbtrans=t||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Tt((function(r){je(r),e._reject(t.error)})),t.onabort=Tt((function(r){je(r),e.active&&e._reject(new V.Abort(t.error)),e.active=!1,e.on("abort").fire(r)})),t.oncomplete=Tt((function(){e.active=!1,e._resolve(),"mutatedParts"in t&&He.storagemutated.fire(t.mutatedParts)})),this},Ue.prototype._promise=function(t,e,r){var n=this;if("readwrite"===t&&"readwrite"!==this.mode)return Jt(new V.ReadOnly("Transaction is readonly"));if(!this.active)return Jt(new V.TransactionInactive);if(this._locked())return new xt((function(i,u){n._blockedFuncs.push([function(){n._promise(t,e,r).then(i,u)},gt])}));if(r)return Ht((function(){var t=new xt((function(t,r){n._lock();var i=e(t,r,n);i&&i.then&&i.then(t,r)}));return t.finally((function(){return n._unlock()})),t._lib=!0,t}));var i=new xt((function(t,r){var i=e(t,r,n);i&&i.then&&i.then(t,r)}));return i._lib=!0,i},Ue.prototype._root=function(){return this.parent?this.parent._root():this},Ue.prototype.waitFor=function(t){var e,r=this._root(),n=xt.resolve(t);r._waitingFor?r._waitingFor=r._waitingFor.then((function(){return n})):(r._waitingFor=n,r._waitingQueue=[],e=r.idbtrans.objectStore(r.storeNames[0]),function t(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(e.get(-1/0).onsuccess=t)}());var i=r._waitingFor;return new xt((function(t,e){n.then((function(e){return r._waitingQueue.push(Tt(t.bind(null,e)))}),(function(t){return r._waitingQueue.push(Tt(e.bind(null,t)))})).finally((function(){r._waitingFor===i&&(r._waitingFor=null)}))}))},Ue.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new V.Abort))},Ue.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(f(e,t))return e[t];var r=this.schema[t];if(!r)throw new V.NotFound("Table "+t+" not part of transaction");return(r=new this.db.Table(t,r,this)).core=this.db.core.table(t),e[t]=r},Ue);function Ue(){}function Le(t,e,r,n,i,u,o){return{name:t,keyPath:e,unique:r,multi:n,auto:i,compound:u,src:(r&&!o?"&":"")+(n?"*":"")+(i?"++":"")+We(e)}}function We(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function Ve(t,e,r){return{name:t,primKey:e,indexes:r,mappedClass:null,idxByName:(n=function(t){return[t.name,t]},r.reduce((function(t,e,r){return(r=n(e,r))&&(t[r[0]]=r[1]),t}),{}))};var n}var $e=function(t){try{return t.only([[]]),$e=function(){return[[]]},[[]]}catch(t){return $e=function(){return Gt},Gt}};function Ze(t){return null==t?function(){}:"string"==typeof t?1===(e=t).split(".").length?function(t){return t[e]}:function(t){return b(t,e)}:function(e){return b(e,t)};var e}function Qe(t){return[].slice.call(t)}var Ye=0;function Je(t){return null==t?":id":"string"==typeof t?t:"[".concat(t.join("+"),"]")}function Ge(t,e,r){function n(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var r=t.lower,n=t.upper,i=t.lowerOpen;return t=t.upperOpen,void 0===r?void 0===n?null:e.upperBound(n,!!t):void 0===n?e.lowerBound(r,!!i):e.bound(r,n,!!i,!!t)}function i(t){var e,r=t.name;return{name:r,schema:t,mutate:function(t){var e=t.trans,i=t.type,u=t.keys,o=t.values,a=t.range;return new Promise((function(t,s){t=Tt(t);var c=e.objectStore(r),f=null==c.keyPath,l="put"===i||"add"===i;if(!l&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h,p=(u||o||{length:1}).length;if(u&&o&&u.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return t({numFailures:0,failures:{},results:[],lastResult:void 0});function d(t){++v,je(t)}var m=[],y=[],v=0;if("deleteRange"===i){if(4===a.type)return t({numFailures:v,failures:y,results:[],lastResult:void 0});3===a.type?m.push(h=c.clear()):m.push(h=c.delete(n(a)))}else{var g=(f=l?f?[o,u]:[o,null]:[u,null])[0],D=f[1];if(l)for(var w=0;w<p;++w)m.push(h=D&&void 0!==D[w]?c[i](g[w],D[w]):c[i](g[w])),h.onerror=d;else for(w=0;w<p;++w)m.push(h=c[i](g[w])),h.onerror=d}function b(e){e=e.target.result,m.forEach((function(t,e){return null!=t.error&&(y[e]=t.error)})),t({numFailures:v,failures:y,results:"delete"===i?u:m.map((function(t){return t.result})),lastResult:e})}h.onerror=function(t){d(t),b(t)},h.onsuccess=b}))},getMany:function(t){var e=t.trans,n=t.keys;return new Promise((function(t,i){t=Tt(t);for(var u,o=e.objectStore(r),a=n.length,s=new Array(a),c=0,f=0,l=function(e){e=e.target,s[e._pos]=e.result,++f===c&&t(s)},h=Pe(i),p=0;p<a;++p)null!=n[p]&&((u=o.get(n[p]))._pos=p,u.onsuccess=l,u.onerror=h,++c);0===c&&t(s)}))},get:function(t){var e=t.trans,n=t.key;return new Promise((function(t,i){t=Tt(t);var u=e.objectStore(r).get(n);u.onsuccess=function(e){return t(e.target.result)},u.onerror=Pe(i)}))},query:(e=f,function(t){return new Promise((function(i,u){i=Tt(i);var o,a,s,c=t.trans,f=t.values,l=t.limit,h=t.query,p=l===1/0?void 0:l,d=h.index;if(h=h.range,c=c.objectStore(r),d=d.isPrimaryKey?c:c.index(d.name),h=n(h),0===l)return i({result:[]});e?((p=f?d.getAll(h,p):d.getAllKeys(h,p)).onsuccess=function(t){return i({result:t.target.result})},p.onerror=Pe(u)):(o=0,a=!f&&"openKeyCursor"in d?d.openKeyCursor(h):d.openCursor(h),s=[],a.onsuccess=function(t){var e=a.result;return e?(s.push(f?e.value:e.primaryKey),++o===l?i({result:s}):void e.continue()):i({result:s})},a.onerror=Pe(u))}))}),openCursor:function(t){var e=t.trans,i=t.values,u=t.query,o=t.reverse,a=t.unique;return new Promise((function(t,s){t=Tt(t);var c=u.index,f=u.range,l=e.objectStore(r),h=(l=c.isPrimaryKey?l:l.index(c.name),c=o?a?"prevunique":"prev":a?"nextunique":"next",!i&&"openKeyCursor"in l?l.openKeyCursor(n(f),c):l.openCursor(n(f),c));h.onerror=Pe(s),h.onsuccess=Tt((function(r){var n,i,u,o,a=h.result;a?(a.___id=++Ye,a.done=!1,n=a.continue.bind(a),i=(i=a.continuePrimaryKey)&&i.bind(a),u=a.advance.bind(a),o=function(){throw new Error("Cursor not stopped")},a.trans=e,a.stop=a.continue=a.continuePrimaryKey=a.advance=function(){throw new Error("Cursor not started")},a.fail=Tt(s),a.next=function(){var t=this,e=1;return this.start((function(){return e--?t.continue():t.stop()})).then((function(){return t}))},a.start=function(t){function e(){if(h.result)try{t()}catch(t){a.fail(t)}else a.done=!0,a.start=function(){throw new Error("Cursor behind last entry")},a.stop()}var r=new Promise((function(t,e){t=Tt(t),h.onerror=Pe(e),a.fail=e,a.stop=function(e){a.stop=a.continue=a.continuePrimaryKey=a.advance=o,t(e)}}));return h.onsuccess=Tt((function(t){h.onsuccess=e,e()})),a.continue=n,a.continuePrimaryKey=i,a.advance=u,e(),r},t(a)):t(null)}),s)}))},count:function(t){var e=t.query,i=t.trans,u=e.index,o=e.range;return new Promise((function(t,e){var a=i.objectStore(r),s=u.isPrimaryKey?a:a.index(u.name);(s=(a=n(o))?s.count(a):s.count()).onsuccess=Tt((function(e){return t(e.target.result)})),s.onerror=Pe(e)}))}}}var u,a,s,c=(a=r,s=Qe((u=t).objectStoreNames),{schema:{name:u.name,tables:s.map((function(t){return a.objectStore(t)})).map((function(t){var e=t.keyPath,r=t.autoIncrement,n=o(e),i={};return r={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==e,compound:n,keyPath:e,autoIncrement:r,unique:!0,extractKey:Ze(e)},indexes:Qe(t.indexNames).map((function(e){return t.index(e)})).map((function(t){var e=t.name,r=t.unique,n=t.multiEntry;return t=t.keyPath,n={name:e,compound:o(t),keyPath:t,unique:r,multiEntry:n,extractKey:Ze(t)},i[Je(t)]=n})),getIndexByKeyPath:function(t){return i[Je(t)]}},i[":id"]=r.primaryKey,null!=e&&(i[Je(e)]=r.primaryKey),r}))},hasGetAll:0<s.length&&"getAll"in a.objectStore(s[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),f=(r=c.schema,c.hasGetAll),l=(c=r.tables.map(i),{});return c.forEach((function(t){return l[t.name]=t})),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!l[t])throw new Error("Table '".concat(t,"' not found"));return l[t]},MIN_KEY:-1/0,MAX_KEY:$e(e),schema:r}}function Xe(t,r,n,i){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(i=Ge(r,u,i),t.dbcore.reduce((function(t,r){return r=r.create,e(e({},t),r(t))}),i))}}function tr(t,e){var r=e.db;e=Xe(t._middlewares,r,t._deps,e),t.core=e.dbcore,t.tables.forEach((function(e){var r=e.name;t.core.schema.tables.some((function(t){return t.name===r}))&&(e.core=t.core.table(r),t[r]instanceof t.Table&&(t[r].core=e.core))}))}function er(t,e,r,n){r.forEach((function(r){var i=n[r];e.forEach((function(e){var n=function t(e,r){return m(e,r)||(e=s(e))&&t(e,r)}(e,r);(!n||"value"in n&&void 0===n.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?p(e,r,{get:function(){return this.table(r)},set:function(t){h(this,r,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[r]=new t.Table(r,i))}))}))}function rr(t,e){e.forEach((function(e){for(var r in e)e[r]instanceof t.Table&&delete e[r]}))}function nr(t,e){return t._cfg.version-e._cfg.version}function ir(t,e,r,n){var i=t._dbSchema;r.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Ve("$meta",hr("")[0],[]),t._storeNames.push("$meta"));var o=t._createTransaction("readwrite",t._storeNames,i);o.create(r),o._completion.catch(n);var a=o._reject.bind(o),s=gt.transless||gt;Ht((function(){return gt.trans=o,gt.transless=s,0!==e?(tr(t,r),c=e,((n=o).storeNames.includes("$meta")?n.table("$meta").get("version").then((function(t){return null!=t?t:c})):xt.resolve(c)).then((function(e){return i=e,a=o,s=r,c=[],e=(n=t)._versions,f=n._dbSchema=fr(0,n.idbdb,s),0!==(e=e.filter((function(t){return t._cfg.version>=i}))).length?(e.forEach((function(t){c.push((function(){var e=f,r=t._cfg.dbschema;lr(n,e,s),lr(n,r,s),f=n._dbSchema=r;var o=or(e,r);o.add.forEach((function(t){ar(s,t[0],t[1].primKey,t[1].indexes)})),o.change.forEach((function(t){if(t.recreate)throw new V.Upgrade("Not yet support for changing primary key");var e=s.objectStore(t.name);t.add.forEach((function(t){return cr(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),cr(e,t)})),t.del.forEach((function(t){return e.deleteIndex(t)}))}));var c=t._cfg.contentUpgrade;if(c&&t._cfg.version>i){tr(n,s),a._memoizedTables={};var l=_(r);o.del.forEach((function(t){l[t]=e[t]})),rr(n,[n.Transaction.prototype]),er(n,[n.Transaction.prototype],u(l),l),a.schema=l;var h,p=P(c);return p&&Rt(),o=xt.follow((function(){var t;(h=c(a))&&p&&(t=Ut.bind(null,null),h.then(t,t))})),h&&"function"==typeof h.then?xt.resolve(h):o.then((function(){return h}))}})),c.push((function(e){var r,i,u=t._cfg.dbschema;r=u,i=e,[].slice.call(i.db.objectStoreNames).forEach((function(t){return null==r[t]&&i.db.deleteObjectStore(t)})),rr(n,[n.Transaction.prototype]),er(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),a.schema=n._dbSchema})),c.push((function(e){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===t._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter((function(t){return"$meta"!==t}))):e.objectStore("$meta").put(t._cfg.version,"version"))}))})),function t(){return c.length?xt.resolve(c.shift()(a.idbtrans)).then(t):xt.resolve()}().then((function(){sr(f,s)}))):xt.resolve();var n,i,a,s,c,f})).catch(a)):(u(i).forEach((function(t){ar(r,t,i[t].primKey,i[t].indexes)})),tr(t,r),void xt.follow((function(){return t.on.populate.fire(o)})).catch(a));var n,c}))}function ur(t,e){sr(t._dbSchema,e),e.db.version%10!=0||e.objectStoreNames.contains("$meta")||e.db.createObjectStore("$meta").add(Math.ceil(e.db.version/10-1),"version");var r=fr(0,t.idbdb,e);lr(t,t._dbSchema,e);for(var n=0,i=or(r,t._dbSchema).change;n<i.length;n++){var u=function(t){if(t.change.length||t.recreate)return console.warn("Unable to patch indexes of table ".concat(t.name," because it has changes on the type of index or primary key.")),{value:void 0};var r=e.objectStore(t.name);t.add.forEach((function(e){it&&console.debug("Dexie upgrade patch: Creating missing index ".concat(t.name,".").concat(e.src)),cr(r,e)}))}(i[n]);if("object"==typeof u)return u.value}}function or(t,e){var r,n={del:[],add:[],change:[]};for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],u=e[r];if(i){var o={name:r,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||i.primKey.auto!==u.primKey.auto)o.recreate=!0,n.change.push(o);else{var a=i.idxByName,s=u.idxByName,c=void 0;for(c in a)s[c]||o.del.push(c);for(c in s){var f=a[c],l=s[c];f?f.src!==l.src&&o.change.push(l):o.add.push(l)}(0<o.del.length||0<o.add.length||0<o.change.length)&&n.change.push(o)}}else n.add.push([r,u])}return n}function ar(t,e,r,n){var i=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach((function(t){return cr(i,t)})),i}function sr(t,e){u(t).forEach((function(r){e.db.objectStoreNames.contains(r)||(it&&console.debug("Dexie: Creating missing table",r),ar(e,r,t[r].primKey,t[r].indexes))}))}function cr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function fr(t,e,r){var n={};return v(e.objectStoreNames,0).forEach((function(t){for(var e=r.objectStore(t),i=Le(We(a=e.keyPath),a||"",!0,!1,!!e.autoIncrement,a&&"string"!=typeof a,!0),u=[],o=0;o<e.indexNames.length;++o){var a=(s=e.index(e.indexNames[o])).keyPath,s=Le(s.name,a,!!s.unique,!!s.multiEntry,!1,a&&"string"!=typeof a,!1);u.push(s)}n[t]=Ve(t,i,u)})),n}function lr(t,e,r){for(var n=r.db.objectStoreNames,u=0;u<n.length;++u){var o=n[u],a=r.objectStore(o);t._hasGetAll="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var c=a.indexNames[s],f=a.index(c).keyPath,l="string"==typeof f?f:"["+v(f).join("+")+"]";!e[o]||(f=e[o].idxByName[l])&&(f.name=c,delete e[o].idxByName[l],e[o].idxByName[c]=f)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function hr(t){return t.split(",").map((function(t,e){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Le(r,n||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),o(n),0===e)}))}var pr=(dr.prototype._parseStoresSpec=function(t,e){u(t).forEach((function(r){if(null!==t[r]){var n=hr(t[r]),i=n.shift();if(i.unique=!0,i.multi)throw new V.Schema("Primary key cannot be multi-valued");n.forEach((function(t){if(t.auto)throw new V.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new V.Schema("Index must have a name and cannot be an empty string")})),e[r]=Ve(r,i,n)}}))},dr.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,t):t,t=e._versions;var r={},n={};return t.forEach((function(t){a(r,t._cfg.storesSource),n=t._cfg.dbschema={},t._parseStoresSpec(r,n)})),e._dbSchema=n,rr(e,[e._allTables,e,e.Transaction.prototype]),er(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],u(n),n),e._storeNames=u(n),this},dr.prototype.upgrade=function(t){return this._cfg.contentUpgrade=nt(this._cfg.contentUpgrade||Q,t),this},dr);function dr(){}function mr(t,e){var r=t._dbNamesDB;return r||(r=t._dbNamesDB=new tn(re,{addons:[],indexedDB:t,IDBKeyRange:e})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function yr(t){return t&&"function"==typeof t.databases}function vr(t){return Ht((function(){return gt.letThrough=!0,t()}))}function gr(t){return!("from"in t)}var Dr=function(t,e){if(!this){var r=new Dr;return t&&"d"in t&&a(r,t),r}a(this,arguments.length?{d:1,from:t,to:1<arguments.length?e:t}:{d:0})};function wr(t,e,r){var n=ce(e,r);if(!isNaN(n)){if(0<n)throw RangeError();if(gr(t))return a(t,{from:e,to:r,d:1});var i=t.l;if(n=t.r,ce(r,t.from)<0)return i?wr(i,e,r):t.l={from:e,to:r,d:1,l:null,r:null},Ar(t);if(0<ce(e,t.to))return n?wr(n,e,r):t.r={from:e,to:r,d:1,l:null,r:null},Ar(t);ce(e,t.from)<0&&(t.from=e,t.l=null,t.d=n?n.d+1:1),0<ce(r,t.to)&&(t.to=r,t.r=null,t.d=t.l?t.l.d+1:1),r=!t.r,i&&!t.l&&br(t,i),n&&r&&br(t,n)}}function br(t,e){gr(e)||function t(e,r){var n=r.from,i=r.to,u=r.l;r=r.r,wr(e,n,i),u&&t(e,u),r&&t(e,r)}(t,e)}function xr(t,e){var r=_r(e),n=r.next();if(n.done)return!1;for(var i=n.value,u=_r(t),o=u.next(i.from),a=o.value;!n.done&&!o.done;){if(ce(a.from,i.to)<=0&&0<=ce(a.to,i.from))return!0;ce(i.from,a.from)<0?i=(n=r.next(a.from)).value:a=(o=u.next(i.from)).value}return!1}function _r(t){var e=gr(t)?null:{s:0,n:t};return{next:function(t){for(var r=0<arguments.length;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&ce(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||ce(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Ar(t){var r,n,i=((null===(r=t.r)||void 0===r?void 0:r.d)||0)-((null===(n=t.l)||void 0===n?void 0:n.d)||0),u=1<i?"r":i<-1?"l":"";u&&(r="r"==u?"l":"r",n=e({},t),i=t[u],t.from=i.from,t.to=i.to,t[u]=i[u],n[u]=i[r],(t[r]=n).d=Er(n)),t.d=Er(t)}function Er(t){var e=t.r;return t=t.l,(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}function Fr(t,e){return u(e).forEach((function(r){t[r]?br(t[r],e[r]):t[r]=function t(e){var r,n,i={};for(r in e)f(e,r)&&(n=e[r],i[r]=!n||"object"!=typeof n||C.has(n.constructor)?n:t(n));return i}(e[r])})),t}function Cr(t,e){return t.all||e.all||Object.keys(t).some((function(r){return e[r]&&xr(e[r],t[r])}))}l(Dr.prototype,((j={add:function(t){return br(this,t),this},addKey:function(t){return wr(this,t,t),this},addKeys:function(t){var e=this;return t.forEach((function(t){return wr(e,t,t)})),this}})[O]=function(){return _r(this)},j));var Mr={},Br={},Nr=!1;function Sr(t){Fr(Br,t),Nr||(Nr=!0,setTimeout((function(){Nr=!1,Or(Br,!(Br={}))}),0))}function Or(t,e){void 0===e&&(e=!1);var r=new Set;if(t.all)for(var n=0,i=Object.values(Mr);n<i.length;n++)Ir(o=i[n],t,r,e);else for(var u in t){var o,a=/^idb\:\/\/(.*)\/(.*)\//.exec(u);a&&(u=a[1],a=a[2],(o=Mr["idb://".concat(u,"/").concat(a)])&&Ir(o,t,r,e))}r.forEach((function(t){return t()}))}function Ir(t,e,r,n){for(var i=[],u=0,o=Object.entries(t.queries.query);u<o.length;u++){for(var a=o[u],s=a[0],c=[],f=0,l=a[1];f<l.length;f++){var h=l[f];Cr(e,h.obsSet)?h.subscribers.forEach((function(t){return r.add(t)})):n&&c.push(h)}n&&i.push([s,c])}if(n)for(var p=0,d=i;p<d.length;p++){var m=d[p];s=m[0],c=m[1],t.queries.query[s]=c}}function Tr(t){var e=t._state,r=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((function(){return e.dbOpenError?Jt(e.dbOpenError):t}));e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var n=e.openCanceller,i=Math.round(10*t.verno),o=!1;function a(){if(e.openCanceller!==n)throw new V.DatabaseClosed("db.open() was cancelled")}function s(){return new xt((function(n,c){if(a(),!r)throw new V.MissingAPI;var f=t.name,p=e.autoSchema||!i?r.open(f):r.open(f,i);if(!p)throw new V.MissingAPI;p.onerror=Pe(c),p.onblocked=Tt(t._fireOnBlocked),p.onupgradeneeded=Tt((function(n){var i;l=p.transaction,e.autoSchema&&!t._options.allowEmptyDB?(p.onerror=je,l.abort(),p.result.close(),(i=r.deleteDatabase(f)).onsuccess=i.onerror=Tt((function(){c(new V.NoSuchDatabase("Database ".concat(f," doesnt exist")))}))):(l.onerror=Pe(c),n=n.oldVersion>Math.pow(2,62)?0:n.oldVersion,h=n<1,t.idbdb=p.result,o&&ur(t,l),ir(t,n/10,l,c))}),c),p.onsuccess=Tt((function(){l=null;var r,a,c,d,m,y=t.idbdb=p.result,g=v(y.objectStoreNames);if(0<g.length)try{var D=y.transaction(1===(d=g).length?d[0]:d,"readonly");if(e.autoSchema)a=y,c=D,(r=t).verno=a.version/10,c=r._dbSchema=fr(0,a,c),r._storeNames=v(a.objectStoreNames,0),er(r,[r._allTables],u(c),c);else if(lr(t,t._dbSchema,D),((m=or(fr(0,(m=t).idbdb,D),m._dbSchema)).add.length||m.change.some((function(t){return t.add.length||t.change.length})))&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),y.close(),i=y.version+1,o=!0,n(s());tr(t,D)}catch(r){}ee.push(t),y.onversionchange=Tt((function(r){e.vcFired=!0,t.on("versionchange").fire(r)})),y.onclose=Tt((function(e){t.on("close").fire(e)})),h&&(m=t._deps,D=f,y=m.indexedDB,m=m.IDBKeyRange,yr(y)||D===re||mr(y,m).put({name:D}).catch(Q)),n()}),c)})).catch((function(t){switch(null==t?void 0:t.name){case"UnknownError":if(0<e.PR1398_maxLoop)return e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),s();break;case"VersionError":if(0<i)return i=0,s()}return xt.reject(t)}))}var c,f=e.dbReadyResolve,l=null,h=!1;return xt.race([n,("undefined"==typeof navigator?xt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){function e(){return indexedDB.databases().finally(t)}c=setInterval(e,100),e()})).finally((function(){return clearInterval(c)})):Promise.resolve()).then(s)]).then((function(){return a(),e.onReadyBeingFired=[],xt.resolve(vr((function(){return t.on.ready.fire(t.vip)}))).then((function r(){if(0<e.onReadyBeingFired.length){var n=e.onReadyBeingFired.reduce(nt,Q);return e.onReadyBeingFired=[],xt.resolve(vr((function(){return n(t.vip)}))).then(r)}}))})).finally((function(){e.openCanceller===n&&(e.onReadyBeingFired=null,e.isBeingOpened=!1)})).catch((function(r){e.dbOpenError=r;try{l&&l.abort()}catch(r){}return n===e.openCanceller&&t._close(),Jt(r)})).finally((function(){e.openComplete=!0,f()})).then((function(){var e;return h&&(e={},t.tables.forEach((function(r){r.schema.indexes.forEach((function(n){n.name&&(e["idb://".concat(t.name,"/").concat(r.name,"/").concat(n.name)]=new Dr(-1/0,[[[]]]))})),e["idb://".concat(t.name,"/").concat(r.name,"/")]=e["idb://".concat(t.name,"/").concat(r.name,"/:dels")]=new Dr(-1/0,[[[]]])})),He(qe).fire(e),Or(e,!0)),t}))}function kr(t){function e(e){return t.next(e)}var r=i(e),n=i((function(e){return t.throw(e)}));function i(t){return function(e){var i=t(e);return e=i.value,i.done?e:e&&"function"==typeof e.then?e.then(r,n):o(e)?Promise.all(e).then(r,n):r(e)}}return i(e)()}function zr(t,e,r){for(var n=o(t)?t.slice():[t],i=0;i<r;++i)n.push(e);return n}var Pr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return e(e({},t),{table:function(r){var n=t.table(r),i=n.schema,u={},o=[];function a(t,r,n){var i=Je(t),s=u[i]=u[i]||[],c=null==t?0:"string"==typeof t?1:t.length,f=0<r;return f=e(e({},n),{name:f?"".concat(i,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:f,keyTail:r,keyLength:c,extractKey:Ze(t),unique:!f&&n.unique}),s.push(f),f.isPrimaryKey||o.push(f),1<c&&a(2===c?t[0]:t.slice(0,c-1),r+1,n),s.sort((function(t,e){return t.keyTail-e.keyTail})),f}r=a(i.primaryKey.keyPath,0,i.primaryKey),u[":id"]=[r];for(var s=0,c=i.indexes;s<c.length;s++){var f=c[s];a(f.keyPath,0,f)}function l(r){var n,i=r.query.index;return i.isVirtual?e(e({},r),{query:{index:i.lowLevelIndex,range:(n=r.query.range,i=i.keyTail,{type:1===n.type?2:n.type,lower:zr(n.lower,n.lowerOpen?t.MAX_KEY:t.MIN_KEY,i),lowerOpen:!0,upper:zr(n.upper,n.upperOpen?t.MIN_KEY:t.MAX_KEY,i),upperOpen:!0})}}):r}return e(e({},n),{schema:e(e({},i),{primaryKey:r,indexes:o,getIndexByKeyPath:function(t){return(t=u[Je(t)])&&t[0]}}),count:function(t){return n.count(l(t))},query:function(t){return n.query(l(t))},openCursor:function(e){var r=e.query.index,i=r.keyTail,u=r.isVirtual,o=r.keyLength;return u?n.openCursor(l(e)).then((function(t){return t&&a(t)})):n.openCursor(e);function a(r){return Object.create(r,{continue:{value:function(n){null!=n?r.continue(zr(n,e.reverse?t.MAX_KEY:t.MIN_KEY,i)):e.unique?r.continue(r.key.slice(0,o).concat(e.reverse?t.MIN_KEY:t.MAX_KEY,i)):r.continue()}},continuePrimaryKey:{value:function(e,n){r.continuePrimaryKey(zr(e,t.MAX_KEY,i),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var t=r.key;return 1===o?t[0]:t.slice(0,o)}},value:{get:function(){return r.value}}})}}})}})}};function jr(t,e,r,n){return r=r||{},n=n||"",u(t).forEach((function(i){var u,o,a;f(e,i)?(u=t[i],o=e[i],"object"==typeof u&&"object"==typeof o&&u&&o?(a=S(u))!==S(o)?r[n+i]=e[i]:"Object"===a?jr(u,o,r,n+i+"."):u!==o&&(r[n+i]=e[i]):u!==o&&(r[n+i]=e[i])):r[n+i]=void 0})),u(e).forEach((function(i){f(t,i)||(r[n+i]=e[i])})),r}function qr(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}var Kr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return e(e({},t),{table:function(r){var i=t.table(r),u=i.schema.primaryKey;return e(e({},i),{mutate:function(t){var o=gt.trans,a=o.table(r).hook,s=a.deleting,c=a.creating,l=a.updating;switch(t.type){case"add":if(c.fire===Q)break;return o._promise("readwrite",(function(){return h(t)}),!0);case"put":if(c.fire===Q&&l.fire===Q)break;return o._promise("readwrite",(function(){return h(t)}),!0);case"delete":if(s.fire===Q)break;return o._promise("readwrite",(function(){return h(t)}),!0);case"deleteRange":if(s.fire===Q)break;return o._promise("readwrite",(function(){return function t(r,n,o){return i.query({trans:r,values:!1,query:{index:u,range:n},limit:o}).then((function(i){var u=i.result;return h({type:"delete",keys:u,trans:r}).then((function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):u.length<o?{failures:[],numFailures:0,lastResult:void 0}:t(r,e(e({},n),{lower:u[u.length-1],lowerOpen:!0}),o)}))}))}(t.trans,t.range,1e4)}),!0)}return i.mutate(t);function h(t){var r,o,a,h=gt.trans,p=t.keys||qr(u,t);if(!p)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?e(e({},t),{keys:p}):e({},t)).type&&(t.values=n([],t.values,!0)),t.keys&&(t.keys=n([],t.keys,!0)),r=i,a=p,("add"===(o=t).type?Promise.resolve([]):r.getMany({trans:o.trans,keys:a,cache:"immutable"})).then((function(e){var r=p.map((function(r,n){var i,o,a,p=e[n],d={onerror:null,onsuccess:null};return"delete"===t.type?s.fire.call(d,r,p,h):"add"===t.type||void 0===p?(i=c.fire.call(d,r,t.values[n],h),null==r&&null!=i&&(t.keys[n]=r=i,u.outbound||x(t.values[n],u.keyPath,r))):(i=jr(p,t.values[n]),(o=l.fire.call(d,i,r,p,h))&&(a=t.values[n],Object.keys(o).forEach((function(t){f(a,t)?a[t]=o[t]:x(a,t,o[t])})))),d}));return i.mutate(t).then((function(n){for(var i=n.failures,u=n.results,o=n.numFailures,a=(n=n.lastResult,0);a<p.length;++a){var s=(u||p)[a],c=r[a];null==s?c.onerror&&c.onerror(i[a]):c.onsuccess&&c.onsuccess("put"===t.type&&e[a]?t.values[a]:s)}return{failures:i,results:u,numFailures:o,lastResult:n}})).catch((function(t){return r.forEach((function(e){return e.onerror&&e.onerror(t)})),Promise.reject(t)}))}))}}})}})}};function Hr(t,e,r){try{if(!e)return null;if(e.keys.length<t.length)return null;for(var n=[],i=0,u=0;i<e.keys.length&&u<t.length;++i)0===ce(e.keys[i],t[u])&&(n.push(r?B(e.values[i]):e.values[i]),++u);return n.length===t.length?n:null}catch(t){return null}}var Rr={stack:"dbcore",level:-1,create:function(t){return{table:function(r){var n=t.table(r);return e(e({},n),{getMany:function(t){if(!t.cache)return n.getMany(t);var e=Hr(t.keys,t.trans._cache,"clone"===t.cache);return e?xt.resolve(e):n.getMany(t).then((function(e){return t.trans._cache={keys:t.keys,values:"clone"===t.cache?B(e):e},e}))},mutate:function(t){return"add"!==t.type&&(t.trans._cache=null),n.mutate(t)}})}}}};function Ur(t,e){return"readonly"===t.trans.mode&&!!t.subscr&&!t.trans.explicit&&"disabled"!==t.trans.db._options.cache&&!e.schema.primaryKey.outbound}function Lr(t,e){switch(t){case"query":return e.values&&!e.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Wr={stack:"dbcore",level:0,name:"Observability",create:function(t){var r=t.schema.name,n=new Dr(t.MIN_KEY,t.MAX_KEY);return e(e({},t),{transaction:function(e,r,n){if(gt.subscr&&"readonly"!==r)throw new V.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(gt.querier));return t.transaction(e,r,n)},table:function(i){var a=t.table(i),s=a.schema,c=s.primaryKey,f=s.indexes,l=c.extractKey,h=c.outbound,p=c.autoIncrement&&f.filter((function(t){return t.compound&&t.keyPath.includes(c.keyPath)})),d=e(e({},a),{mutate:function(t){function e(t){return t="idb://".concat(r,"/").concat(i,"/").concat(t),d[t]||(d[t]=new Dr)}var u,f,l,h=t.trans,d=t.mutatedParts||(t.mutatedParts={}),m=e(""),y=e(":dels"),v=t.type,g="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[qr(c,t).filter((function(t){return t})),t.values]:[],D=g[0],w=g[1];return g=t.trans._cache,o(D)?(m.addKeys(D),(g="delete"===v||D.length===w.length?Hr(D,g):null)||y.addKeys(D),(g||w)&&(u=e,f=g,l=w,s.indexes.forEach((function(t){var e=u(t.name||"");function r(e){return null!=e?t.extractKey(e):null}function n(r){return t.multiEntry&&o(r)?r.forEach((function(t){return e.addKey(t)})):e.addKey(r)}(f||l).forEach((function(t,e){var i=f&&r(f[e]);0!==ce(i,e=l&&r(l[e]))&&(null!=i&&n(i),null!=e&&n(e))}))})))):D?(w={from:D.lower,to:D.upper},y.add(w),m.add(w)):(m.add(n),y.add(n),s.indexes.forEach((function(t){return e(t.name).add(n)}))),a.mutate(t).then((function(r){return!D||"add"!==t.type&&"put"!==t.type||(m.addKeys(r.results),p&&p.forEach((function(n){var i=t.values.map((function(t){return n.extractKey(t)})),u=n.keyPath.findIndex((function(t){return t===c.keyPath}));r.results.forEach((function(t){return i[u]=t})),e(n.name).addKeys(i)}))),h.mutatedParts=Fr(h.mutatedParts||{},d),r}))}}),m=(f=function(e){e=(r=e.query).index;var r=r.range;return[e,new Dr(null!==(e=r.lower)&&void 0!==e?e:t.MIN_KEY,null!==(r=r.upper)&&void 0!==r?r:t.MAX_KEY)]},{get:function(t){return[c,new Dr(t.key)]},getMany:function(t){return[c,(new Dr).addKeys(t.keys)]},count:f,query:f,openCursor:f});return u(m).forEach((function(t){d[t]=function(u){var o=!!(d=gt.subscr),s=Ur(gt,a)&&Lr(t,u)?u.obsSet={}:d;if(o){var c=function(t){return t="idb://".concat(r,"/").concat(i,"/").concat(t),s[t]||(s[t]=new Dr)},f=c(""),p=c(":dels"),d=(o=(d=m[t](u))[0],d[1]);if(("query"===t&&o.isPrimaryKey&&!u.values?p:c(o.name||"")).add(d),!o.isPrimaryKey){if("count"!==t){var y="query"===t&&h&&u.values&&a.query(e(e({},u),{values:!1}));return a[t].apply(this,arguments).then((function(e){if("query"===t){if(h&&u.values)return y.then((function(t){return t=t.result,f.addKeys(t),e}));var r=u.values?e.result.map(l):e.result;(u.values?f:p).addKeys(r)}else if("openCursor"===t){var n=e,i=u.values;return n&&Object.create(n,{key:{get:function(){return p.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var t=n.primaryKey;return p.addKey(t),t}},value:{get:function(){return i&&f.addKey(n.primaryKey),n.value}}})}return e}))}p.add(n)}}return a[t].apply(this,arguments)}})),d}})}};function Vr(t,r,n){if(0===n.numFailures)return r;if("deleteRange"===r.type)return null;var i=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return n.numFailures===i?null:(r=e({},r),o(r.keys)&&(r.keys=r.keys.filter((function(t,e){return!(e in n.failures)}))),"values"in r&&o(r.values)&&(r.values=r.values.filter((function(t,e){return!(e in n.failures)}))),r)}function $r(t,e){return r=t,(void 0===(n=e).lower||(n.lowerOpen?0<ce(r,n.lower):0<=ce(r,n.lower)))&&(void 0===e.upper||(e.upperOpen?ce(t,e.upper)<0:ce(t,e.upper)<=0));var r,n}function Zr(t,e,r,n,i,u){if(!r||0===r.length)return t;var a=e.query.index,s=a.multiEntry,c=e.query.range,f=n.schema.primaryKey.extractKey,l=a.extractKey,h=(a.lowLevelIndex||a).extractKey;return r=r.reduce((function(t,r){var n=t,i="add"===r.type||"put"===r.type?r.values.filter((function(t){return t=l(t),s&&o(t)?t.some((function(t){return $r(t,c)})):$r(t,c)})).map((function(t){return t=B(t),u&&Object.freeze(t),t})):[];switch(r.type){case"add":n=t.concat(e.values?i:i.map((function(t){return f(t)})));break;case"put":var a=(new Dr).addKeys(r.values.map((function(t){return f(t)})));n=t.filter((function(t){return t=e.values?f(t):t,!xr(new Dr(t),a)})).concat(e.values?i:i.map((function(t){return f(t)})));break;case"delete":var h=(new Dr).addKeys(r.keys);n=t.filter((function(t){return t=e.values?f(t):t,!xr(new Dr(t),h)}));break;case"deleteRange":var p=r.range;n=t.filter((function(t){return!$r(f(t),p)}))}return n}),t),r===t?t:(r.sort((function(t,e){return ce(h(t),h(e))||ce(f(t),f(e))})),e.limit&&e.limit<1/0&&(r.length>e.limit?r.length=e.limit:t.length===e.limit&&r.length<e.limit&&(i.dirty=!0)),u?Object.freeze(r):r)}function Qr(t,e){return 0===ce(t.lower,e.lower)&&0===ce(t.upper,e.upper)&&!!t.lowerOpen==!!e.lowerOpen&&!!t.upperOpen==!!e.upperOpen}function Yr(t,e){return function(t,e,r,n){if(void 0===t)return void 0!==e?-1:0;if(void 0===e)return 1;if(0===(e=ce(t,e))){if(r&&n)return 0;if(r)return 1;if(n)return-1}return e}(t.lower,e.lower,t.lowerOpen,e.lowerOpen)<=0&&0<=function(t,e,r,n){if(void 0===t)return void 0!==e?1:0;if(void 0===e)return-1;if(0===(e=ce(t,e))){if(r&&n)return 0;if(r)return-1;if(n)return 1}return e}(t.upper,e.upper,t.upperOpen,e.upperOpen)}function Jr(t,e,r,n){t.subscribers.add(r),n.addEventListener("abort",(function(){var n,i;t.subscribers.delete(r),0===t.subscribers.size&&(n=t,i=e,setTimeout((function(){0===n.subscribers.size&&T(i,n)}),3e3))}))}var Gr={stack:"dbcore",level:0,name:"Cache",create:function(t){var r=t.schema.name;return e(e({},t),{transaction:function(e,n,i){var u,o,a=t.transaction(e,n,i);return"readwrite"===n&&(o=(u=new AbortController).signal,i=function(i){return function(){if(u.abort(),"readwrite"===n){for(var o=new Set,s=0,c=e;s<c.length;s++){var f=c[s],l=Mr["idb://".concat(r,"/").concat(f)];if(l){var h=t.table(f),p=l.optimisticOps.filter((function(t){return t.trans===a}));if(a._explicit&&i&&a.mutatedParts)for(var d=0,m=Object.values(l.queries.query);d<m.length;d++)for(var y=0,v=(w=m[d]).slice();y<v.length;y++)Cr((b=v[y]).obsSet,a.mutatedParts)&&(T(w,b),b.subscribers.forEach((function(t){return o.add(t)})));else if(0<p.length){l.optimisticOps=l.optimisticOps.filter((function(t){return t.trans!==a}));for(var g=0,D=Object.values(l.queries.query);g<D.length;g++)for(var w,b,x,_=0,A=(w=D[g]).slice();_<A.length;_++)null!=(b=A[_]).res&&a.mutatedParts&&(i&&!b.dirty?(x=Object.isFrozen(b.res),x=Zr(b.res,b.req,p,h,b,x),b.dirty?(T(w,b),b.subscribers.forEach((function(t){return o.add(t)}))):x!==b.res&&(b.res=x,b.promise=xt.resolve({result:x}))):(b.dirty&&T(w,b),b.subscribers.forEach((function(t){return o.add(t)}))))}}}o.forEach((function(t){return t()}))}}},a.addEventListener("abort",i(!1),{signal:o}),a.addEventListener("error",i(!1),{signal:o}),a.addEventListener("complete",i(!0),{signal:o})),a},table:function(n){var i=t.table(n),u=i.schema.primaryKey;return e(e({},i),{mutate:function(t){var o=gt.trans;if(u.outbound||"disabled"===o.db._options.cache||o.explicit)return i.mutate(t);var a=Mr["idb://".concat(r,"/").concat(n)];return a?(o=i.mutate(t),"add"!==t.type&&"put"!==t.type||!(50<=t.values.length||qr(u,t).some((function(t){return null==t})))?(a.optimisticOps.push(t),t.mutatedParts&&Sr(t.mutatedParts),o.then((function(e){0<e.numFailures&&(T(a.optimisticOps,t),(e=Vr(0,t,e))&&a.optimisticOps.push(e),t.mutatedParts&&Sr(t.mutatedParts))})),o.catch((function(){T(a.optimisticOps,t),t.mutatedParts&&Sr(t.mutatedParts)}))):o.then((function(r){var n=Vr(0,e(e({},t),{values:t.values.map((function(t,n){var i;return x(t=null!==(i=u.keyPath)&&void 0!==i&&i.includes(".")?B(t):e({},t),u.keyPath,r.results[n]),t}))}),r);a.optimisticOps.push(n),queueMicrotask((function(){return t.mutatedParts&&Sr(t.mutatedParts)}))})),o):i.mutate(t)},query:function(t){if(!Ur(gt,i)||!Lr("query",t))return i.query(t);var e="immutable"===(null===(a=gt.trans)||void 0===a?void 0:a.db._options.cache),u=(c=gt).requery,o=c.signal,a=function(t,e,r,n){var i=Mr["idb://".concat(t,"/").concat(e)];if(!i)return[];if(!(e=i.queries[r]))return[null,!1,i,null];var u=e[(n.query?n.query.index.name:null)||""];if(!u)return[null,!1,i,null];switch(r){case"query":var o=u.find((function(t){return t.req.limit===n.limit&&t.req.values===n.values&&Qr(t.req.query.range,n.query.range)}));return o?[o,!0,i,u]:[u.find((function(t){return("limit"in t.req?t.req.limit:1/0)>=n.limit&&(!n.values||t.req.values)&&Yr(t.req.query.range,n.query.range)})),!1,i,u];case"count":return o=u.find((function(t){return Qr(t.req.query.range,n.query.range)})),[o,!!o,i,u]}}(r,n,"query",t),s=a[0],c=a[1],f=a[2],l=a[3];return s&&c?s.obsSet=t.obsSet:(c=i.query(t).then((function(t){var r=t.result;if(s&&(s.res=r),e){for(var n=0,i=r.length;n<i;++n)Object.freeze(r[n]);Object.freeze(r)}else t.result=B(r);return t})).catch((function(t){return l&&s&&T(l,s),Promise.reject(t)})),s={obsSet:t.obsSet,promise:c,subscribers:new Set,type:"query",req:t,dirty:!1},l?l.push(s):(l=[s],(f=f||(Mr["idb://".concat(r,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[t.query.index.name||""]=l)),Jr(s,l,u,o),s.promise.then((function(r){return{result:Zr(r.result,t,null==f?void 0:f.optimisticOps,i,s,e)}}))}})}})}};function Xr(t,e){return new Proxy(t,{get:function(t,r,n){return"db"===r?e:Reflect.get(t,r,n)}})}var tn=(en.prototype.version=function(t){if(isNaN(t)||t<.1)throw new V.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new V.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,r=e.filter((function(e){return e._cfg.version===t}))[0];return r||(r=new this.Version(t),e.push(r),e.sort(nr),r.stores({}),this._state.autoSchema=!1,r)},en.prototype._whenReady=function(t){var e=this;return this.idbdb&&(this._state.openComplete||gt.letThrough||this._vip)?t():new xt((function(t,r){if(e._state.openComplete)return r(new V.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return void r(new V.DatabaseClosed);e.open().catch(Q)}e._state.dbReadyPromise.then(t,r)})).then(t)},en.prototype.use=function(t){var e=t.stack,r=t.create,n=t.level,i=t.name;return i&&this.unuse({stack:e,name:i}),(t=this._middlewares[e]||(this._middlewares[e]=[])).push({stack:e,create:r,level:null==n?10:n,name:i}),t.sort((function(t,e){return t.level-e.level})),this},en.prototype.unuse=function(t){var e=t.stack,r=t.name,n=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((function(t){return n?t.create!==n:!!r&&t.name!==r}))),this},en.prototype.open=function(){var t=this;return Zt(vt,(function(){return Tr(t)}))},en.prototype._close=function(){var t=this._state,e=ee.indexOf(this);if(0<=e&&ee.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new xt((function(e){t.dbReadyResolve=e})),t.openCanceller=new xt((function(e,r){t.cancelOpen=r})))},en.prototype.close=function(t){var e=(void 0===t?{disableAutoOpen:!0}:t).disableAutoOpen;t=this._state,e?(t.isBeingOpened&&t.cancelOpen(new V.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new V.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)},en.prototype.delete=function(t){var e=this;void 0===t&&(t={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new xt((function(i,u){function o(){e.close(t);var r=e._deps.indexedDB.deleteDatabase(e.name);r.onsuccess=Tt((function(){var t,r,n;t=e._deps,r=e.name,n=t.indexedDB,t=t.IDBKeyRange,yr(n)||r===re||mr(n,t).delete(r).catch(Q),i()})),r.onerror=Pe(u),r.onblocked=e._fireOnBlocked}if(r)throw new V.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},en.prototype.backendDB=function(){return this.idbdb},en.prototype.isOpen=function(){return null!==this.idbdb},en.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},en.prototype.hasFailed=function(){return null!==this._state.dbOpenError},en.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(en.prototype,"tables",{get:function(){var t=this;return u(this._allTables).map((function(e){return t._allTables[e]}))},enumerable:!1,configurable:!0}),en.prototype.transaction=function(){var t=function(t,e,r){var n=arguments.length;if(n<2)throw new V.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];return r=i.pop(),[t,E(i),r]}.apply(this,arguments);return this._transaction.apply(this,t)},en.prototype._transaction=function(t,e,r){var n=this,i=gt.trans;i&&i.db===this&&-1===t.indexOf("!")||(i=null);var u,o,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(o=e.map((function(t){if("string"!=typeof(t=t instanceof n.Table?t.name:t))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==t||t===ne)u=ne;else{if("rw"!=t&&t!=ie)throw new V.InvalidArgument("Invalid transaction mode: "+t);u=ie}if(i){if(i.mode===ne&&u===ie){if(!a)throw new V.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((function(t){if(i&&-1===i.storeNames.indexOf(t)){if(!a)throw new V.SubTransaction("Table "+t+" not included in parent transaction.");i=null}})),a&&i&&!i.active&&(i=null)}}catch(r){return i?i._promise(null,(function(t,e){e(r)})):Jt(r)}var s=function t(e,r,n,i,u){return xt.resolve().then((function(){var o=gt.transless||gt,a=e._createTransaction(r,n,e._dbSchema,i);if(a.explicit=!0,o={trans:a,transless:o},i)a.idbtrans=i.idbtrans;else try{a.create(),a.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(o){return o.name===L.InvalidState&&e.isOpen()&&0<--e._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return t(e,r,n,null,u)}))):Jt(o)}var s,c=P(u);return c&&Rt(),o=xt.follow((function(){var t;(s=u.call(a,a))&&(c?(t=Ut.bind(null,null),s.then(t,t)):"function"==typeof s.next&&"function"==typeof s.throw&&(s=kr(s)))}),o),(s&&"function"==typeof s.then?xt.resolve(s).then((function(t){return a.active?t:Jt(new V.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):o.then((function(){return s}))).then((function(t){return i&&a._resolve(),a._completion.then((function(){return t}))})).catch((function(t){return a._reject(t),Jt(t)}))}))}.bind(null,this,u,o,i,r);return i?i._promise(u,s,"lock"):gt.trans?Zt(gt.transless,(function(){return n._whenReady(s)})):this._whenReady(s)},en.prototype.table=function(t){if(!f(this._allTables,t))throw new V.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},en);function en(t,r){var n=this;this._middlewares={},this.verno=0;var i=en.dependencies;this._options=r=e({addons:en.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},i=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,o,a,s,c,f={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Q,dbReadyPromise:null,cancelOpen:Q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};f.dbReadyPromise=new xt((function(t){f.dbReadyResolve=t})),f.openCanceller=new xt((function(t,e){f.cancelOpen=e})),this._state=f,this.name=t,this.on=de(this,"populate","blocked","versionchange","close",{ready:[nt,Q]}),this.on.ready.subscribe=g(this.on.ready.subscribe,(function(t){return function(e,r){en.vip((function(){var i,u=n._state;u.openComplete?(u.dbOpenError||xt.resolve().then(e),r&&t(e)):u.onReadyBeingFired?(u.onReadyBeingFired.push(e),r&&t(e)):(t(e),i=n,r||t((function t(){i.on.ready.unsubscribe(e),i.on.ready.unsubscribe(t)})))}))}})),this.Collection=(u=this,me(Ee.prototype,(function(t,e){this.db=u;var r=oe,n=null;if(e)try{r=e()}catch(t){n=t}var i=t._ctx;t=(e=i.table).hook.reading.fire,this._ctx={table:e,index:i.index,isPrimKey:!i.index||e.schema.primKey.keyPath&&i.index===e.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:i.or,valueMapper:t!==Y?t:null}}))),this.Table=(o=this,me(he.prototype,(function(t,e,r){this.db=o,this._tx=r,this.name=t,this.schema=e,this.hook=o._allTables[t]?o._allTables[t].hook:de(null,{creating:[X,Q],reading:[J,Y],updating:[et,Q],deleting:[tt,Q]})}))),this.Transaction=(a=this,me(Re.prototype,(function(t,e,r,n,i){var u=this;this.db=a,this.mode=t,this.storeNames=e,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=de(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new xt((function(t,e){u._resolve=t,u._reject=e})),this._completion.then((function(){u.active=!1,u.on.complete.fire()}),(function(t){var e=u.active;return u.active=!1,u.on.error.fire(t),u.parent?u.parent._reject(t):e&&u.idbtrans&&u.idbtrans.abort(),Jt(t)}))}))),this.Version=(s=this,me(pr.prototype,(function(t){this.db=s,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(c=this,me(ke.prototype,(function(t,e,r){if(this.db=c,this._ctx={table:t,index:":id"===e?null:e,or:r},this._cmp=this._ascending=ce,this._descending=function(t,e){return ce(e,t)},this._max=function(t,e){return 0<ce(t,e)?t:e},this._min=function(t,e){return ce(t,e)<0?t:e},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new V.MissingAPI}))),this.on("versionchange",(function(t){0<t.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})})),this.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(t.oldVersion/10))})),this._maxKey=$e(r.IDBKeyRange),this._createTransaction=function(t,e,r,i){return new n.Transaction(t,e,r,n._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(t){n.on("blocked").fire(t),ee.filter((function(t){return t.name===n.name&&t!==n&&!t._state.vcFired})).map((function(e){return e.on("versionchange").fire(t)}))},this.use(Rr),this.use(Gr),this.use(Wr),this.use(Pr),this.use(Kr);var l=new Proxy(this,{get:function(t,e,r){if("_vip"===e)return!0;if("table"===e)return function(t){return Xr(n.table(t),l)};var i=Reflect.get(t,e,r);return i instanceof he?Xr(i,l):"tables"===e?i.map((function(t){return Xr(t,l)})):"_createTransaction"===e?function(){return Xr(i.apply(this,arguments),l)}:i}});this.vip=l,i.forEach((function(t){return t(n)}))}j="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var rn,nn=(un.prototype.subscribe=function(t,e,r){return this._subscribe(t&&"function"!=typeof t?t:{next:t,error:e,complete:r})},un.prototype[j]=function(){return this},un);function un(t){this._subscribe=t}try{rn={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(F){rn={indexedDB:null,IDBKeyRange:null}}function on(t){var e,r=!1,n=new nn((function(n){var i,u=P(t),o=!1,a={},s={},c={get closed(){return o},unsubscribe:function(){o||(o=!0,i&&i.abort(),l&&He.storagemutated.unsubscribe(p))}};n.start&&n.start(c);var l=!1,h=function(){return Yt(d)},p=function(t){Fr(a,t),Cr(s,a)&&h()},d=function(){var c,d,m;!o&&rn.indexedDB&&(a={},c={},i&&i.abort(),i=new AbortController,m=function(e){var r=Nt();try{u&&Rt();var n=Ht(t,e);return n=u?n.finally(Ut):n}finally{r&&St()}}(d={subscr:c,signal:i.signal,requery:h,querier:t,trans:null}),Promise.resolve(m).then((function(t){r=!0,e=t,o||d.signal.aborted||(a={},function(t){for(var e in t)if(f(t,e))return;return 1}(s=c)||l||(He(qe,p),l=!0),Yt((function(){return!o&&n.next&&n.next(t)})))}),(function(t){r=!1,["DatabaseClosedError","AbortError"].includes(null==t?void 0:t.name)||o||Yt((function(){o||n.error&&n.error(t)}))})))};return setTimeout(h,0),c}));return n.hasValue=function(){return r},n.getValue=function(){return e},n}var an=tn;function sn(t){var e=fn;try{fn=!0,He.storagemutated.fire(t),Or(t,!0)}finally{fn=e}}l(an,e(e({},Z),{delete:function(t){return new an(t,{addons:[]}).delete()},exists:function(t){return new an(t,{addons:[]}).open().then((function(t){return t.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(t){try{return r=(e=an.dependencies).indexedDB,e=e.IDBKeyRange,(yr(r)?Promise.resolve(r.databases()).then((function(t){return t.map((function(t){return t.name})).filter((function(t){return t!==re}))})):mr(r,e).toCollection().primaryKeys()).then(t)}catch(t){return Jt(new V.MissingAPI)}var e,r},defineClass:function(){return function(t){a(this,t)}},ignoreTransaction:function(t){return gt.trans?Zt(gt.transless,t):t()},vip:vr,async:function(t){return function(){try{var e=kr(t.apply(this,arguments));return e&&"function"==typeof e.then?e:xt.resolve(e)}catch(e){return Jt(e)}}},spawn:function(t,e,r){try{var n=kr(t.apply(r,e||[]));return n&&"function"==typeof n.then?n:xt.resolve(n)}catch(t){return Jt(t)}},currentTransaction:{get:function(){return gt.trans||null}},waitFor:function(t,e){return e=xt.resolve("function"==typeof t?an.ignoreTransaction(t):t).timeout(e||6e4),gt.trans?gt.trans.waitFor(e):e},Promise:xt,debug:{get:function(){return it},set:function(t){ut(t)}},derive:d,extend:a,props:l,override:g,Events:de,on:He,liveQuery:on,extendObservabilitySet:Fr,getByKeyPath:b,setByKeyPath:x,delByKeyPath:function(t,e){"string"==typeof e?x(t,e,void 0):"length"in e&&[].map.call(e,(function(e){x(t,e,void 0)}))},shallowClone:_,deepClone:B,getObjectDiff:jr,cmp:ce,asap:w,minKey:-1/0,addons:[],connections:ee,errnames:L,dependencies:rn,cache:Mr,semVer:"4.0.7",version:"4.0.7".split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,r){return t+e/Math.pow(10,2*r)}))})),an.maxKey=$e(an.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(He(qe,(function(t){fn||(t=new CustomEvent(Ke,{detail:t}),fn=!0,dispatchEvent(t),fn=!1)})),addEventListener(Ke,(function(t){t=t.detail,fn||sn(t)})));var cn,fn=!1,ln=function(){};return"undefined"!=typeof BroadcastChannel&&((ln=function(){(cn=new BroadcastChannel(Ke)).onmessage=function(t){return t.data&&sn(t.data)}})(),"function"==typeof cn.unref&&cn.unref(),He(qe,(function(t){fn||cn.postMessage(t)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(t){if(!tn.disableBfCache&&t.persisted){it&&console.debug("Dexie: handling persisted pagehide"),null!=cn&&cn.close();for(var e=0,r=ee;e<r.length;e++)r[e].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(t){!tn.disableBfCache&&t.persisted&&(it&&console.debug("Dexie: handling persisted pageshow"),ln(),sn({all:new Dr(-1/0,[[]])}))}))),xt.rejectionMapper=function(t,e){return!t||t instanceof K||t instanceof TypeError||t instanceof SyntaxError||!t.name||!$[t.name]?t:(e=new $[t.name](e||t.message,t),"stack"in t&&p(e,"stack",{get:function(){return this.inner.stack}}),e)},ut(it),e(tn,Object.freeze({__proto__:null,Dexie:tn,liveQuery:on,Entity:se,cmp:ce,PropModSymbol:F,PropModification:_e,replacePrefix:function(t,e){return new _e({replacePrefix:[t,e]})},add:function(t){return new _e({add:t})},remove:function(t){return new _e({remove:t})},default:tn,RangeSet:Dr,mergeRanges:br,rangesOverlap:xr}),{default:tn}),tn}()},880:function(t){t.exports=function t(e,r){"use strict";var n,i,u=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,c=/^0/,f=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},l=f(e).replace(o,"")||"",h=f(r).replace(o,"")||"",p=l.replace(u,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=h.replace(u,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(l.match(s),16)||1!==p.length&&l.match(a)&&Date.parse(l),y=parseInt(h.match(s),16)||m&&h.match(a)&&Date.parse(h)||null;if(y){if(m<y)return-1;if(m>y)return 1}for(var v=0,g=Math.max(p.length,d.length);v<g;v++){if(n=!(p[v]||"").match(c)&&parseFloat(p[v])||p[v]||0,i=!(d[v]||"").match(c)&&parseFloat(d[v])||d[v]||0,isNaN(n)!==isNaN(i))return isNaN(n)?1:-1;if(typeof n!=typeof i&&(n+="",i+=""),n<i)return-1;if(n>i)return 1}return 0}},377:function(t){!function(e){"use strict";var r={s:1,n:0,d:1};function n(t,e){if(isNaN(t=parseInt(t,10)))throw f();return t*e}function i(t,e){if(0===e)throw c();var r=Object.create(s.prototype);r.s=t<0?-1:1;var n=a(t=t<0?-t:t,e);return r.n=t/n,r.d=e/n,r}function u(t){for(var e={},r=t,n=2,i=4;i<=r;){for(;r%n==0;)r/=n,e[n]=(e[n]||0)+1;i+=1+2*n++}return r!==t?r>1&&(e[r]=(e[r]||0)+1):e[t]=(e[t]||0)+1,e}var o=function(t,e){var i,u=0,o=1,a=1,s=0,h=0,p=0,d=1,m=1,y=0,v=1,g=1,D=1,w=1e7;if(null==t);else if(void 0!==e){if(a=(u=t)*(o=e),u%1!=0||o%1!=0)throw l()}else switch(typeof t){case"object":if("d"in t&&"n"in t)u=t.n,o=t.d,"s"in t&&(u*=t.s);else{if(!(0 in t))throw f();u=t[0],1 in t&&(o=t[1])}a=u*o;break;case"number":if(t<0&&(a=t,t=-t),t%1==0)u=t;else if(t>0){for(t>=1&&(t/=m=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));v<=w&&D<=w;){if(t===(i=(y+g)/(v+D))){v+D<=w?(u=y+g,o=v+D):D>v?(u=g,o=D):(u=y,o=v);break}t>i?(y+=g,v+=D):(g+=y,D+=v),v>w?(u=g,o=D):(u=y,o=v)}u*=m}else(isNaN(t)||isNaN(e))&&(o=u=NaN);break;case"string":if(null===(v=t.match(/\d+|./g)))throw f();if("-"===v[y]?(a=-1,y++):"+"===v[y]&&y++,v.length===y+1?h=n(v[y++],a):"."===v[y+1]||"."===v[y]?("."!==v[y]&&(s=n(v[y++],a)),(++y+1===v.length||"("===v[y+1]&&")"===v[y+3]||"'"===v[y+1]&&"'"===v[y+3])&&(h=n(v[y],a),d=Math.pow(10,v[y].length),y++),("("===v[y]&&")"===v[y+2]||"'"===v[y]&&"'"===v[y+2])&&(p=n(v[y+1],a),m=Math.pow(10,v[y+1].length)-1,y+=3)):"/"===v[y+1]||":"===v[y+1]?(h=n(v[y],a),d=n(v[y+2],1),y+=3):"/"===v[y+3]&&" "===v[y+1]&&(s=n(v[y],a),h=n(v[y+2],a),d=n(v[y+4],1),y+=5),v.length<=y){a=u=p+(o=d*m)*s+m*h;break}default:throw f()}if(0===o)throw c();r.s=a<0?-1:1,r.n=Math.abs(u),r.d=Math.abs(o)};function a(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function s(t,e){if(o(t,e),!(this instanceof s))return i(r.s*r.n,r.d);t=a(r.d,r.n),this.s=r.s,this.n=r.n/t,this.d=r.d/t}var c=function(){return new Error("Division by Zero")},f=function(){return new Error("Invalid argument")},l=function(){return new Error("Parameters must be integer")};s.prototype={s:1,n:0,d:1,abs:function(){return i(this.n,this.d)},neg:function(){return i(-this.s*this.n,this.d)},add:function(t,e){return o(t,e),i(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(t,e){return o(t,e),i(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(t,e){return o(t,e),i(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(t,e){return o(t,e),i(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return i(this.s*this.n,this.d)},mod:function(t,e){if(isNaN(this.n)||isNaN(this.d))return new s(NaN);if(void 0===t)return i(this.s*this.n%this.d,1);if(o(t,e),0===r.n&&0===this.d)throw c();return i(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d)},gcd:function(t,e){return o(t,e),i(a(r.n,this.n)*a(r.d,this.d),r.d*this.d)},lcm:function(t,e){return o(t,e),0===r.n&&0===this.n?i(0,1):i(r.n*this.n,a(r.n,this.n)*a(r.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new s(NaN):i(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return i(this.s*this.d,this.n)},pow:function(t,e){if(o(t,e),1===r.d)return r.s<0?i(Math.pow(this.s*this.d,r.n),Math.pow(this.n,r.n)):i(Math.pow(this.s*this.n,r.n),Math.pow(this.d,r.n));if(this.s<0)return null;var n=u(this.n),a=u(this.d),s=1,c=1;for(var f in n)if("1"!==f){if("0"===f){s=0;break}if(n[f]*=r.n,n[f]%r.d!=0)return null;n[f]/=r.d,s*=Math.pow(f,n[f])}for(var f in a)if("1"!==f){if(a[f]*=r.n,a[f]%r.d!=0)return null;a[f]/=r.d,c*=Math.pow(f,a[f])}return r.s<0?i(c,s):i(s,c)},equals:function(t,e){return o(t,e),this.s*this.n*r.d==r.s*r.n*this.d},compare:function(t,e){o(t,e);var n=this.s*this.n*r.d-r.s*r.n*this.d;return(0<n)-(n<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var e=this.abs(),r=e.toContinued(),n=1;n<r.length;n++){for(var u=i(r[n-1],1),o=n-2;o>=0;o--)u=u.inverse().add(r[o]);if(Math.abs(u.sub(e).valueOf())<t)return u.mul(this.s)}return this},divisible:function(t,e){return o(t,e),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(t&&(e=Math.floor(n/i))>0&&(r+=e,r+=" ",n%=i),r+=n,r+="/",r+=i),r},toLatex:function(t){var e,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(t&&(e=Math.floor(n/i))>0&&(r+=e,n%=i),r+="\\frac{",r+=n,r+="}{",r+=i,r+="}"),r},toContinued:function(){var t,e=this.n,r=this.d,n=[];if(isNaN(e)||isNaN(r))return n;do{n.push(Math.floor(e/r)),t=e%r,e=r,r=t}while(1!==e);return n},toString:function(t){var e=this.n,r=this.d;if(isNaN(e)||isNaN(r))return"NaN";t=t||15;var n=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var r=10%e,n=1;1!==r;n++)if(r=10*r%e,n>2e3)return 0;return n}(0,r),i=function(t,e,r){for(var n=1,i=function(t,e,r){for(var n=1;e>0;t=t*t%r,e>>=1)1&e&&(n=n*t%r);return n}(10,r,e),u=0;u<300;u++){if(n===i)return u;n=10*n%e,i=10*i%e}return 0}(0,r,n),u=this.s<0?"-":"";if(u+=e/r|0,e%=r,(e*=10)&&(u+="."),n){for(var o=i;o--;)u+=e/r|0,e%=r,e*=10;u+="(";for(o=n;o--;)u+=e/r|0,e%=r,e*=10;u+=")"}else for(o=t;e&&o--;)u+=e/r|0,e%=r,e*=10;return u}},Object.defineProperty(s,"__esModule",{value:!0}),s.default=s,s.Fraction=s,t.exports=s}()},391:function(t,e,r){var n=r(180),i=r(181),u=r(31),o=r(67),a=r(833),s=r(717),c=r(801);c.alea=n,c.xor128=i,c.xorwow=u,c.xorshift7=o,c.xor4096=a,c.tychei=s,t.exports=c},180:function(t,e,r){var n;!function(t,i,u){function o(t){var e=this,r=function(){var t=4022871197,e=function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)};return e}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=r(" "),e.s1=r(" "),e.s2=r(" "),e.s0-=r(t),e.s0<0&&(e.s0+=1),e.s1-=r(t),e.s1<0&&(e.s1+=1),e.s2-=r(t),e.s2<0&&(e.s2+=1),r=null}function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function s(t,e){var r=new o(t),n=e&&e.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=s:r.amdD&&r.amdO?void 0===(n=function(){return s}.call(e,r,e,i))||(i.exports=n):this.alea=s}(0,t=r.nmd(t),r.amdD)},717:function(t,e,r){var n;!function(t,i,u){function o(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,n=e.d,i=e.a;return t=t<<25^t>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-n|0,e.d=n<<16^r>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var n=0;n<r.length+20;n++)e.b^=0|r.charCodeAt(n),e.next()}function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function s(t,e){var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=s:r.amdD&&r.amdO?void 0===(n=function(){return s}.call(e,r,e,i))||(i.exports=n):this.tychei=s}(0,t=r.nmd(t),r.amdD)},181:function(t,e,r){var n;!function(t,i,u){function o(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function s(t,e){var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=s:r.amdD&&r.amdO?void 0===(n=function(){return s}.call(e,r,e,i))||(i.exports=n):this.xor128=s}(0,t=r.nmd(t),r.amdD)},833:function(t,e,r){var n;!function(t,i,u){function o(t){var e=this;e.next=function(){var t,r,n=e.w,i=e.X,u=e.i;return e.w=n=n+1640531527|0,r=i[u+34&127],t=i[u=u+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=i[u]=r^t,e.i=u,r+(n^n>>>16)|0},function(t,e){var r,n,i,u,o,a=[],s=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,s=Math.max(s,e.length)),i=0,u=-32;u<s;++u)e&&(n^=e.charCodeAt((u+32)%e.length)),0===u&&(o=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,u>=0&&(o=o+1640531527|0,i=0==(r=a[127&u]^=n+o)?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,u=512;u>0;--u)n=a[i+34&127],r=a[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,a[i]=n^r;t.w=o,t.X=a,t.i=i}(e,t)}function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function s(t,e){null==t&&(t=+new Date);var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&(n.X&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=s:r.amdD&&r.amdO?void 0===(n=function(){return s}.call(e,r,e,i))||(i.exports=n):this.xor4096=s}(0,t=r.nmd(t),r.amdD)},67:function(t,e,r){var n;!function(t,i,u){function o(t){var e=this;e.next=function(){var t,r,n=e.x,i=e.i;return t=n[i],r=(t^=t>>>7)^t<<24,r^=(t=n[i+1&7])^t>>>10,r^=(t=n[i+3&7])^t>>>3,r^=(t=n[i+4&7])^t<<7,t=n[i+7&7],r^=(t^=t<<13)^t<<9,n[i]=r,e.i=i+1&7,r},function(t,e){var r,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,r=0;r<e.length;++r)n[7&r]=n[7&r]<<15^e.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],t.x=n,t.i=0,r=256;r>0;--r)t.next()}(e,t)}function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function s(t,e){null==t&&(t=+new Date);var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&(n.x&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=s:r.amdD&&r.amdO?void 0===(n=function(){return s}.call(e,r,e,i))||(i.exports=n):this.xorshift7=s}(0,t=r.nmd(t),r.amdD)},31:function(t,e,r){var n;!function(t,i,u){function o(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),n==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function s(t,e){var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=s:r.amdD&&r.amdO?void 0===(n=function(){return s}.call(e,r,e,i))||(i.exports=n):this.xorwow=s}(0,t=r.nmd(t),r.amdD)},801:function(t,e,r){var n;!function(i,u,o){var a,s=256,c=o.pow(s,6),f=o.pow(2,52),l=2*f,h=s-1;function p(t,e,r){var n=[],h=v(y((e=1==e?{entropy:!0}:e||{}).entropy?[t,g(u)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(s):(t=new Uint8Array(s),(i.crypto||i.msCrypto).getRandomValues(t)),g(t)}catch(n){var e=i.navigator,r=e&&e.plugins;return[+new Date,i,r,i.screen,g(u)]}}():t,3),n),p=new d(n),D=function(){for(var t=p.g(6),e=c,r=0;t<f;)t=(t+r)*s,e*=s,r=p.g(1);for(;t>=l;)t/=2,e/=2,r>>>=1;return(t+r)/e};return D.int32=function(){return 0|p.g(4)},D.quick=function(){return p.g(4)/4294967296},D.double=D,v(g(p.S),u),(e.pass||r||function(t,e,r,n){return n&&(n.S&&m(n,p),t.state=function(){return m(p,{})}),r?(o.random=t,e):t})(D,h,"global"in e?e.global:this==o,e.state)}function d(t){var e,r=t.length,n=this,i=0,u=n.i=n.j=0,o=n.S=[];for(r||(t=[r++]);i<s;)o[i]=i++;for(i=0;i<s;i++)o[i]=o[u=h&u+t[i%r]+(e=o[i])],o[u]=e;(n.g=function(t){for(var e,r=0,i=n.i,u=n.j,o=n.S;t--;)e=o[i=h&i+1],r=r*s+o[h&(o[i]=o[u=h&u+e])+(o[u]=e)];return n.i=i,n.j=u,r})(s)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){var r,n=[],i=typeof t;if(e&&"object"==i)for(r in t)try{n.push(y(t[r],e-1))}catch(u){}return n.length?n:"string"==i?t:t+"\0"}function v(t,e){for(var r,n=t+"",i=0;i<n.length;)e[h&i]=h&(r^=19*e[h&i])+n.charCodeAt(i++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(v(o.random(),u),t.exports){t.exports=p;try{a=r(234)}catch(D){}}else void 0===(n=function(){return p}.call(e,r,e,t))||(t.exports=n)}("undefined"!=typeof self?self:this,[],Math)},234:function(){},693:function(t,e,r){var n=r(736);t.exports=function(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports},634:function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},45:function(t,e,r){var n=r(738).default;t.exports=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},736:function(t,e,r){var n=r(738).default,i=r(45);t.exports=function(t){var e=i(t,"string");return"symbol"==n(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},738:function(t){function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},369:function(t){t.exports=function(){"use strict";function t(){return!0}function e(){return!1}function r(){}const n="Argument is not a typed-function.";function i(){function u(t){return"object"==typeof t&&null!==t&&t.constructor===Object}const o=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:u},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],a={name:"any",test:t,isAny:!0};let s,c,f=0,l={createCount:0};function h(t){const e=s.get(t);if(e)return e;let r='Unknown type "'+t+'"';const n=t.toLowerCase();let i;for(i of c)if(i.toLowerCase()===n){r+='. Did you mean "'+i+'" ?';break}throw new TypeError(r)}function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";const r=e?h(e).index:c.length,n=[];for(let u=0;u<t.length;++u){if(!t[u]||"string"!=typeof t[u].name||"function"!=typeof t[u].test)throw new TypeError("Object with properties {name: string, test: function} expected");const e=t[u].name;if(s.has(e))throw new TypeError('Duplicate type name "'+e+'"');n.push(e),s.set(e,{name:e,test:t[u].test,isAny:t[u].isAny,index:r+u,conversionsTo:[]})}const i=c.slice(r);c=c.slice(0,r).concat(n).concat(i);for(let u=r+n.length;u<c.length;++u)s.get(c[u]).index=u}function d(){s=new Map,c=[],f=0,p([a],!1)}function m(){let t;for(t of c)s.get(t).conversionsTo=[];f=0}function y(t){const e=c.filter((e=>{const r=s.get(e);return!r.isAny&&r.test(t)}));return e.length?e:["any"]}function v(t){return t&&"function"==typeof t&&"_typedFunctionData"in t}function g(t,e,r){if(!v(t))throw new TypeError(n);const i=r&&r.exact,u=E(Array.isArray(e)?e.join(","):e),o=b(u);if(!i||o in t.signatures){const e=t._typedFunctionData.signatureMap.get(o);if(e)return e}const a=u.length;let s,c;if(i){let e;for(e in s=[],t.signatures)s.push(t._typedFunctionData.signatureMap.get(e))}else s=t._typedFunctionData.signatures;for(let n=0;n<a;++n){const t=u[n],e=[];let r;for(r of s){const i=B(r.params,n);if(i&&(!t.restParam||i.restParam)){if(!i.hasAny){const e=A(i);if(t.types.some((t=>!e.has(t.name))))continue}e.push(r)}}if(s=e,0===s.length)break}for(c of s)if(c.params.length<=a)return c;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+b(u,", ")+"))")}function D(t,e,r){return g(t,e,r).implementation}function w(t,e){const r=h(e);if(r.test(t))return t;const n=r.conversionsTo;if(0===n.length)throw new Error("There are no conversions to "+e+" defined.");for(let i=0;i<n.length;i++)if(h(n[i].from).test(t))return n[i].convert(t);throw new Error("Cannot convert "+t+" to "+e)}function b(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return t.map((t=>t.name)).join(e)}function x(t){const e=0===t.indexOf("..."),r=(e?t.length>3?t.slice(3):"any":t).split("|").map((t=>h(t.trim())));let n=!1,i=e?"...":"";return{types:r.map((function(t){return n=t.isAny||n,i+=t.name+"|",{name:t.name,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:null,conversionIndex:-1}})),name:i.slice(0,-1),hasAny:n,hasConversion:!1,restParam:e}}function _(t){const e=j(t.types.map((t=>t.name)));let r=t.hasAny,n=t.name;const i=e.map((function(t){const e=h(t.from);return r=e.isAny||r,n+="|"+t.from,{name:t.from,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:t,conversionIndex:t.index}}));return{types:t.types.concat(i),name:n,hasAny:r,hasConversion:i.length>0,restParam:t.restParam}}function A(t){return t.typeSet||(t.typeSet=new Set,t.types.forEach((e=>t.typeSet.add(e.name)))),t.typeSet}function E(t){const e=[];if("string"!=typeof t)throw new TypeError("Signatures must be strings");const r=t.trim();if(""===r)return e;const n=r.split(",");for(let i=0;i<n.length;++i){const t=x(n[i].trim());if(t.restParam&&i!==n.length-1)throw new SyntaxError('Unexpected rest parameter "'+n[i]+'": only allowed for the last parameter');if(0===t.types.length)return null;e.push(t)}return e}function F(t){const e=Y(t);return!!e&&e.restParam}function C(e){if(e&&0!==e.types.length){if(1===e.types.length)return h(e.types[0].name).test;if(2===e.types.length){const t=h(e.types[0].name).test,r=h(e.types[1].name).test;return function(e){return t(e)||r(e)}}{const t=e.types.map((function(t){return h(t.name).test}));return function(e){for(let r=0;r<t.length;r++)if(t[r](e))return!0;return!1}}}return t}function M(t){let e,r,n;if(F(t)){e=Q(t).map(C);const r=e.length,n=C(Y(t)),i=function(t){for(let e=r;e<t.length;e++)if(!n(t[e]))return!1;return!0};return function(t){for(let r=0;r<e.length;r++)if(!e[r](t[r]))return!1;return i(t)&&t.length>=r+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(r=C(t[0]),function(t){return r(t[0])&&1===t.length}):2===t.length?(r=C(t[0]),n=C(t[1]),function(t){return r(t[0])&&n(t[1])&&2===t.length}):(e=t.map(C),function(t){for(let r=0;r<e.length;r++)if(!e[r](t[r]))return!1;return t.length===e.length})}function B(t,e){return e<t.length?t[e]:F(t)?Y(t):null}function N(t,e){const r=B(t,e);return r?A(r):new Set}function S(t){return null===t.conversion||void 0===t.conversion}function O(t,e){const r=new Set;return t.forEach((t=>{const n=N(t.params,e);let i;for(i of n)r.add(i)})),r.has("any")?["any"]:Array.from(r)}function I(t,e,r){let n,i;const u=t||"unnamed";let o,a=r;for(o=0;o<e.length;o++){const t=[];if(a.forEach((r=>{const n=C(B(r.params,o));(o<r.params.length||F(r.params))&&n(e[o])&&t.push(r)})),0===t.length){if(i=O(a,o),i.length>0){const t=y(e[o]);return n=new TypeError("Unexpected type of argument in function "+u+" (expected: "+i.join(" or ")+", actual: "+t.join(" | ")+", index: "+o+")"),n.data={category:"wrongType",fn:u,index:o,actual:t,expected:i},n}}else a=t}const s=a.map((function(t){return F(t.params)?1/0:t.params.length}));if(e.length<Math.min.apply(null,s))return i=O(a,o),n=new TypeError("Too few arguments in function "+u+" (expected: "+i.join(" or ")+", index: "+e.length+")"),n.data={category:"tooFewArgs",fn:u,index:e.length,expected:i},n;const c=Math.max.apply(null,s);if(e.length>c)return n=new TypeError("Too many arguments in function "+u+" (expected: "+c+", actual: "+e.length+")"),n.data={category:"tooManyArgs",fn:u,index:e.length,expectedLength:c},n;const f=[];for(let l=0;l<e.length;++l)f.push(y(e[l]).join("|"));return n=new TypeError('Arguments of type "'+f.join(", ")+'" do not match any of the defined signatures of function '+u+"."),n.data={category:"mismatch",actual:f},n}function T(t){let e=c.length+1;for(let r=0;r<t.types.length;r++)S(t.types[r])&&(e=Math.min(e,t.types[r].typeIndex));return e}function k(t){let e=f+1;for(let r=0;r<t.types.length;r++)S(t.types[r])||(e=Math.min(e,t.types[r].conversionIndex));return e}function z(t,e){if(t.hasAny){if(!e.hasAny)return 1}else if(e.hasAny)return-1;if(t.restParam){if(!e.restParam)return 1}else if(e.restParam)return-1;if(t.hasConversion){if(!e.hasConversion)return 1}else if(e.hasConversion)return-1;const r=T(t)-T(e);if(r<0)return-1;if(r>0)return 1;const n=k(t)-k(e);return n<0?-1:n>0?1:0}function P(t,e){const r=t.params,n=e.params,i=Y(r),u=Y(n),o=F(r),a=F(n);if(o&&i.hasAny){if(!a||!u.hasAny)return 1}else if(a&&u.hasAny)return-1;let s,c=0,f=0;for(s of r)s.hasAny&&++c,s.hasConversion&&++f;let l=0,h=0;for(s of n)s.hasAny&&++l,s.hasConversion&&++h;if(c!==l)return c-l;if(o&&i.hasConversion){if(!a||!u.hasConversion)return 1}else if(a&&u.hasConversion)return-1;if(f!==h)return f-h;if(o){if(!a)return 1}else if(a)return-1;const p=(r.length-n.length)*(o?-1:1);if(0!==p)return p;const d=[];let m,y=0;for(let v=0;v<r.length;++v){const t=z(r[v],n[v]);d.push(t),y+=t}if(0!==y)return y;for(m of d)if(0!==m)return m;return 0}function j(t){if(0===t.length)return[];const e=t.map(h);t.length>1&&e.sort(((t,e)=>t.index-e.index));let r=e[0].conversionsTo;if(1===t.length)return r;r=r.concat([]);const n=new Set(t);for(let i=1;i<e.length;++i){let t;for(t of e[i].conversionsTo)n.has(t.from)||(r.push(t),n.add(t.from))}return r}function q(t,e){let r=e;if(t.some((t=>t.hasConversion))){const n=F(t),i=t.map(K);r=function(){const t=[],r=n?arguments.length-1:arguments.length;for(let e=0;e<r;e++)t[e]=i[e](arguments[e]);return n&&(t[r]=arguments[r].map(i[r])),e.apply(this,t)}}let n=r;if(F(t)){const e=t.length-1;n=function(){return r.apply(this,J(arguments,0,e).concat([J(arguments,e)]))}}return n}function K(t){let e,r,n,i;const u=[],o=[];switch(t.types.forEach((function(t){t.conversion&&(u.push(h(t.conversion.from).test),o.push(t.conversion.convert))})),o.length){case 0:return function(t){return t};case 1:return e=u[0],n=o[0],function(t){return e(t)?n(t):t};case 2:return e=u[0],r=u[1],n=o[0],i=o[1],function(t){return e(t)?n(t):r(t)?i(t):t};default:return function(t){for(let e=0;e<o.length;e++)if(u[e](t))return o[e](t);return t}}}function H(t){function e(t,r,n){if(r<t.length){const i=t[r];let u=[];if(i.restParam){const t=i.types.filter(S);t.length<i.types.length&&u.push({types:t,name:"..."+t.map((t=>t.name)).join("|"),hasAny:t.some((t=>t.isAny)),hasConversion:!1,restParam:!0}),u.push(i)}else u=i.types.map((function(t){return{types:[t],name:t.name,hasAny:t.isAny,hasConversion:t.conversion,restParam:!1}}));return X(u,(function(i){return e(t,r+1,n.concat([i]))}))}return[n]}return e(t,0,[])}function R(t,e){const r=Math.max(t.length,e.length);for(let a=0;a<r;a++){const r=N(t,a),n=N(e,a);let i,u=!1;for(i of n)if(r.has(i)){u=!0;break}if(!u)return!1}const n=t.length,i=e.length,u=F(t),o=F(e);return u?o?n===i:i>=n:o?n>=i:n===i}function U(t){return t.map((t=>it(t)?rt(t.referToSelf.callback):nt(t)?et(t.referTo.references,t.referTo.callback):t))}function L(t,e,r){const n=[];let i;for(i of t){let t=r[i];if("number"!=typeof t)throw new TypeError('No definition for referenced signature "'+i+'"');if(t=e[t],"function"!=typeof t)return!1;n.push(t)}return n}function W(t,e,r){const n=U(t),i=new Array(n.length).fill(!1);let u=!0;for(;u;){u=!1;let t=!0;for(let o=0;o<n.length;++o){if(i[o])continue;const a=n[o];if(it(a))n[o]=a.referToSelf.callback(r),n[o].referToSelf=a.referToSelf,i[o]=!0,t=!1;else if(nt(a)){const r=L(a.referTo.references,n,e);r?(n[o]=a.referTo.callback.apply(this,r),n[o].referTo=a.referTo,i[o]=!0,t=!1):u=!0}}if(t&&u)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return n}function V(t){const e=/\bthis(\(|\.signatures\b)/;Object.keys(t).forEach((r=>{const n=t[r];if(e.test(n.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")}))}function $(t,n){if(l.createCount++,0===Object.keys(n).length)throw new SyntaxError("No signatures provided");l.warnAgainstDeprecatedThis&&V(n);const i=[],u=[],o={},a=[];let s;for(s in n){if(!Object.prototype.hasOwnProperty.call(n,s))continue;const t=E(s);if(!t)continue;i.forEach((function(e){if(R(e,t))throw new TypeError('Conflicting signatures "'+b(e)+'" and "'+b(t)+'".')})),i.push(t);const e=u.length;u.push(n[s]);const r=t.map(_);let c;for(c of H(r)){const t=b(c);a.push({params:c,name:t,fn:e}),c.every((t=>!t.hasConversion))&&(o[t]=e)}}a.sort(P);const c=W(u,o,st);let f;for(f in o)Object.prototype.hasOwnProperty.call(o,f)&&(o[f]=c[o[f]]);const h=[],p=new Map;for(f of a)p.has(f.name)||(f.fn=c[f.fn],h.push(f),p.set(f.name,f));const d=h[0]&&h[0].params.length<=2&&!F(h[0].params),m=h[1]&&h[1].params.length<=2&&!F(h[1].params),y=h[2]&&h[2].params.length<=2&&!F(h[2].params),v=h[3]&&h[3].params.length<=2&&!F(h[3].params),g=h[4]&&h[4].params.length<=2&&!F(h[4].params),D=h[5]&&h[5].params.length<=2&&!F(h[5].params),w=d&&m&&y&&v&&g&&D;for(let e=0;e<h.length;++e)h[e].test=M(h[e].params);const x=d?C(h[0].params[0]):e,A=m?C(h[1].params[0]):e,B=y?C(h[2].params[0]):e,N=v?C(h[3].params[0]):e,S=g?C(h[4].params[0]):e,O=D?C(h[5].params[0]):e,I=d?C(h[0].params[1]):e,T=m?C(h[1].params[1]):e,k=y?C(h[2].params[1]):e,z=v?C(h[3].params[1]):e,j=g?C(h[4].params[1]):e,K=D?C(h[5].params[1]):e;for(let e=0;e<h.length;++e)h[e].implementation=q(h[e].params,h[e].fn);const U=d?h[0].implementation:r,L=m?h[1].implementation:r,$=y?h[2].implementation:r,Z=v?h[3].implementation:r,Q=g?h[4].implementation:r,Y=D?h[5].implementation:r,J=d?h[0].params.length:-1,G=m?h[1].params.length:-1,X=y?h[2].params.length:-1,tt=v?h[3].params.length:-1,et=g?h[4].params.length:-1,rt=D?h[5].params.length:-1,nt=w?6:0,it=h.length,ut=h.map((t=>t.test)),ot=h.map((t=>t.implementation)),at=function(){for(let t=nt;t<it;t++)if(ut[t](arguments))return ot[t].apply(this,arguments);return l.onMismatch(t,arguments,h)};function st(t,e){return arguments.length===J&&x(t)&&I(e)?U.apply(this,arguments):arguments.length===G&&A(t)&&T(e)?L.apply(this,arguments):arguments.length===X&&B(t)&&k(e)?$.apply(this,arguments):arguments.length===tt&&N(t)&&z(e)?Z.apply(this,arguments):arguments.length===et&&S(t)&&j(e)?Q.apply(this,arguments):arguments.length===rt&&O(t)&&K(e)?Y.apply(this,arguments):at.apply(this,arguments)}try{Object.defineProperty(st,"name",{value:t})}catch(ct){}return st.signatures=o,st._typedFunctionData={signatures:h,signatureMap:p},st}function Z(t,e,r){throw I(t,e,r)}function Q(t){return J(t,0,t.length-1)}function Y(t){return t[t.length-1]}function J(t,e,r){return Array.prototype.slice.call(t,e,r)}function G(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return t[r]}function X(t,e){return Array.prototype.concat.apply([],t.map(e))}function tt(){const t=Q(arguments).map((t=>b(E(t)))),e=Y(arguments);if("function"!=typeof e)throw new TypeError("Callback function expected as last argument");return et(t,e)}function et(t,e){return{referTo:{references:t,callback:e}}}function rt(t){if("function"!=typeof t)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:t}}}function nt(t){return t&&"object"==typeof t.referTo&&Array.isArray(t.referTo.references)&&"function"==typeof t.referTo.callback}function it(t){return t&&"object"==typeof t.referToSelf&&"function"==typeof t.referToSelf.callback}function ut(t,e){if(!t)return e;if(e&&e!==t){const r=new Error("Function names do not match (expected: "+t+", actual: "+e+")");throw r.data={actual:e,expected:t},r}return t}function ot(t){let e;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(v(t[r])||"string"==typeof t[r].signature)&&(e=ut(e,t[r].name));return e}function at(t,e){let r;for(r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(r in t&&e[r]!==t[r]){const n=new Error('Signature "'+r+'" is defined twice');throw n.data={signature:r,sourceFunction:e[r],destFunction:t[r]},n}t[r]=e[r]}}d(),p(o);const st=l;function ct(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(t.to===t.from)throw new SyntaxError('Illegal to define conversion from "'+t.from+'" to itself.')}return l=function(t){const e="string"==typeof t;let r=e?t:"";const n={};for(let i=e?1:0;i<arguments.length;++i){const t=arguments[i];let o,a={};if("function"==typeof t?(o=t.name,"string"==typeof t.signature?a[t.signature]=t:v(t)&&(a=t.signatures)):u(t)&&(a=t,e||(o=ot(t))),0===Object.keys(a).length){const e=new TypeError("Argument to 'typed' at index "+i+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw e.data={index:i,argument:t},e}e||(r=ut(r,o)),at(n,a)}return $(r||"",n)},l.create=i,l.createCount=st.createCount,l.onMismatch=Z,l.throwMismatchError=Z,l.createError=I,l.clear=d,l.clearConversions=m,l.addTypes=p,l._findType=h,l.referTo=tt,l.referToSelf=rt,l.convert=w,l.findSignature=g,l.find=D,l.isTypedFunction=v,l.warnAgainstDeprecatedThis=!0,l.addType=function(t,e){let r="any";!1!==e&&s.has("Object")&&(r="Object"),l.addTypes([t],r)},l.addConversion=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{override:!1};ct(t);const r=h(t.to),n=r.conversionsTo.find((e=>e.from===t.from));if(n){if(!e||!e.override)throw new Error('There is already a conversion from "'+t.from+'" to "'+r.name+'"');l.removeConversion({from:n.from,to:t.to,convert:n.convert})}r.conversionsTo.push({from:t.from,convert:t.convert,index:f++})},l.addConversions=function(t,e){t.forEach((t=>l.addConversion(t,e)))},l.removeConversion=function(t){ct(t);const e=h(t.to),r=G(e.conversionsTo,(e=>e.from===t.from));if(!r)throw new Error("Attempt to remove nonexistent conversion from "+t.from+" to "+t.to);if(r.convert!==t.convert)throw new Error("Conversion to remove does not match existing conversion");const n=e.conversionsTo.indexOf(r);e.conversionsTo.splice(n,1)},l.resolve=function(t,e){if(!v(t))throw new TypeError(n);const r=t._typedFunctionData.signatures;for(let n=0;n<r.length;++n)if(r[n].test(e))return r[n];return null},l}return i()}()}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var u=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(u.exports,u,u.exports,r),u.loaded=!0,u.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){"use strict";function t(t,e,r){try{if("function"==typeof r){var n=[];return String.prototype.replace.call(t,e,(function(){return n.push(r.apply(void 0,arguments)),""})),Promise.all(n).then((function(r){return String.prototype.replace.call(t,e,(function(){return r.shift()}))}))}return Promise.resolve(String.prototype.replace.call(t,e,r))}catch(i){return Promise.reject(i)}}function e(t,r){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},e(t,r)}var n=r(744);const i=Symbol.for("Dexie"),u=globalThis[i]||(globalThis[i]=n);if(n.semVer!==u.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${n.semVer} and ${u.semVer}`);const{liveQuery:o,mergeRanges:a,rangesOverlap:s,RangeSet:c,cmp:f,Entity:l,PropModSymbol:h,PropModification:p,replacePrefix:d,add:m,remove:y}=u;var v=u,g=r(634),D={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},w=["Matrix","Array"],b=["number","BigNumber","Fraction"];var x=function(t){if(t)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(D)};g(x,D,{MATRIX_OPTIONS:w,NUMBER_OPTIONS:b});var _,A,E=9e15,F=1e9,C="0123456789abcdef",M="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",B="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",N={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-E,maxE:E,crypto:!1},S=!0,O="[DecimalError] ",I=O+"Invalid argument: ",T=O+"Precision limit exceeded",k=O+"crypto unavailable",z="[object Decimal]",P=Math.floor,j=Math.pow,q=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,K=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,H=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,R=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,U=1e7,L=7,W=M.length-1,V=B.length-1,$={toStringTag:z};function Z(t){var e,r,n,i=t.length-1,u="",o=t[0];if(i>0){for(u+=o,e=1;e<i;e++)n=t[e]+"",(r=L-n.length)&&(u+=ut(r)),u+=n;o=t[e],(r=L-(n=o+"").length)&&(u+=ut(r))}else if(0===o)return"0";for(;o%10==0;)o/=10;return u+o}function Q(t,e,r){if(t!==~~t||t<e||t>r)throw Error(I+t)}function Y(t,e,r,n){var i,u,o,a;for(u=t[0];u>=10;u/=10)--e;return--e<0?(e+=L,i=0):(i=Math.ceil((e+1)/L),e%=L),u=j(10,L-e),a=t[i]%u|0,null==n?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),o=r<4&&99999==a||r>3&&49999==a||5e4==a||0==a):o=(r<4&&a+1==u||r>3&&a+1==u/2)&&(t[i+1]/u/100|0)==j(10,e-2)-1||(a==u/2||0==a)&&!(t[i+1]/u/100|0):e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),o=(n||r<4)&&9999==a||!n&&r>3&&4999==a):o=((n||r<4)&&a+1==u||!n&&r>3&&a+1==u/2)&&(t[i+1]/u/1e3|0)==j(10,e-3)-1,o}function J(t,e,r){for(var n,i,u=[0],o=0,a=t.length;o<a;){for(i=u.length;i--;)u[i]*=e;for(u[0]+=C.indexOf(t.charAt(o++)),n=0;n<u.length;n++)u[n]>r-1&&(void 0===u[n+1]&&(u[n+1]=0),u[n+1]+=u[n]/r|0,u[n]%=r)}return u.reverse()}$.absoluteValue=$.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),X(t)},$.ceil=function(){return X(new this.constructor(this),this.e+1,2)},$.clampedTo=$.clamp=function(t,e){var r=this,n=r.constructor;if(t=new n(t),e=new n(e),!t.s||!e.s)return new n(NaN);if(t.gt(e))throw Error(I+e);return r.cmp(t)<0?t:r.cmp(e)>0?e:new n(r)},$.comparedTo=$.cmp=function(t){var e,r,n,i,u=this,o=u.d,a=(t=new u.constructor(t)).d,s=u.s,c=t.s;if(!o||!a)return s&&c?s!==c?s:o===a?0:!o^s<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?s:a[0]?-c:0;if(s!==c)return s;if(u.e!==t.e)return u.e>t.e^s<0?1:-1;for(e=0,r=(n=o.length)<(i=a.length)?n:i;e<r;++e)if(o[e]!==a[e])return o[e]>a[e]^s<0?1:-1;return n===i?0:n>i^s<0?1:-1},$.cosine=$.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+L,n.rounding=1,r=function(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?i=(1/mt(4,r=Math.ceil(n/3))).toString():(r=16,i="2.3283064365386962890625e-10");t.precision+=r,e=dt(t,1,e.times(i),new t(1));for(var u=r;u--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}(n,yt(n,r)),n.precision=t,n.rounding=e,X(2==A||3==A?r.neg():r,t,e,!0)):new n(1):new n(NaN)},$.cubeRoot=$.cbrt=function(){var t,e,r,n,i,u,o,a,s,c,f=this,l=f.constructor;if(!f.isFinite()||f.isZero())return new l(f);for(S=!1,(u=f.s*j(f.s*f,1/3))&&Math.abs(u)!=1/0?n=new l(u.toString()):(r=Z(f.d),(u=((t=f.e)-r.length+1)%3)&&(r+=1==u||-2==u?"0":"00"),u=j(r,1/3),t=P((t+1)/3)-(t%3==(t<0?-1:2)),(n=new l(r=u==1/0?"5e"+t:(r=u.toExponential()).slice(0,r.indexOf("e")+1)+t)).s=f.s),o=(t=l.precision)+3;;)if(c=(s=(a=n).times(a).times(a)).plus(f),n=G(c.plus(f).times(a),c.plus(s),o+2,1),Z(a.d).slice(0,o)===(r=Z(n.d)).slice(0,o)){if("9999"!=(r=r.slice(o-3,o+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(X(n,t+1,1),e=!n.times(n).times(n).eq(f));break}if(!i&&(X(a,t+1,0),a.times(a).times(a).eq(f))){n=a;break}o+=4,i=1}return S=!0,X(n,t,l.rounding,e)},$.decimalPlaces=$.dp=function(){var t,e=this.d,r=NaN;if(e){if(r=((t=e.length-1)-P(this.e/L))*L,t=e[t])for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r},$.dividedBy=$.div=function(t){return G(this,new this.constructor(t))},$.dividedToIntegerBy=$.divToInt=function(t){var e=this.constructor;return X(G(this,new e(t),0,1,1),e.precision,e.rounding)},$.equals=$.eq=function(t){return 0===this.cmp(t)},$.floor=function(){return X(new this.constructor(this),this.e+1,3)},$.greaterThan=$.gt=function(t){return this.cmp(t)>0},$.greaterThanOrEqualTo=$.gte=function(t){var e=this.cmp(t);return 1==e||0===e},$.hyperbolicCosine=$.cosh=function(){var t,e,r,n,i,u=this,o=u.constructor,a=new o(1);if(!u.isFinite())return new o(u.s?1/0:NaN);if(u.isZero())return a;r=o.precision,n=o.rounding,o.precision=r+Math.max(u.e,u.sd())+4,o.rounding=1,(i=u.d.length)<32?e=(1/mt(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),u=dt(o,1,u.times(e),new o(1),!0);for(var s,c=t,f=new o(8);c--;)s=u.times(u),u=a.minus(s.times(f.minus(s.times(f))));return X(u,o.precision=r,o.rounding=n,!0)},$.hyperbolicSine=$.sinh=function(){var t,e,r,n,i=this,u=i.constructor;if(!i.isFinite()||i.isZero())return new u(i);if(e=u.precision,r=u.rounding,u.precision=e+Math.max(i.e,i.sd())+4,u.rounding=1,(n=i.d.length)<3)i=dt(u,2,i,i,!0);else{t=(t=1.4*Math.sqrt(n))>16?16:0|t,i=dt(u,2,i=i.times(1/mt(5,t)),i,!0);for(var o,a=new u(5),s=new u(16),c=new u(20);t--;)o=i.times(i),i=i.times(a.plus(o.times(s.times(o).plus(c))))}return u.precision=e,u.rounding=r,X(i,e,r,!0)},$.hyperbolicTangent=$.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,G(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)},$.inverseCosine=$.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,u=r.rounding;return-1!==n?0===n?e.isNeg()?nt(r,i,u):new r(0):new r(NaN):e.isZero()?nt(r,i+4,u).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=nt(r,i+4,u).times(.5),r.precision=i,r.rounding=u,t.minus(e))},$.inverseHyperbolicCosine=$.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,S=!1,r=r.times(r).minus(1).sqrt().plus(r),S=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)},$.inverseHyperbolicSine=$.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,S=!1,r=r.times(r).plus(1).sqrt().plus(r),S=!0,n.precision=t,n.rounding=e,r.ln())},$.inverseHyperbolicTangent=$.atanh=function(){var t,e,r,n,i=this,u=i.constructor;return i.isFinite()?i.e>=0?new u(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=u.precision,e=u.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?X(new u(i),t,e,!0):(u.precision=r=n-i.e,i=G(i.plus(1),new u(1).minus(i),r+t,1),u.precision=t+4,u.rounding=1,i=i.ln(),u.precision=t,u.rounding=e,i.times(.5))):new u(NaN)},$.inverseSine=$.asin=function(){var t,e,r,n,i=this,u=i.constructor;return i.isZero()?new u(i):(e=i.abs().cmp(1),r=u.precision,n=u.rounding,-1!==e?0===e?((t=nt(u,r+4,n).times(.5)).s=i.s,t):new u(NaN):(u.precision=r+6,u.rounding=1,i=i.div(new u(1).minus(i.times(i)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=n,i.times(2)))},$.inverseTangent=$.atan=function(){var t,e,r,n,i,u,o,a,s,c=this,f=c.constructor,l=f.precision,h=f.rounding;if(c.isFinite()){if(c.isZero())return new f(c);if(c.abs().eq(1)&&l+4<=V)return(o=nt(f,l+4,h).times(.25)).s=c.s,o}else{if(!c.s)return new f(NaN);if(l+4<=V)return(o=nt(f,l+4,h).times(.5)).s=c.s,o}for(f.precision=a=l+10,f.rounding=1,t=r=Math.min(28,a/L+2|0);t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(S=!1,e=Math.ceil(a/L),n=1,s=c.times(c),o=new f(c),i=c;-1!==t;)if(i=i.times(s),u=o.minus(i.div(n+=2)),i=i.times(s),void 0!==(o=u.plus(i.div(n+=2))).d[e])for(t=e;o.d[t]===u.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),S=!0,X(o,f.precision=l,f.rounding=h,!0)},$.isFinite=function(){return!!this.d},$.isInteger=$.isInt=function(){return!!this.d&&P(this.e/L)>this.d.length-2},$.isNaN=function(){return!this.s},$.isNegative=$.isNeg=function(){return this.s<0},$.isPositive=$.isPos=function(){return this.s>0},$.isZero=function(){return!!this.d&&0===this.d[0]},$.lessThan=$.lt=function(t){return this.cmp(t)<0},$.lessThanOrEqualTo=$.lte=function(t){return this.cmp(t)<1},$.logarithm=$.log=function(t){var e,r,n,i,u,o,a,s,c=this,f=c.constructor,l=f.precision,h=f.rounding;if(null==t)t=new f(10),e=!0;else{if(r=(t=new f(t)).d,t.s<0||!r||!r[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(r=c.d,c.s<0||!r||!r[0]||c.eq(1))return new f(r&&!r[0]?-1/0:1!=c.s?NaN:r?0:1/0);if(e)if(r.length>1)u=!0;else{for(i=r[0];i%10==0;)i/=10;u=1!==i}if(S=!1,o=ft(c,a=l+5),n=e?rt(f,a+10):ft(t,a),Y((s=G(o,n,a,1)).d,i=l,h))do{if(o=ft(c,a+=10),n=e?rt(f,a+10):ft(t,a),s=G(o,n,a,1),!u){+Z(s.d).slice(i+1,i+15)+1==1e14&&(s=X(s,l+1,0));break}}while(Y(s.d,i+=10,h));return S=!0,X(s,l,h)},$.minus=$.sub=function(t){var e,r,n,i,u,o,a,s,c,f,l,h,p=this,d=p.constructor;if(t=new d(t),!p.d||!t.d)return p.s&&t.s?p.d?t.s=-t.s:t=new d(t.d||p.s!==t.s?p:NaN):t=new d(NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(c=p.d,h=t.d,a=d.precision,s=d.rounding,!c[0]||!h[0]){if(h[0])t.s=-t.s;else{if(!c[0])return new d(3===s?-0:0);t=new d(p)}return S?X(t,a,s):t}if(r=P(t.e/L),f=P(p.e/L),c=c.slice(),u=f-r){for((l=u<0)?(e=c,u=-u,o=h.length):(e=h,r=f,o=c.length),u>(n=Math.max(Math.ceil(a/L),o)+2)&&(u=n,e.length=1),e.reverse(),n=u;n--;)e.push(0);e.reverse()}else{for((l=(n=c.length)<(o=h.length))&&(o=n),n=0;n<o;n++)if(c[n]!=h[n]){l=c[n]<h[n];break}u=0}for(l&&(e=c,c=h,h=e,t.s=-t.s),o=c.length,n=h.length-o;n>0;--n)c[o++]=0;for(n=h.length;n>u;){if(c[--n]<h[n]){for(i=n;i&&0===c[--i];)c[i]=U-1;--c[i],c[n]+=U}c[n]-=h[n]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=et(c,r),S?X(t,a,s):t):new d(3===s?-0:0)},$.modulo=$.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?X(new n(r),n.precision,n.rounding):(S=!1,9==n.modulo?(e=G(r,t.abs(),0,3,1)).s*=t.s:e=G(r,t,0,n.modulo,1),e=e.times(t),S=!0,r.minus(e))},$.naturalExponential=$.exp=function(){return ct(this)},$.naturalLogarithm=$.ln=function(){return ft(this)},$.negated=$.neg=function(){var t=new this.constructor(this);return t.s=-t.s,X(t)},$.plus=$.add=function(t){var e,r,n,i,u,o,a,s,c,f,l=this,h=l.constructor;if(t=new h(t),!l.d||!t.d)return l.s&&t.s?l.d||(t=new h(t.d||l.s===t.s?l:NaN)):t=new h(NaN),t;if(l.s!=t.s)return t.s=-t.s,l.minus(t);if(c=l.d,f=t.d,a=h.precision,s=h.rounding,!c[0]||!f[0])return f[0]||(t=new h(l)),S?X(t,a,s):t;if(u=P(l.e/L),n=P(t.e/L),c=c.slice(),i=u-n){for(i<0?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),i>(o=(u=Math.ceil(a/L))>o?u+1:o+1)&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((o=c.length)-(i=f.length)<0&&(i=o,r=f,f=c,c=r),e=0;i;)e=(c[--i]=c[i]+f[i]+e)/U|0,c[i]%=U;for(e&&(c.unshift(e),++n),o=c.length;0==c[--o];)c.pop();return t.d=c,t.e=et(c,n),S?X(t,a,s):t},$.precision=$.sd=function(t){var e,r=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(I+t);return r.d?(e=it(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e},$.round=function(){var t=this,e=t.constructor;return X(new e(t),t.e+1,e.rounding)},$.sine=$.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+L,n.rounding=1,r=function(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:dt(t,2,e,e);r=(r=1.4*Math.sqrt(n))>16?16:0|r,e=e.times(1/mt(5,r)),e=dt(t,2,e,e);for(var i,u=new t(5),o=new t(16),a=new t(20);r--;)i=e.times(e),e=e.times(u.plus(i.times(o.times(i).minus(a))));return e}(n,yt(n,r)),n.precision=t,n.rounding=e,X(A>2?r.neg():r,t,e,!0)):new n(NaN)},$.squareRoot=$.sqrt=function(){var t,e,r,n,i,u,o=this,a=o.d,s=o.e,c=o.s,f=o.constructor;if(1!==c||!a||!a[0])return new f(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);for(S=!1,0==(c=Math.sqrt(+o))||c==1/0?(((e=Z(a)).length+s)%2==0&&(e+="0"),c=Math.sqrt(e),s=P((s+1)/2)-(s<0||s%2),n=new f(e=c==1/0?"5e"+s:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+s)):n=new f(c.toString()),r=(s=f.precision)+3;;)if(n=(u=n).plus(G(o,u,r+2,1)).times(.5),Z(u.d).slice(0,r)===(e=Z(n.d)).slice(0,r)){if("9999"!=(e=e.slice(r-3,r+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(X(n,s+1,1),t=!n.times(n).eq(o));break}if(!i&&(X(u,s+1,0),u.times(u).eq(o))){n=u;break}r+=4,i=1}return S=!0,X(n,s,f.rounding,t)},$.tangent=$.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,(r=r.sin()).s=1,r=G(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,X(2==A||4==A?r.neg():r,t,e,!0)):new n(NaN)},$.times=$.mul=function(t){var e,r,n,i,u,o,a,s,c,f=this,l=f.constructor,h=f.d,p=(t=new l(t)).d;if(t.s*=f.s,!(h&&h[0]&&p&&p[0]))return new l(!t.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:h&&p?0*t.s:t.s/0);for(r=P(f.e/L)+P(t.e/L),(s=h.length)<(c=p.length)&&(u=h,h=p,p=u,o=s,s=c,c=o),u=[],n=o=s+c;n--;)u.push(0);for(n=c;--n>=0;){for(e=0,i=s+n;i>n;)a=u[i]+p[n]*h[i-n-1]+e,u[i--]=a%U|0,e=a/U|0;u[i]=(u[i]+e)%U|0}for(;!u[--o];)u.pop();return e?++r:u.shift(),t.d=u,t.e=et(u,r),S?X(t,l.precision,l.rounding):t},$.toBinary=function(t,e){return vt(this,2,t,e)},$.toDecimalPlaces=$.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),void 0===t?r:(Q(t,0,F),void 0===e?e=n.rounding:Q(e,0,8),X(r,t+r.e+1,e))},$.toExponential=function(t,e){var r,n=this,i=n.constructor;return void 0===t?r=tt(n,!0):(Q(t,0,F),void 0===e?e=i.rounding:Q(e,0,8),r=tt(n=X(new i(n),t+1,e),!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r},$.toFixed=function(t,e){var r,n,i=this,u=i.constructor;return void 0===t?r=tt(i):(Q(t,0,F),void 0===e?e=u.rounding:Q(e,0,8),r=tt(n=X(new u(i),t+i.e+1,e),!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},$.toFraction=function(t){var e,r,n,i,u,o,a,s,c,f,l,h,p=this,d=p.d,m=p.constructor;if(!d)return new m(p);if(c=r=new m(1),n=s=new m(0),o=(u=(e=new m(n)).e=it(d)-p.e-1)%L,e.d[0]=j(10,o<0?L+o:o),null==t)t=u>0?e:c;else{if(!(a=new m(t)).isInt()||a.lt(c))throw Error(I+a);t=a.gt(e)?u>0?e:c:a}for(S=!1,a=new m(Z(d)),f=m.precision,m.precision=u=d.length*L*2;l=G(a,e,0,1,1),1!=(i=r.plus(l.times(n))).cmp(t);)r=n,n=i,i=c,c=s.plus(l.times(i)),s=i,i=e,e=a.minus(l.times(i)),a=i;return i=G(t.minus(r),n,0,1,1),s=s.plus(i.times(c)),r=r.plus(i.times(n)),s.s=c.s=p.s,h=G(c,n,u,1).minus(p).abs().cmp(G(s,r,u,1).minus(p).abs())<1?[c,n]:[s,r],m.precision=f,S=!0,h},$.toHexadecimal=$.toHex=function(t,e){return vt(this,16,t,e)},$.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),null==t){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),void 0===e?e=n.rounding:Q(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(S=!1,r=G(r,t,0,e,1).times(t),S=!0,X(r)):(t.s=r.s,r=t),r},$.toNumber=function(){return+this},$.toOctal=function(t,e){return vt(this,8,t,e)},$.toPower=$.pow=function(t){var e,r,n,i,u,o,a=this,s=a.constructor,c=+(t=new s(t));if(!(a.d&&t.d&&a.d[0]&&t.d[0]))return new s(j(+a,c));if((a=new s(a)).eq(1))return a;if(n=s.precision,u=s.rounding,t.eq(1))return X(a,n,u);if((e=P(t.e/L))>=t.d.length-1&&(r=c<0?-c:c)<=9007199254740991)return i=ot(s,a,r,n),t.s<0?new s(1).div(i):X(i,n,u);if((o=a.s)<0){if(e<t.d.length-1)return new s(NaN);if(1&t.d[e]||(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(e=0!=(r=j(+a,c))&&isFinite(r)?new s(r+"").e:P(c*(Math.log("0."+Z(a.d))/Math.LN10+a.e+1)))>s.maxE+1||e<s.minE-1?new s(e>0?o/0:0):(S=!1,s.rounding=a.s=1,r=Math.min(12,(e+"").length),(i=ct(t.times(ft(a,n+r)),n)).d&&Y((i=X(i,n+5,1)).d,n,u)&&(e=n+10,+Z((i=X(ct(t.times(ft(a,e+r)),e),e+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=X(i,n+1,0))),i.s=o,S=!0,s.rounding=u,X(i,n,u))},$.toPrecision=function(t,e){var r,n=this,i=n.constructor;return void 0===t?r=tt(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Q(t,1,F),void 0===e?e=i.rounding:Q(e,0,8),r=tt(n=X(new i(n),t,e),t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r},$.toSignificantDigits=$.toSD=function(t,e){var r=this.constructor;return void 0===t?(t=r.precision,e=r.rounding):(Q(t,1,F),void 0===e?e=r.rounding:Q(e,0,8)),X(new r(this),t,e)},$.toString=function(){var t=this,e=t.constructor,r=tt(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r},$.truncated=$.trunc=function(){return X(new this.constructor(this),this.e+1,1)},$.valueOf=$.toJSON=function(){var t=this,e=t.constructor,r=tt(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};var G=function(){function t(t,e,r){var n,i=0,u=t.length;for(t=t.slice();u--;)n=t[u]*e+i,t[u]=n%r|0,i=n/r|0;return i&&t.unshift(i),t}function e(t,e,r,n){var i,u;if(r!=n)u=r>n?1:-1;else for(i=u=0;i<r;i++)if(t[i]!=e[i]){u=t[i]>e[i]?1:-1;break}return u}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;)t.shift()}return function(n,i,u,o,a,s){var c,f,l,h,p,d,m,y,v,g,D,w,b,x,A,E,F,C,M,B,N=n.constructor,S=n.s==i.s?1:-1,O=n.d,I=i.d;if(!(O&&O[0]&&I&&I[0]))return new N(n.s&&i.s&&(O?!I||O[0]!=I[0]:I)?O&&0==O[0]||!I?0*S:S/0:NaN);for(s?(p=1,f=n.e-i.e):(s=U,p=L,f=P(n.e/p)-P(i.e/p)),M=I.length,F=O.length,g=(v=new N(S)).d=[],l=0;I[l]==(O[l]||0);l++);if(I[l]>(O[l]||0)&&f--,null==u?(x=u=N.precision,o=N.rounding):x=a?u+(n.e-i.e)+1:u,x<0)g.push(1),d=!0;else{if(x=x/p+2|0,l=0,1==M){for(h=0,I=I[0],x++;(l<F||h)&&x--;l++)A=h*s+(O[l]||0),g[l]=A/I|0,h=A%I|0;d=h||l<F}else{for((h=s/(I[0]+1)|0)>1&&(I=t(I,h,s),O=t(O,h,s),M=I.length,F=O.length),E=M,w=(D=O.slice(0,M)).length;w<M;)D[w++]=0;(B=I.slice()).unshift(0),C=I[0],I[1]>=s/2&&++C;do{h=0,(c=e(I,D,M,w))<0?(b=D[0],M!=w&&(b=b*s+(D[1]||0)),(h=b/C|0)>1?(h>=s&&(h=s-1),1==(c=e(m=t(I,h,s),D,y=m.length,w=D.length))&&(h--,r(m,M<y?B:I,y,s))):(0==h&&(c=h=1),m=I.slice()),(y=m.length)<w&&m.unshift(0),r(D,m,w,s),-1==c&&(c=e(I,D,M,w=D.length))<1&&(h++,r(D,M<w?B:I,w,s)),w=D.length):0===c&&(h++,D=[0]),g[l++]=h,c&&D[0]?D[w++]=O[E]||0:(D=[O[E]],w=1)}while((E++<F||void 0!==D[0])&&x--);d=void 0!==D[0]}g[0]||g.shift()}if(1==p)v.e=f,_=d;else{for(l=1,h=g[0];h>=10;h/=10)l++;v.e=l+f*p-1,X(v,a?u+v.e+1:u,o,d)}return v}}();function X(t,e,r,n){var i,u,o,a,s,c,f,l,h,p=t.constructor;t:if(null!=e){if(!(l=t.d))return t;for(i=1,a=l[0];a>=10;a/=10)i++;if((u=e-i)<0)u+=L,o=e,s=(f=l[h=0])/j(10,i-o-1)%10|0;else if((h=Math.ceil((u+1)/L))>=(a=l.length)){if(!n)break t;for(;a++<=h;)l.push(0);f=s=0,i=1,o=(u%=L)-L+1}else{for(f=a=l[h],i=1;a>=10;a/=10)i++;s=(o=(u%=L)-L+i)<0?0:f/j(10,i-o-1)%10|0}if(n=n||e<0||void 0!==l[h+1]||(o<0?f:f%j(10,i-o-1)),c=r<4?(s||n)&&(0==r||r==(t.s<0?3:2)):s>5||5==s&&(4==r||n||6==r&&(u>0?o>0?f/j(10,i-o):0:l[h-1])%10&1||r==(t.s<0?8:7)),e<1||!l[0])return l.length=0,c?(e-=t.e+1,l[0]=j(10,(L-e%L)%L),t.e=-e||0):l[0]=t.e=0,t;if(0==u?(l.length=h,a=1,h--):(l.length=h+1,a=j(10,L-u),l[h]=o>0?(f/j(10,i-o)%j(10,o)|0)*a:0),c)for(;;){if(0==h){for(u=1,o=l[0];o>=10;o/=10)u++;for(o=l[0]+=a,a=1;o>=10;o/=10)a++;u!=a&&(t.e++,l[0]==U&&(l[0]=1));break}if(l[h]+=a,l[h]!=U)break;l[h--]=0,a=1}for(u=l.length;0===l[--u];)l.pop()}return S&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function tt(t,e,r){if(!t.isFinite())return lt(t);var n,i=t.e,u=Z(t.d),o=u.length;return e?(r&&(n=r-o)>0?u=u.charAt(0)+"."+u.slice(1)+ut(n):o>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(t.e<0?"e":"e+")+t.e):i<0?(u="0."+ut(-i-1)+u,r&&(n=r-o)>0&&(u+=ut(n))):i>=o?(u+=ut(i+1-o),r&&(n=r-i-1)>0&&(u=u+"."+ut(n))):((n=i+1)<o&&(u=u.slice(0,n)+"."+u.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(u+="."),u+=ut(n))),u}function et(t,e){var r=t[0];for(e*=L;r>=10;r/=10)e++;return e}function rt(t,e,r){if(e>W)throw S=!0,r&&(t.precision=r),Error(T);return X(new t(M),e,1,!0)}function nt(t,e,r){if(e>V)throw Error(T);return X(new t(B),e,r,!0)}function it(t){var e=t.length-1,r=e*L+1;if(e=t[e]){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function ut(t){for(var e="";t--;)e+="0";return e}function ot(t,e,r,n){var i,u=new t(1),o=Math.ceil(n/L+4);for(S=!1;;){if(r%2&&gt((u=u.times(e)).d,o)&&(i=!0),0===(r=P(r/2))){r=u.d.length-1,i&&0===u.d[r]&&++u.d[r];break}gt((e=e.times(e)).d,o)}return S=!0,u}function at(t){return 1&t.d[t.d.length-1]}function st(t,e,r){for(var n,i=new t(e[0]),u=0;++u<e.length;){if(!(n=new t(e[u])).s){i=n;break}i[r](n)&&(i=n)}return i}function ct(t,e){var r,n,i,u,o,a,s,c=0,f=0,l=0,h=t.constructor,p=h.rounding,d=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(S=!1,s=d):s=e,a=new h(.03125);t.e>-2;)t=t.times(a),l+=5;for(s+=n=Math.log(j(2,l))/Math.LN10*2+5|0,r=u=o=new h(1),h.precision=s;;){if(u=X(u.times(t),s,1),r=r.times(++f),Z((a=o.plus(G(u,r,s,1))).d).slice(0,s)===Z(o.d).slice(0,s)){for(i=l;i--;)o=X(o.times(o),s,1);if(null!=e)return h.precision=d,o;if(!(c<3&&Y(o.d,s-n,p,c)))return X(o,h.precision=d,p,S=!0);h.precision=s+=10,r=u=a=new h(1),f=0,c++}o=a}}function ft(t,e){var r,n,i,u,o,a,s,c,f,l,h,p=1,d=t,m=d.d,y=d.constructor,v=y.rounding,g=y.precision;if(d.s<0||!m||!m[0]||!d.e&&1==m[0]&&1==m.length)return new y(m&&!m[0]?-1/0:1!=d.s?NaN:m?0:d);if(null==e?(S=!1,f=g):f=e,y.precision=f+=10,n=(r=Z(m)).charAt(0),!(Math.abs(u=d.e)<15e14))return c=rt(y,f+2,g).times(u+""),d=ft(new y(n+"."+r.slice(1)),f-10).plus(c),y.precision=g,null==e?X(d,g,v,S=!0):d;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=Z((d=d.times(t)).d)).charAt(0),p++;for(u=d.e,n>1?(d=new y("0."+r),u++):d=new y(n+"."+r.slice(1)),l=d,s=o=d=G(d.minus(1),d.plus(1),f,1),h=X(d.times(d),f,1),i=3;;){if(o=X(o.times(h),f,1),Z((c=s.plus(G(o,new y(i),f,1))).d).slice(0,f)===Z(s.d).slice(0,f)){if(s=s.times(2),0!==u&&(s=s.plus(rt(y,f+2,g).times(u+""))),s=G(s,new y(p),f,1),null!=e)return y.precision=g,s;if(!Y(s.d,f-10,v,a))return X(s,y.precision=g,v,S=!0);y.precision=f+=10,c=o=d=G(l.minus(1),l.plus(1),f,1),h=X(d.times(d),f,1),i=a=1}s=c,i+=2}}function lt(t){return String(t.s*t.s/0)}function ht(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;48===e.charCodeAt(n);n++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(n,i)){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%L,r<0&&(n+=L),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=L;n<i;)t.d.push(+e.slice(n,n+=L));e=e.slice(n),n=L-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),S&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function pt(t,e){var r,n,i,u,o,a,s,c,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),R.test(e))return ht(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(K.test(e))r=16,e=e.toLowerCase();else if(q.test(e))r=2;else{if(!H.test(e))throw Error(I+e);r=8}for((u=e.search(/p/i))>0?(s=+e.slice(u+1),e=e.substring(2,u)):e=e.slice(2),o=(u=e.indexOf("."))>=0,n=t.constructor,o&&(u=(a=(e=e.replace(".","")).length)-u,i=ot(n,new n(r),u,2*u)),u=f=(c=J(e,r,U)).length-1;0===c[u];--u)c.pop();return u<0?new n(0*t.s):(t.e=et(c,f),t.d=c,S=!1,o&&(t=G(t,i,4*a)),s&&(t=t.times(Math.abs(s)<54?j(2,s):ue.pow(2,s))),S=!0,t)}function dt(t,e,r,n,i){var u,o,a,s,c=t.precision,f=Math.ceil(c/L);for(S=!1,s=r.times(r),a=new t(n);;){if(o=G(a.times(s),new t(e++*e++),c,1),a=i?n.plus(o):n.minus(o),n=G(o.times(s),new t(e++*e++),c,1),void 0!==(o=a.plus(n)).d[f]){for(u=f;o.d[u]===a.d[u]&&u--;);if(-1==u)break}u=a,a=n,n=o,o=u}return S=!0,o.d.length=f+1,o}function mt(t,e){for(var r=t;--e;)r*=t;return r}function yt(t,e){var r,n=e.s<0,i=nt(t,t.precision,1),u=i.times(.5);if((e=e.abs()).lte(u))return A=n?4:1,e;if((r=e.divToInt(i)).isZero())A=n?3:2;else{if((e=e.minus(r.times(i))).lte(u))return A=at(r)?n?2:3:n?4:1,e;A=at(r)?n?1:4:n?3:2}return e.minus(i).abs()}function vt(t,e,r,n){var i,u,o,a,s,c,f,l,h,p=t.constructor,d=void 0!==r;if(d?(Q(r,1,F),void 0===n?n=p.rounding:Q(n,0,8)):(r=p.precision,n=p.rounding),t.isFinite()){for(d?(i=2,16==e?r=4*r-3:8==e&&(r=3*r-2)):i=e,(o=(f=tt(t)).indexOf("."))>=0&&(f=f.replace(".",""),(h=new p(1)).e=f.length-o,h.d=J(tt(h),10,i),h.e=h.d.length),u=s=(l=J(f,10,i)).length;0==l[--s];)l.pop();if(l[0]){if(o<0?u--:((t=new p(t)).d=l,t.e=u,l=(t=G(t,h,r,n,0,i)).d,u=t.e,c=_),o=l[r],a=i/2,c=c||void 0!==l[r+1],c=n<4?(void 0!==o||c)&&(0===n||n===(t.s<0?3:2)):o>a||o===a&&(4===n||c||6===n&&1&l[r-1]||n===(t.s<0?8:7)),l.length=r,c)for(;++l[--r]>i-1;)l[r]=0,r||(++u,l.unshift(1));for(s=l.length;!l[s-1];--s);for(o=0,f="";o<s;o++)f+=C.charAt(l[o]);if(d){if(s>1)if(16==e||8==e){for(o=16==e?4:3,--s;s%o;s++)f+="0";for(s=(l=J(f,i,e)).length;!l[s-1];--s);for(o=1,f="1.";o<s;o++)f+=C.charAt(l[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)f="0"+f;f="0."+f}else if(++u>s)for(u-=s;u--;)f+="0";else u<s&&(f=f.slice(0,u)+"."+f.slice(u))}else f=d?"0p+0":"0";f=(16==e?"0x":2==e?"0b":8==e?"0o":"")+f}else f=lt(t);return t.s<0?"-"+f:f}function gt(t,e){if(t.length>e)return t.length=e,!0}function Dt(t){return new this(t).abs()}function wt(t){return new this(t).acos()}function bt(t){return new this(t).acosh()}function xt(t,e){return new this(t).plus(e)}function _t(t){return new this(t).asin()}function At(t){return new this(t).asinh()}function Et(t){return new this(t).atan()}function Ft(t){return new this(t).atanh()}function Ct(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,u=n+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(r=e.s<0?nt(this,n,i):new this(0)).s=t.s:!t.d||e.isZero()?(r=nt(this,u,1).times(.5)).s=t.s:e.s<0?(this.precision=u,this.rounding=1,r=this.atan(G(t,e,u,1)),e=nt(this,u,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(G(t,e,u,1)):(r=nt(this,u,1).times(e.s>0?.25:.75)).s=t.s:r=new this(NaN),r}function Mt(t){return new this(t).cbrt()}function Bt(t){return X(t=new this(t),t.e+1,2)}function Nt(t,e,r){return new this(t).clamp(e,r)}function St(t){if(!t||"object"!=typeof t)throw Error(O+"Object expected");var e,r,n,i=!0===t.defaults,u=["precision",1,F,"rounding",0,8,"toExpNeg",-E,0,"toExpPos",0,E,"maxE",0,E,"minE",-E,0,"modulo",0,9];for(e=0;e<u.length;e+=3)if(r=u[e],i&&(this[r]=N[r]),void 0!==(n=t[r])){if(!(P(n)===n&&n>=u[e+1]&&n<=u[e+2]))throw Error(I+r+": "+n);this[r]=n}if(r="crypto",i&&(this[r]=N[r]),void 0!==(n=t[r])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(I+r+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(k);this[r]=!0}else this[r]=!1}return this}function Ot(t){return new this(t).cos()}function It(t){return new this(t).cosh()}function Tt(t,e){return new this(t).div(e)}function kt(t){return new this(t).exp()}function zt(t){return X(t=new this(t),t.e+1,3)}function Pt(){var t,e,r=new this(0);for(S=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return S=!0,new this(1/0);r=e}return S=!0,r.sqrt()}function jt(t){return t instanceof ue||t&&t.toStringTag===z||!1}function qt(t){return new this(t).ln()}function Kt(t,e){return new this(t).log(e)}function Ht(t){return new this(t).log(2)}function Rt(t){return new this(t).log(10)}function Ut(){return st(this,arguments,"lt")}function Lt(){return st(this,arguments,"gt")}function Wt(t,e){return new this(t).mod(e)}function Vt(t,e){return new this(t).mul(e)}function $t(t,e){return new this(t).pow(e)}function Zt(t){var e,r,n,i,u=0,o=new this(1),a=[];if(void 0===t?t=this.precision:Q(t,1,F),n=Math.ceil(t/L),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));u<n;)(i=e[u])>=429e7?e[u]=crypto.getRandomValues(new Uint32Array(1))[0]:a[u++]=i%1e7;else{if(!crypto.randomBytes)throw Error(k);for(e=crypto.randomBytes(n*=4);u<n;)(i=e[u]+(e[u+1]<<8)+(e[u+2]<<16)+((127&e[u+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,u):(a.push(i%1e7),u+=4);u=n/4}else for(;u<n;)a[u++]=1e7*Math.random()|0;for(n=a[--u],t%=L,n&&t&&(i=j(10,L-t),a[u]=(n/i|0)*i);0===a[u];u--)a.pop();if(u<0)r=0,a=[0];else{for(r=-1;0===a[0];r-=L)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<L&&(r-=L-n)}return o.e=r,o.d=a,o}function Qt(t){return X(t=new this(t),t.e+1,this.rounding)}function Yt(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Jt(t){return new this(t).sin()}function Gt(t){return new this(t).sinh()}function Xt(t){return new this(t).sqrt()}function te(t,e){return new this(t).sub(e)}function ee(){var t=0,e=arguments,r=new this(e[t]);for(S=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return S=!0,X(r,this.precision,this.rounding)}function re(t){return new this(t).tan()}function ne(t){return new this(t).tanh()}function ie(t){return X(t=new this(t),t.e+1,1)}$[Symbol.for("nodejs.util.inspect.custom")]=$.toString,$[Symbol.toStringTag]="Decimal";var ue=$.constructor=function t(e){var r,n,i;function u(t){var e,r,n,i=this;if(!(i instanceof u))return new u(t);if(i.constructor=u,jt(t))return i.s=t.s,void(S?!t.d||t.e>u.maxE?(i.e=NaN,i.d=null):t.e<u.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"===(n=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,r=t;r>=10;r/=10)e++;return void(S?e>u.maxE?(i.e=NaN,i.d=null):e<u.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):ht(i,t.toString())}if("string"!==n)throw Error(I+t);return 45===(r=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===r&&(t=t.slice(1)),i.s=1),R.test(t)?ht(i,t):pt(i,t)}if(u.prototype=$,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.EUCLID=9,u.config=u.set=St,u.clone=t,u.isDecimal=jt,u.abs=Dt,u.acos=wt,u.acosh=bt,u.add=xt,u.asin=_t,u.asinh=At,u.atan=Et,u.atanh=Ft,u.atan2=Ct,u.cbrt=Mt,u.ceil=Bt,u.clamp=Nt,u.cos=Ot,u.cosh=It,u.div=Tt,u.exp=kt,u.floor=zt,u.hypot=Pt,u.ln=qt,u.log=Kt,u.log10=Rt,u.log2=Ht,u.max=Ut,u.min=Lt,u.mod=Wt,u.mul=Vt,u.pow=$t,u.random=Zt,u.round=Qt,u.sign=Yt,u.sin=Jt,u.sinh=Gt,u.sqrt=Xt,u.sub=te,u.sum=ee,u.tan=re,u.tanh=ne,u.trunc=ie,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;)e.hasOwnProperty(n=i[r++])||(e[n]=this[n]);return u.config(e),u}(N);M=new ue(M),B=new ue(B);var oe=ue;function ae(t){return"number"==typeof t}function se(t){return!(!t||"object"!=typeof t||"function"!=typeof t.constructor)&&(!0===t.isBigNumber&&"object"==typeof t.constructor.prototype&&!0===t.constructor.prototype.isBigNumber||"function"==typeof t.constructor.isDecimal&&!0===t.constructor.isDecimal(t))}function ce(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isComplex||!1}function fe(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isFraction||!1}function le(t){return t&&!0===t.constructor.prototype.isUnit||!1}function he(t){return"string"==typeof t}var pe=Array.isArray;function de(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function me(t){return Array.isArray(t)||de(t)}function ye(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function ve(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function ge(t){return t&&!0===t.constructor.prototype.isRange||!1}function De(t){return t&&!0===t.constructor.prototype.isIndex||!1}function we(t){return"boolean"==typeof t}function be(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function xe(t){return t&&!0===t.constructor.prototype.isHelp||!1}function _e(t){return"function"==typeof t}function Ae(t){return t instanceof Date}function Ee(t){return t instanceof RegExp}function Fe(t){return!(!t||"object"!=typeof t||t.constructor!==Object||ce(t)||fe(t))}function Ce(t){return null===t}function Me(t){return void 0===t}function Be(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function Ne(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function Se(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Oe(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function Ie(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function Te(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function ke(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function ze(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function Pe(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function je(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function qe(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function Ke(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function He(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function Re(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function Ue(t){return t&&!0===t.isRelationalNode&&!0===t.constructor.prototype.isNode||!1}function Le(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function We(t){return t&&!0===t.constructor.prototype.isChain||!1}function Ve(t){var e=typeof t;return"object"===e?null===t?"null":se(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function $e(t){var e=typeof t;if("number"===e||"string"===e||"boolean"===e||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map((function(t){return $e(t)}));if(t instanceof Date)return new Date(t.valueOf());if(se(t))return t;if(Fe(t))return function(t,e){var r={};for(var n in t)Ye(t,n)&&(r[n]=e(t[n]));return r}(t,$e);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function Ze(t,e){for(var r in e)Ye(e,r)&&(t[r]=e[r]);return t}function Qe(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Qe(t[n],e[n]))return!1;return!0}if("function"==typeof t)return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Qe(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}return t===e}function Ye(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Je(t,e,r,n){function i(n){var i=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],u=t[i];void 0!==u&&(r[i]=u)}return r}(n,e.map(Ge));return function(t,e,r){var n=e.filter((t=>!function(t){return t&&"?"===t[0]}(t))).every((t=>void 0!==r[t]));if(!n){var i=e.filter((t=>void 0===r[t]));throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map((t=>'"'.concat(t,'"'))).join(", "),"."))}}(t,e,n),r(i)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ge(t){return t&&"?"===t[0]?t.slice(1):t}var Xe=Je("BigNumber",["?on","config"],(t=>{var{on:e,config:r}=t,n=oe.clone({precision:r.precision,modulo:oe.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(t){return new n(t.value)},e&&e("config",(function(t,e){t.precision!==e.precision&&n.config({precision:t.precision})})),n}),{isClass:!0}),tr=r(716);function er(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}var rr=Math.sign||function(t){return t>0?1:t<0?-1:0},nr=Math.log2||function(t){return Math.log(t)/Math.LN2},ir=Math.log10||function(t){return Math.log(t)/Math.LN10},ur=(Math.log1p,Math.cbrt||function(t){if(0===t)return t;var e,r=t<0;return r&&(t=-t),e=isFinite(t)?(t/((e=Math.exp(Math.log(t)/3))*e)+2*e)/3:t,r?-e:e}),or=Math.expm1||function(t){return t>=2e-4||t<=-2e-4?Math.exp(t)-1:t+t*t/2+t*t*t/6};function ar(t,e,r){var n={2:"0b",8:"0o",16:"0x"}[e],i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!er(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!er(t))throw new Error("Value must be an integer");t<0&&(t+=2**r),i="i".concat(r)}var u="";return t<0&&(t=-t,u="-"),"".concat(u).concat(n).concat(t.toString(e)).concat(i)}function sr(t,e){if("function"==typeof e)return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:r,precision:n,wordSize:i}=cr(e);switch(r){case"fixed":return lr(t,n);case"exponential":return hr(t,n);case"engineering":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=fr(t),n=pr(r,e),i=n.exponent,u=n.coefficients,o=i%3==0?i:i<0?i-3-i%3:i-i%3;if(ae(e))for(;e>u.length||i-o+1>u.length;)u.push(0);else for(var a=Math.abs(i-o)-(u.length-1),s=0;s<a;s++)u.push(0);var c=Math.abs(i-o),f=1;for(;c>0;)f++,c--;var l=u.slice(f).join(""),h=ae(e)&&l.length||l.match(/[1-9]/)?"."+l:"",p=u.slice(0,f).join("")+h+"e"+(i>=0?"+":"")+o.toString();return n.sign+p}(t,n);case"bin":return ar(t,2,i);case"oct":return ar(t,8,i);case"hex":return ar(t,16,i);case"auto":return function(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=xr(null==r?void 0:r.lowerExp,-3),i=xr(null==r?void 0:r.upperExp,5),u=fr(t),o=e?pr(u,e):u;if(o.exponent<n||o.exponent>=i)return hr(t,e);var a=o.coefficients,s=o.exponent;a.length<e&&(a=a.concat(dr(e-a.length))),a=a.concat(dr(s-a.length+1+(a.length<e?e-a.length:0)));var c=s>0?s:0;return c<(a=dr(-s).concat(a)).length-1&&a.splice(c+1,0,"."),o.sign+a.join("")}(t,n,e).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function cr(t){var e,r,n="auto";if(void 0!==t)if(ae(t))e=t;else if(se(t))e=t.toNumber();else{if(!Fe(t))throw new Error("Unsupported type of options, number, BigNumber, or object expected");void 0!==t.precision&&(e=br(t.precision,(()=>{throw new Error('Option "precision" must be a number or BigNumber')}))),void 0!==t.wordSize&&(r=br(t.wordSize,(()=>{throw new Error('Option "wordSize" must be a number or BigNumber')}))),t.notation&&(n=t.notation)}return{notation:n,precision:e,wordSize:r}}function fr(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),u=n.indexOf(".");i+=-1!==u?u-1:n.length-1;var o=n.replace(".","").replace(/^0*/,(function(t){return i-=t.length,""})).replace(/0*$/,"").split("").map((function(t){return parseInt(t)}));return 0===o.length&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function lr(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=fr(t),n="number"==typeof e?pr(r,r.exponent+1+e):r,i=n.coefficients,u=n.exponent+1,o=u+(e||0);return i.length<o&&(i=i.concat(dr(o-i.length))),u<0&&(i=dr(1-u).concat(i),u=1),u<i.length&&i.splice(u,0,0===u?"0.":"."),n.sign+i.join("")}function hr(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=fr(t),n=e?pr(r,e):r,i=n.coefficients,u=n.exponent;i.length<e&&(i=i.concat(dr(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(u>=0?"+":"")+u}function pr(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e&&n.splice(e,n.length-e)[0]>=5){var i=e-1;for(n[i]++;10===n[i];)n.pop(),0===i&&(n.unshift(0),r.exponent++,i++),n[--i]++}return r}function dr(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}var mr=Number.EPSILON||2220446049250313e-31;function yr(t,e,r){if(null==r)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<=mr||n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}var vr=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},gr=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},Dr=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},wr=(Math.cosh,Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2});Math.tanh;function br(t,e){return ae(t)?t:se(t)?t.toNumber():void e()}function xr(t,e){return ae(t)?t:se(t)?t.toNumber():e}var _r=Je("Complex",[],(()=>(Object.defineProperty(tr,"name",{value:"Complex"}),tr.prototype.constructor=tr,tr.prototype.type="Complex",tr.prototype.isComplex=!0,tr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},tr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},tr.prototype.format=function(t){var e=this.im,r=this.re,n=sr(this.re,t),i=sr(this.im,t),u=ae(t)?t:t?t.precision:null;if(null!==u){var o=Math.pow(10,-u);Math.abs(r/e)<o&&(r=0),Math.abs(e/r)<o&&(e=0)}return 0===e?n:0===r?1===e?"i":-1===e?"-i":i+"i":e<0?-1===e?n+" - i":n+" - "+i.substring(1)+"i":1===e?n+" + i":n+" + "+i+"i"},tr.fromPolar=function(t){switch(arguments.length){case 1:var e=arguments[0];if("object"==typeof e)return tr(e);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var r=arguments[0],n=arguments[1];if(ae(r)){if(le(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),ae(n))return new tr({r:r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},tr.prototype.valueOf=tr.prototype.toString,tr.fromJSON=function(t){return new tr(t)},tr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},tr)),{isClass:!0});function Ar(t){var e=0,r=1,n=Object.create(null),i=Object.create(null),u=0,o=function(t){var o=i[t];if(o&&(delete n[o],delete i[t],--e,r===o)){if(!e)return u=0,void(r=1);for(;!Object.prototype.hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(a){var s=i[a],c=++u;if(n[c]=a,i[a]=c,!s){if(++e<=t)return;return a=n[r],o(a),a}if(delete n[s],r===s)for(;!Object.prototype.hasOwnProperty.call(n,++r););},delete:o,clear:function(){e=u=0,r=1,n=Object.create(null),i=Object.create(null)}}}function Er(t){var{hasher:e,limit:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=null==r?Number.POSITIVE_INFINITY:r,e=null==e?JSON.stringify:e,function n(){"object"!=typeof n.cache&&(n.cache={values:new Map,lru:Ar(r||Number.POSITIVE_INFINITY)});for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];var o=e(i);if(n.cache.values.has(o))return n.cache.lru.hit(o),n.cache.values.get(o);var a=t.apply(t,i);return n.cache.values.set(o,a),n.cache.values.delete(n.cache.lru.hit(o)),a}}function Fr(t){return Object.keys(t.signatures||{}).reduce((function(t,e){var r=(e.match(/,/g)||[]).length+1;return Math.max(t,r)}),-1)}Er((function(t){return new t(1).exp()}),{hasher:Mr}),Er((function(t){return new t(1).plus(new t(5).sqrt()).div(2)}),{hasher:Mr});var Cr=Er((function(t){return t.acos(-1)}),{hasher:Mr});Er((function(t){return Cr(t).times(2)}),{hasher:Mr});function Mr(t){return t[0].precision}Math.PI,Math.PI,Math.E;Br("fineStructure",.0072973525693),Br("weakMixingAngle",.2229),Br("efimovFactor",22.7),Br("sackurTetrode",-1.16487052358);function Br(t,e){return Je(t,["config","BigNumber"],(t=>{var{config:r,BigNumber:n}=t;return"BigNumber"===r.number?new n(e):e}))}var Nr=r(377),Sr=Je("Fraction",[],(()=>(Object.defineProperty(Nr,"name",{value:"Fraction"}),Nr.prototype.constructor=Nr,Nr.prototype.type="Fraction",Nr.prototype.isFraction=!0,Nr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Nr.fromJSON=function(t){return new Nr(t)},Nr)),{isClass:!0}),Or=Je("Matrix",[],(()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(t,e,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(t,e,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t}),{isClass:!0});function Ir(t,e,r){var n=new(0,t.constructor)(2),i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!er(r))throw new Error("size must be an integer");if(t.greaterThan(n.pow(r-1).sub(1))||t.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(n.pow(r))),i="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function Tr(t,e){if("function"==typeof e)return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=cr(e);switch(r){case"fixed":return function(t,e){return t.toFixed(e)}(t,n);case"exponential":return kr(t,n);case"engineering":return function(t,e){var r=t.e,n=r%3==0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),u=i.toPrecision(e);if(u.includes("e")){u=new(0,t.constructor)(u).toFixed()}return u+"e"+(r>=0?"+":"")+n.toString()}(t,n);case"bin":return Ir(t,2,i);case"oct":return Ir(t,8,i);case"hex":return Ir(t,16,i);case"auto":var u=zr(null==e?void 0:e.lowerExp,-3),o=zr(null==e?void 0:e.upperExp,5);if(t.isZero())return"0";var a=t.toSignificantDigits(n),s=a.e;return(s>=u&&s<o?a.toFixed():kr(t,n)).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function kr(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()}function zr(t,e){return ae(t)?t:se(t)?t.toNumber():e}function Pr(t,e){var r=function(t,e){if("number"==typeof t)return sr(t,e);if(se(t))return Tr(t,e);if(function(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t))return e&&"decimal"===e.fraction?t.toString():t.s*t.n+"/"+t.d;if(Array.isArray(t))return Kr(t,e);if(he(t))return jr(t);if("function"==typeof t)return t.syntax?String(t.syntax):"function";if(t&&"object"==typeof t){return"function"==typeof t.format?t.format(e):t&&t.toString(e)!=={}.toString()?t.toString(e):"{"+Object.keys(t).map((r=>jr(r)+": "+Pr(t[r],e))).join(", ")+"}"}return String(t)}(t,e);return e&&"object"==typeof e&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function jr(t){for(var e=String(t),r="",n=0;n<e.length;){var i=e.charAt(n);r+=i in qr?qr[i]:i,n++}return'"'+r+'"'}var qr={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function Kr(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)0!==i&&(r+=", "),r+=Kr(t[i],e);return r+="]"}return Pr(t,e)}function Hr(t,e){if(!he(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ve(t)+", index: 0)");if(!he(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Ve(e)+", index: 1)");return t===e?0:t>e?1:-1}function Rr(t,e,r){if(!(this instanceof Rr))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}function Ur(t,e,r){if(!(this instanceof Ur))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function Lr(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Wr(t,e,r){var n,i=t.length;if(i!==e[r])throw new Rr(i,e[r]);if(r<e.length-1){var u=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new Rr(e.length-1,e.length,"<");Wr(t[n],e,u)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Rr(e.length+1,e.length,">")}function Vr(t,e){if(0===e.length){if(Array.isArray(t))throw new Rr(t.length,0)}else Wr(t,e,0)}function $r(t,e){var r=t.isMatrix?t._size:Lr(t);e._sourceSize.forEach(((t,e)=>{if(null!==t&&t!==r[e])throw new Rr(t,r[e])}))}function Zr(t,e){if(void 0!==t){if(!ae(t)||!er(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new Ur(t,e)}}function Qr(t){for(var e=0;e<t._dimensions.length;++e){var r=t._dimensions[e];if(r._data&&pe(r._data)){if(0===r._size[0])return!0}else if(r.isRange){if(r.start===r.end)return!0}else if(he(r)&&0===r.length)return!0}return!1}function Yr(t,e,r){if(!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");return e.forEach((function(t){if(!ae(t)||!er(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Pr(e)+")")})),(ae(t)||se(t))&&(t=[t]),Jr(t,e,0,void 0!==r?r:0),t}function Jr(t,e,r,n){var i,u,o=t.length,a=e[r],s=Math.min(o,a);if(t.length=a,r<e.length-1){var c=r+1;for(i=0;i<s;i++)u=t[i],Array.isArray(u)||(u=[u],t[i]=u),Jr(u,e,c,n);for(i=s;i<a;i++)u=[],t[i]=u,Jr(u,e,c,n)}else{for(i=0;i<s;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=s;i<a;i++)t[i]=n}}function Gr(t,e){var r=on(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Rr(0,n,"!=");var i=tn(e=Xr(e,n));if(n!==i)throw new Rr(i,n,"!=");try{return function(t,e){for(var r,n=t,i=e.length-1;i>0;i--){var u=e[i];r=[];for(var o=n.length/u,a=0;a<o;a++)r.push(n.slice(a*u,(a+1)*u));n=r}return n}(r,e)}catch(u){if(u instanceof Rr)throw new Rr(i,n,"!=");throw u}}function Xr(t,e){var r=tn(t),n=t.slice(),i=t.indexOf(-1);if(t.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(!(e%r==0))throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);n[i]=-e/r}return n}function tn(t){return t.reduce(((t,e)=>t*e),1)}function en(t,e){for(var r=e||Lr(t);Array.isArray(t)&&1===t.length;)t=t[0],r.shift();for(var n=r.length;1===r[n-1];)n--;return n<r.length&&(t=rn(t,n,0),r.length=n),t}function rn(t,e,r){var n,i;if(r<e){var u=r+1;for(n=0,i=t.length;n<i;n++)t[n]=rn(t[n],e,u)}else for(;Array.isArray(t);)t=t[0];return t}function nn(t,e,r,n){var i=n||Lr(t);if(r)for(var u=0;u<r;u++)t=[t],i.unshift(1);for(t=un(t,e,0);i.length<e;)i.push(1);return t}function un(t,e,r){var n,i;if(Array.isArray(t)){var u=r+1;for(n=0,i=t.length;n<i;n++)t[n]=un(t[n],e,u)}else for(var o=r;o<e;o++)t=[t];return t}function on(t){if(!Array.isArray(t))return t;var e=[];return t.forEach((function t(r){Array.isArray(r)?r.forEach(t):e.push(r)})),e}function an(t,e){for(var r,n=0,i=0;i<t.length;i++){var u=t[i],o=Array.isArray(u);if(0===i&&o&&(n=u.length),o&&u.length!==n)return;var a=o?an(u,e):e(u);if(void 0===r)r=a;else if(r!==a)return"mixed"}return r}function sn(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Rr(t.length,e.length);for(var i=[],u=0;u<t.length;u++)i[u]=sn(t[u],e[u],r,n+1);return i}return t.concat(e)}function cn(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(1===t.length)return t[0];if(t.length>1)return t.slice(1).reduce((function(t,r){return sn(t,r,e,0)}),t[0]);throw new Error("Wrong number of arguments in function concat")}function fn(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=e.map((t=>t.length)),i=Math.max(...n),u=new Array(i).fill(null),o=0;o<e.length;o++)for(var a=e[o],s=n[o],c=0;c<s;c++){var f=i-s+c;a[c]>u[f]&&(u[f]=a[c])}for(var l=0;l<e.length;l++)ln(e[l],u);return u}function ln(t,e){for(var r=e.length,n=t.length,i=0;i<n;i++){var u=r-n+i;if(t[i]<e[u]&&t[i]>1||t[i]>e[u])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(n," with size ").concat(t[i]," to size ").concat(e[u]))}}function hn(t,e){var r=Lr(t);if(Qe(r,e))return t;ln(r,e);var n,i,u,o=fn(r,e),a=o.length,s=[...Array(a-r.length).fill(1),...r],c=function(t){return g([],t)}(t);r.length<a&&(r=Lr(c=Gr(c,s)));for(var f=0;f<a;f++)r[f]<o[f]&&(n=c,i=o[f],u=f,r=Lr(c=cn(...Array(i).fill(n),u)));return c}Rr.prototype=new RangeError,Rr.prototype.constructor=RangeError,Rr.prototype.name="DimensionError",Rr.prototype.isDimensionError=!0,Ur.prototype=new RangeError,Ur.prototype.constructor=RangeError,Ur.prototype.name="IndexError",Ur.prototype.isIndexError=!0;var pn=Je("DenseMatrix",["Matrix"],(t=>{var{Matrix:e}=t;function r(t,e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!he(e))throw new Error("Invalid datatype: "+e);if(de(t))"DenseMatrix"===t.type?(this._data=$e(t._data),this._size=$e(t._size),this._datatype=e||t._datatype):(this._data=t.toArray(),this._size=t.size(),this._datatype=e||t._datatype);else if(t&&pe(t.data)&&pe(t.size))this._data=t.data,this._size=t.size,Vr(this._data,this._size),this._datatype=e||t.datatype;else if(pe(t))this._data=a(t),this._size=Lr(this._data),Vr(this._data,this._size),this._datatype=e;else{if(t)throw new TypeError("Unsupported type of data ("+Ve(t)+")");this._data=[],this._size=[0],this._datatype=e}}function n(t,e,r,i){var u=i===r-1,o=e.dimension(i);return u?o.map((function(e){return Zr(e,t.length),t[e]})).valueOf():o.map((function(u){return Zr(u,t.length),n(t[u],e,r,i+1)})).valueOf()}function i(t,e,r,n,u){var o=u===n-1,a=e.dimension(u);o?a.forEach((function(e,n){Zr(e),t[e]=r[n[0]]})):a.forEach((function(o,a){Zr(o),i(t[o],e,r[a[0]],n,u+1)}))}function u(t,e,r){if(0===e.length){for(var n=t._data;pe(n);)n=n[0];return n}return t._size=e.slice(0),t._data=Yr(t._data,t._size,r),t}function o(t,e,r){for(var n=t._size.slice(0),i=!1;n.length<e.length;)n.push(0),i=!0;for(var o=0,a=e.length;o<a;o++)e[o]>n[o]&&(n[o]=e[o],i=!0);i&&u(t,n,r)}function a(t){return de(t)?a(t.valueOf()):pe(t)?t.map(a):t}return r.prototype=new e,r.prototype.createDenseMatrix=function(t,e){return new r(t,e)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return an(this._data,Ve)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(t,e){return new r(t,e)},r.prototype.subset=function(t,e,u){switch(arguments.length){case 1:return function(t,e){if(!De(e))throw new TypeError("Invalid index");var i=e.isScalar();if(i)return t.get(e.min());var u=e.size();if(u.length!==t._size.length)throw new Rr(u.length,t._size.length);for(var o=e.min(),a=e.max(),s=0,c=t._size.length;s<c;s++)Zr(o[s],t._size[s]),Zr(a[s],t._size[s]);return new r(n(t._data,e,u.length,0),t._datatype)}(this,t);case 2:case 3:return function(t,e,r,n){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var u,a=e.size(),s=e.isScalar();de(r)?(u=r.size(),r=r.valueOf()):u=Lr(r);if(s){if(0!==u.length)throw new TypeError("Scalar expected");t.set(e.min(),r,n)}else{if(!Qe(u,a))try{u=Lr(r=0===u.length?hn([r],a):hn(r,a))}catch(d){}if(a.length<t._size.length)throw new Rr(a.length,t._size.length,"<");if(u.length<a.length){for(var c=0,f=0;1===a[c]&&1===u[c];)c++;for(;1===a[c];)f++,c++;r=nn(r,a.length,f,u)}if(!Qe(a,u))throw new Rr(a,u,">");var l=e.max().map((function(t){return t+1}));o(t,l,n);var h=a.length,p=0;i(t._data,e,r,h,p)}return t}(this,t,e,u);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(t){if(!pe(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Rr(t.length,this._size.length);for(var e=0;e<t.length;e++)Zr(t[e],this._size[e]);for(var r=this._data,n=0,i=t.length;n<i;n++){var u=t[n];Zr(u,r.length),r=r[u]}return r},r.prototype.set=function(t,e,r){if(!pe(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new Rr(t.length,this._size.length,"<");var n,i,u,a=t.map((function(t){return t+1}));o(this,a,r);var s=this._data;for(n=0,i=t.length-1;n<i;n++)Zr(u=t[n],s.length),s=s[u];return Zr(u=t[t.length-1],s.length),s[u]=e,this},r.prototype.resize=function(t,e,r){if(!me(t))throw new TypeError("Array or Matrix expected");var n=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));return u(r?this.clone():this,n,e)},r.prototype.reshape=function(t,e){var r=e?this.clone():this;r._data=Gr(r._data,t);var n=r._size.reduce(((t,e)=>t*e));return r._size=Xr(t,n),r},r.prototype.clone=function(){return new r({data:$e(this._data),size:$e(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(t){var e=this,n=Fr(t),i=function r(i,u){return pe(i)?i.map((function(t,e){return r(t,u.concat(e))})):1===n?t(i):2===n?t(i,u):t(i,u,e)}(this._data,[]);return new r(i,void 0!==this._datatype?an(i,Ve):void 0)},r.prototype.forEach=function(t){var e=this;!function r(n,i){pe(n)?n.forEach((function(t,e){r(t,i.concat(e))})):t(n,i,e)}(this._data,[])},r.prototype[Symbol.iterator]=function*(){yield*function*t(e,r){if(pe(e))for(var n=0;n<e.length;n++)yield*t(e[n],r.concat(n));else yield{value:e,index:r}}(this._data,[])},r.prototype.rows=function(){var t=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var e=this._data;for(var n of e)t.push(new r([n],this._datatype));return t},r.prototype.columns=function(){var t=this,e=[],n=this.size();if(2!==n.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,u=function(n){var u=i.map((t=>[t[n]]));e.push(new r(u,t._datatype))},o=0;o<n[1];o++)u(o);return e},r.prototype.toArray=function(){return $e(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(t){return Pr(this._data,t)},r.prototype.toString=function(){return Pr(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(t){if(t){if(se(t)&&(t=t.toNumber()),!ae(t)||!er(t))throw new TypeError("The parameter k must be an integer number")}else t=0;for(var e=t>0?t:0,n=t<0?-t:0,i=this._size[0],u=this._size[1],o=Math.min(i-n,u-e),a=[],s=0;s<o;s++)a[s]=this._data[s+n][s+e];return new r({data:a,size:[o],datatype:this._datatype})},r.diagonal=function(t,e,n,i){if(!pe(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(se(t)&&(t=t.toNumber()),!ae(t)||!er(t)||t<1)throw new Error("Size values must be positive integers");return t})),n){if(se(n)&&(n=n.toNumber()),!ae(n)||!er(n))throw new TypeError("The parameter k must be an integer number")}else n=0;var u,o=n>0?n:0,a=n<0?-n:0,s=t[0],c=t[1],f=Math.min(s-a,c-o);if(pe(e)){if(e.length!==f)throw new Error("Invalid value array length");u=function(t){return e[t]}}else if(de(e)){var l=e.size();if(1!==l.length||l[0]!==f)throw new Error("Invalid matrix length");u=function(t){return e.get([t])}}else u=function(){return e};i||(i=se(u(0))?u(0).mul(0):0);var h=[];if(t.length>0){h=Yr(h,t,i);for(var p=0;p<f;p++)h[p+a][p+o]=u(p)}return new r({data:h,size:[s,c]})},r.fromJSON=function(t){return new r(t)},r.prototype.swapRows=function(t,e){if(!(ae(t)&&er(t)&&ae(e)&&er(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Zr(t,this._size[0]),Zr(e,this._size[0]),r._swapRows(t,e,this._data),this},r._swapRows=function(t,e,r){var n=r[t];r[t]=r[e],r[e]=n},r}),{isClass:!0}),dn=r(369);function mn(t,e){if(Dn(t)&&vn(t,e))return t[e];if("function"==typeof t[e]&&gn(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}function yn(t,e,r){if(Dn(t)&&vn(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function vn(t,e){return!(!t||"object"!=typeof t)&&(!!Ye(wn,e)||!(e in Object.prototype)&&!(e in Function.prototype))}function gn(t,e){return null!=t&&"function"==typeof t[e]&&(!(Ye(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t))&&(!!Ye(bn,e)||!(e in Object.prototype)&&!(e in Function.prototype)))}function Dn(t){return"object"==typeof t&&t&&t.constructor===Object}var wn={length:!0,name:!0},bn={toString:!0,valueOf:!0,toLocaleString:!0};class xn{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(t){return mn(this.wrappedObject,t)}set(t,e){return yn(this.wrappedObject,t,e),this}has(t){return e=this.wrappedObject,t in e;var e}entries(){return _n(this.keys(),(t=>[t,this.get(t)]))}forEach(t){for(var e of this.keys())t(this.get(e),e,this)}delete(t){delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function _n(t,e){return{next:()=>{var r=t.next();return r.done?r:{value:e(r.value),done:!1}}}}function An(t){return!!t&&(t instanceof Map||t instanceof xn||"function"==typeof t.set&&"function"==typeof t.get&&"function"==typeof t.keys&&"function"==typeof t.has)}var En=function(){return En=dn.create,dn},Fn=Je("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(t){var{BigNumber:e,Complex:r,DenseMatrix:n,Fraction:i}=t,u=En();return u.clear(),u.addTypes([{name:"number",test:ae},{name:"Complex",test:ce},{name:"BigNumber",test:se},{name:"Fraction",test:fe},{name:"Unit",test:le},{name:"identifier",test:t=>he&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(t)},{name:"string",test:he},{name:"Chain",test:We},{name:"Array",test:pe},{name:"Matrix",test:de},{name:"DenseMatrix",test:ye},{name:"SparseMatrix",test:ve},{name:"Range",test:ge},{name:"Index",test:De},{name:"boolean",test:we},{name:"ResultSet",test:be},{name:"Help",test:xe},{name:"function",test:_e},{name:"Date",test:Ae},{name:"RegExp",test:Ee},{name:"null",test:Ce},{name:"undefined",test:Me},{name:"AccessorNode",test:Be},{name:"ArrayNode",test:Ne},{name:"AssignmentNode",test:Se},{name:"BlockNode",test:Oe},{name:"ConditionalNode",test:Ie},{name:"ConstantNode",test:Te},{name:"FunctionNode",test:ze},{name:"FunctionAssignmentNode",test:ke},{name:"IndexNode",test:Pe},{name:"Node",test:je},{name:"ObjectNode",test:qe},{name:"OperatorNode",test:Ke},{name:"ParenthesisNode",test:He},{name:"RangeNode",test:Re},{name:"RelationalNode",test:Ue},{name:"SymbolNode",test:Le},{name:"Map",test:An},{name:"Object",test:Fe}]),u.addConversions([{from:"number",to:"BigNumber",convert:function(t){if(e||Cn(t),t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e(t)}},{from:"number",to:"Complex",convert:function(t){return r||Mn(t),new r(t,0)}},{from:"BigNumber",to:"Complex",convert:function(t){return r||Mn(t),new r(t.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return r||Mn(t),new r(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){i||Bn(t);var e=new i(t);if(e.valueOf()!==t)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return e}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(t){e||Cn(t);try{return new e(t)}catch(r){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){i||Bn(t);try{return new i(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){r||Mn(t);try{return new r(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(t){return e||Cn(t),new e(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return i||Bn(t),new i(+t)}},{from:"boolean",to:"string",convert:function(t){return String(t)}},{from:"Array",to:"Matrix",convert:function(t){return n||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new n(t)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}]),u.onMismatch=(t,e,r)=>{var n=u.createError(t,e,r);if(["wrongType","mismatch"].includes(n.data.category)&&1===e.length&&me(e[0])&&r.some((t=>!t.params.includes(",")))){var i=new TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw i.data=n.data,i}throw n},u.onMismatch=(t,e,r)=>{var n=u.createError(t,e,r);if(["wrongType","mismatch"].includes(n.data.category)&&1===e.length&&me(e[0])&&r.some((t=>!t.params.includes(",")))){var i=new TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw i.data=n.data,i}throw n},u}));function Cn(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Mn(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Bn(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}function Nn(t,e,r){return t&&"function"==typeof t.map?t.map((function(t){return Nn(t,e,r)})):e(t)}var Sn="number",On="number, number";function In(t){return Math.abs(t)}function Tn(t,e){return t+e}function kn(t,e){return t-e}function zn(t,e){return t*e}function Pn(t){return-t}function jn(t){return t}function qn(t){return ur(t)}function Kn(t){return t*t*t}function Hn(t){return Math.exp(t)}function Rn(t){return or(t)}function Un(t,e){if(!er(t)||!er(e))throw new Error("Parameters in function lcm must be integer numbers");if(0===t||0===e)return 0;for(var r,n=t*e;0!==e;)e=t%(r=e),t=r;return Math.abs(n/t)}function Ln(t){return ir(t)}function Wn(t){return nr(t)}function Vn(t){return rr(t)}function $n(t){return t*t}function Zn(t,e){var r,n,i,u=0,o=1,a=1,s=0;if(!er(t)||!er(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)i=t-(n=Math.floor(t/e))*e,r=u,u=o-n*u,o=r,r=a,a=s-n*a,s=r,t=e,e=i;return t<0?[-t,-o,-s]:[t,t?o:0,s]}function Qn(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}In.signature=Sn,Tn.signature=On,kn.signature=On,zn.signature=On,Pn.signature=Sn,jn.signature=Sn,qn.signature=Sn,Kn.signature=Sn,Hn.signature=Sn,Rn.signature=Sn,Un.signature=On,Ln.signature=Sn,Wn.signature=Sn,Vn.signature=Sn,$n.signature=Sn,Zn.signature=On,Qn.signature=On;var Yn=Je("abs",["typed"],(t=>{var{typed:e}=t;return e("abs",{number:In,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t,!0)))})})),Jn="number";function Gn(t){return vr(t)}function Xn(t){return Math.atan(1/t)}function ti(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}function ei(t){return Math.asin(1/t)}function ri(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}function ni(t){return Math.acos(1/t)}function ii(t){var e=1/t,r=Math.sqrt(e*e-1);return Math.log(r+e)}function ui(t){return gr(t)}function oi(t){return Dr(t)}function ai(t){return 1/Math.tan(t)}function si(t){var e=Math.exp(2*t);return(e+1)/(e-1)}function ci(t){return 1/Math.sin(t)}function fi(t){return 0===t?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*rr(t)}function li(t){return 1/Math.cos(t)}function hi(t){return 2/(Math.exp(t)+Math.exp(-t))}function pi(t){return wr(t)}Gn.signature=Jn,Xn.signature=Jn,ti.signature=Jn,ei.signature=Jn,ri.signature=Jn,ni.signature=Jn,ii.signature=Jn,ui.signature=Jn,oi.signature=Jn,ai.signature=Jn,si.signature=Jn,ci.signature=Jn,fi.signature=Jn,li.signature=Jn,hi.signature=Jn,pi.signature=Jn;var di="addScalar",mi=Je(di,["typed"],(t=>{var{typed:e}=t;return e(di,{"number, number":Tn,"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":e.referToSelf((t=>(r,n)=>{if(null===r.value||void 0===r.value)throw new Error("Parameter x contains a unit with undefined value");if(null===n.value||void 0===n.value)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(n))throw new Error("Units do not match");var i=r.clone();return i.value=e.find(t,[i.valueType(),n.valueType()])(i.value,n.value),i.fixPrefix=!1,i}))})})),yi=Je("atan",["typed"],(t=>{var{typed:e}=t;return e("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()}})})),vi=Je("bignumber",["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(t){return new r(t+"")},string:function(t){var e=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(e){var n=e[2],i=r(e[1]),u=new r(2).pow(Number(n));if(i.gt(u.sub(1)))throw new SyntaxError('String "'.concat(t,'" is out of range'));var o=new r(2).pow(Number(n)-1);return i.gte(o)?i.sub(u):i}return new r(t)},BigNumber:function(t){return t},Unit:e.referToSelf((t=>e=>{var r=e.clone();return r.value=t(e.value),r})),Fraction:function(t){return new r(t.n).div(t.d).times(t.s)},null:function(t){return new r(0)},"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})}));var gi="number, number";function Di(t,e){if(!er(t)||!er(e))throw new Error("Integers expected in function bitAnd");return t&e}function wi(t){if(!er(t))throw new Error("Integer expected in function bitNot");return~t}function bi(t,e){if(!er(t)||!er(e))throw new Error("Integers expected in function bitOr");return t|e}function xi(t,e){if(!er(t)||!er(e))throw new Error("Integers expected in function bitXor");return t^e}function _i(t,e){if(!er(t)||!er(e))throw new Error("Integers expected in function leftShift");return t<<e}function Ai(t,e){if(!er(t)||!er(e))throw new Error("Integers expected in function rightArithShift");return t>>e}function Ei(t,e){if(!er(t)||!er(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}Di.signature=gi,wi.signature="number",bi.signature=gi,xi.signature=gi,_i.signature=gi,Ai.signature=gi,Ei.signature=gi;function Fi(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return Fi(t,r)*Fi(r+1,e)}function Ci(t,e){if(!er(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!er(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var r=t-e,n=1,i=2,u=e<r?e:r,o=e<r?r+1:e+1;o<=t;++o)for(n*=o;i<=u&&n%i==0;)n/=i,++i;return i<=u&&(n/=Fi(i,u)),n}Ci.signature="number, number";var Mi=Je("complex",["typed","Complex"],(t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(t){return new r(t,0)},"number, number":function(t,e){return new r(t,e)},"BigNumber, BigNumber":function(t,e){return new r(t.toNumber(),e.toNumber())},Fraction:function(t){return new r(t.valueOf(),0)},Complex:function(t){return t.clone()},string:function(t){return r(t)},null:function(t){return r(0)},Object:function(t){if("re"in t&&"im"in t)return new r(t.re,t.im);if("r"in t&&"phi"in t||"abs"in t&&"arg"in t)return new r(t);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})})),Bi="conj",Ni=Je(Bi,["typed"],(t=>{var{typed:e}=t;return e(Bi,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})})),Si=Je("trigUnit",["typed"],(t=>{var{typed:e}=t;return{Unit:e.referToSelf((t=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,r.valueType())(r.value)}))}})),Oi=Je("cos",["typed"],(t=>{var{typed:e}=t,r=Si({typed:e});return e("cos",{number:Math.cos,"Complex | BigNumber":t=>t.cos()},r)}));function Ii(t,e,r){if(null==r)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}var Ti=Je("compareUnits",["typed"],(t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf((t=>(r,n)=>{if(!r.equalBase(n))throw new Error("Cannot compare units with different base");return e.find(t,[r.valueType(),n.valueType()])(r.value,n.value)}))}})),ki="equalScalar",zi=Je(ki,["typed","config"],(t=>{var{typed:e,config:r}=t,n=Ti({typed:e});return e(ki,{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,e){return yr(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.eq(e)||Ii(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return function(t,e,r){return yr(t.re,e.re,r)&&yr(t.im,e.im,r)}(t,e,r.epsilon)}},n)}));Je(ki,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(ki,{"number, number":function(t,e){return yr(t,e,r.epsilon)}})})),Math.pow(2,53);var Pi="getMatrixDataType",ji=Je(Pi,["typed"],(t=>{var{typed:e}=t;return e(Pi,{Array:function(t){return an(t,Ve)},Matrix:function(t){return t.getDataType()}})})),qi=(Je("hex",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("hex",{"number | BigNumber":function(t){return r(t,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(t,e){return r(t,{notation:"hex",wordSize:e})}})})),Je("im",["typed"],(t=>{var{typed:e}=t;return e("im",{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})}))),Ki="isInteger",Hi=Je(Ki,["typed"],(t=>{var{typed:e}=t;return e(Ki,{number:er,BigNumber:function(t){return t.isInt()},Fraction:function(t){return 1===t.d&&isFinite(t.n)},"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})})),Ri="number";function Ui(t){return t<0}function Li(t){return t>0}function Wi(t){return 0===t}function Vi(t){return Number.isNaN(t)}Ui.signature=Ri,Li.signature=Ri,Wi.signature=Ri,Vi.signature=Ri;var $i="isPositive",Zi=Je($i,["typed"],(t=>{var{typed:e}=t;return e($i,{number:Li,BigNumber:function(t){return!t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s>0&&t.n>0},Unit:e.referToSelf((t=>r=>e.find(t,r.valueType())(r.value))),"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})})),Qi="isZero",Yi=Je(Qi,["typed"],(t=>{var{typed:e}=t;return e(Qi,{number:Wi,BigNumber:function(t){return t.isZero()},Complex:function(t){return 0===t.re&&0===t.im},Fraction:function(t){return 1===t.d&&0===t.n},Unit:e.referToSelf((t=>r=>e.find(t,r.valueType())(r.value))),"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})}));function Ji(t){var e;if(er(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:Fi(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*Ji(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,n=r*t,i=n*t,u=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*n)-571/(2488320*i)+163879/(209018880*u)+5246819/(75246796800*u*t))}--t,e=Xi[0];for(var o=1;o<Xi.length;++o)e+=Xi[o]/(t+o);var a=t+Gi+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,t+.5)*Math.exp(-a)*e}Ji.signature="number";var Gi=4.7421875,Xi=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],tu=.9189385332046728,eu=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function ru(t){if(t<0)return NaN;if(0===t)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-ru(1-t);for(var e=(t-=1)+5+.5,r=eu[0],n=6;n>=1;n--)r+=eu[n]/(t+n);return tu+(t+.5)*Math.log(e)-e+Math.log(r)}ru.signature="number";var nu=Je("multiplyScalar",["typed"],(t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":zn,"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":(t,e)=>e.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,e)=>t.multiply(e)})})),iu="number, number";function uu(t){return!t}function ou(t,e){return!(!t&&!e)}function au(t,e){return!!t!=!!e}function su(t,e){return!(!t||!e)}uu.signature="number",ou.signature=iu,au.signature=iu,su.signature=iu;var cu=Je("number",["typed"],(t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(t){return t},string:function(t){if("NaN"===t)return NaN;var e,r,n=(r=(e=t).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:e,radix:{"0b":2,"0o":8,"0x":16}[r[1]],integerPart:r[2],fractionalPart:r[3]}:null;if(n)return function(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++)r+=parseInt(t.fractionalPart[n],t.radix)/Math.pow(t.radix,n+1);var i=e+r;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is not a valid number');return i}(n);var i=0,u=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);u&&(i=Number(u[2]),t=u[1]);var o=Number(t);if(isNaN(o))throw new SyntaxError('String "'+t+'" is not a valid number');if(u){if(o>2**i-1)throw new SyntaxError('String "'.concat(t,'" is out of range'));o>=2**(i-1)&&(o-=2**i)}return o},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:e.referToSelf((t=>e=>{var r=e.clone();return r.value=t(e.value),r})),null:function(t){return 0},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))});return r.fromJSON=function(t){return parseFloat(t.value)},r})),fu=(Je("oct",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("oct",{"number | BigNumber":function(t){return r(t,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(t,e){return r(t,{notation:"oct",wordSize:e})}})})),r(391)),lu=fu(Date.now());function hu(t){var e,r;return e=null===(r=t)?lu:fu(String(r)),function(){return e()}}function pu(t,e){var r=[];if((t=t.slice(0)).length>1)for(var n=0,i=t.shift();n<i;n++)r.push(pu(t,e));else for(var u=0,o=t.shift();u<o;u++)r.push(e());return r}var du=Je("re",["typed"],(t=>{var{typed:e}=t;return e("re",{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})})),mu="sign",yu=Je(mu,["typed","BigNumber","Fraction","complex"],(t=>{var{typed:e,BigNumber:r,complex:n,Fraction:i}=t;return e(mu,{number:Vn,Complex:function(t){return 0===t.im?n(Vn(t.re)):t.sign()},BigNumber:function(t){return new r(t.cmp(0))},Fraction:function(t){return new i(t.s,1)},"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t,!0))),Unit:e.referToSelf((t=>r=>{if(!r._isDerived()&&0!==r.units[0].unit.offset)throw new TypeError("sign is ambiguous for units with offset");return e.find(t,r.valueType())(r.value)}))})})),vu=Je("sin",["typed"],(t=>{var{typed:e}=t,r=Si({typed:e});return e("sin",{number:Math.sin,"Complex | BigNumber":t=>t.sin()},r)})),gu=Je("SparseMatrix",["typed","equalScalar","Matrix"],(t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(t,e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!he(e))throw new Error("Invalid datatype: "+e);if(de(t))!function(t,e,r){"SparseMatrix"===e.type?(t._values=e._values?$e(e._values):void 0,t._index=$e(e._index),t._ptr=$e(e._ptr),t._size=$e(e._size),t._datatype=r||e._datatype):u(t,e.valueOf(),r||e._datatype)}(this,t,e);else if(t&&pe(t.index)&&pe(t.ptr)&&pe(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=e||t.datatype;else if(pe(t))u(this,t,e);else{if(t)throw new TypeError("Unsupported type of data ("+Ve(t)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=e}}function u(t,n,i){t._values=[],t._index=[],t._ptr=[],t._datatype=i;var u=n.length,o=0,a=r,s=0;if(he(i)&&(a=e.find(r,[i,i])||r,s=e.convert(0,i)),u>0){var c=0;do{t._ptr.push(t._index.length);for(var f=0;f<u;f++){var l=n[f];if(pe(l)){if(0===c&&o<l.length&&(o=l.length),c<l.length){var h=l[c];a(h,s)||(t._values.push(h),t._index.push(f))}}else 0===c&&o<1&&(o=1),a(l,s)||(t._values.push(l),t._index.push(f))}c++}while(c<o)}t._ptr.push(t._index.length),t._size=[u,o]}function o(t,e,r,n){if(r-e==0)return r;for(var i=e;i<r;i++)if(n[i]===t)return i;return e}function a(t,e,r,n,i,u,o){i.splice(t,0,n),u.splice(t,0,e);for(var a=r+1;a<o.length;a++)o[a]++}function s(t,n,i,u){var o=u||0,a=r,s=0;he(t._datatype)&&(a=e.find(r,[t._datatype,t._datatype])||r,s=e.convert(0,t._datatype),o=e.convert(o,t._datatype));var c,f,l,h=!a(o,s),p=t._size[0],d=t._size[1];if(i>d){for(f=d;f<i;f++)if(t._ptr[f]=t._values.length,h)for(c=0;c<p;c++)t._values.push(o),t._index.push(c);t._ptr[i]=t._values.length}else i<d&&(t._ptr.splice(i+1,d-i),t._values.splice(t._ptr[i],t._values.length),t._index.splice(t._ptr[i],t._index.length));if(d=i,n>p){if(h){var m=0;for(f=0;f<d;f++){t._ptr[f]=t._ptr[f]+m,l=t._ptr[f+1]+m;var y=0;for(c=p;c<n;c++,y++)t._values.splice(l+y,0,o),t._index.splice(l+y,0,c),m++}t._ptr[d]=t._values.length}}else if(n<p){var v=0;for(f=0;f<d;f++){t._ptr[f]=t._ptr[f]-v;var g=t._ptr[f],D=t._ptr[f+1]-v;for(l=g;l<D;l++)(c=t._index[l])>n-1&&(t._values.splice(l,1),t._index.splice(l,1),v++)}t._ptr[f]=t._values.length}return t._size[0]=n,t._size[1]=i,t}function c(t,e,r,n,i){var u,o,a=n[0],s=n[1],c=[];for(u=0;u<a;u++)for(c[u]=[],o=0;o<s;o++)c[u][o]=0;for(o=0;o<s;o++)for(var f=r[o],l=r[o+1],h=f;h<l;h++)c[u=e[h]][o]=t?i?$e(t[h]):t[h]:1;return c}return i.prototype=new n,i.prototype.createSparseMatrix=function(t,e){return new i(t,e)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return an(this._values,Ve)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(t,e){return new i(t,e)},i.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},i.prototype.subset=function(t,e,r){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(t,e){if(!De(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var r,n,u,o,a=e.size();if(a.length!==t._size.length)throw new Rr(a.length,t._size.length);var s=e.min(),c=e.max();for(r=0,n=t._size.length;r<n;r++)Zr(s[r],t._size[r]),Zr(c[r],t._size[r]);var f=t._values,l=t._index,h=t._ptr,p=e.dimension(0),d=e.dimension(1),m=[],y=[];p.forEach((function(t,e){y[t]=e[0],m[t]=!0}));var v=f?[]:void 0,g=[],D=[];return d.forEach((function(t){for(D.push(g.length),u=h[t],o=h[t+1];u<o;u++)r=l[u],!0===m[r]&&(g.push(y[r]),v&&v.push(f[u]))})),D.push(g.length),new i({values:v,index:g,ptr:D,size:a,datatype:t._datatype})}(this,t);case 2:case 3:return function(t,e,r,n){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var i,u=e.size(),o=e.isScalar();de(r)?(i=r.size(),r=r.toArray()):i=Lr(r);if(o){if(0!==i.length)throw new TypeError("Scalar expected");t.set(e.min(),r,n)}else{if(1!==u.length&&2!==u.length)throw new Rr(u.length,t._size.length,"<");if(i.length<u.length){for(var a=0,s=0;1===u[a]&&1===i[a];)a++;for(;1===u[a];)s++,a++;r=nn(r,u.length,s,i)}if(!Qe(u,i))throw new Rr(u,i,">");if(1===u.length){e.dimension(0).forEach((function(e,i){Zr(e),t.set([e,0],r[i[0]],n)}))}else{var c=e.dimension(0),f=e.dimension(1);c.forEach((function(e,i){Zr(e),f.forEach((function(u,o){Zr(u),t.set([e,u],r[i[0]][o[0]],n)}))}))}}return t}(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(t){if(!pe(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Rr(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],r=t[1];Zr(e,this._size[0]),Zr(r,this._size[1]);var n=o(e,this._ptr[r],this._ptr[r+1],this._index);return n<this._ptr[r+1]&&this._index[n]===e?this._values[n]:0},i.prototype.set=function(t,n,i){if(!pe(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Rr(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var u=t[0],c=t[1],f=this._size[0],l=this._size[1],h=r,p=0;he(this._datatype)&&(h=e.find(r,[this._datatype,this._datatype])||r,p=e.convert(0,this._datatype)),(u>f-1||c>l-1)&&(s(this,Math.max(u+1,f),Math.max(c+1,l),i),f=this._size[0],l=this._size[1]),Zr(u,f),Zr(c,l);var d=o(u,this._ptr[c],this._ptr[c+1],this._index);return d<this._ptr[c+1]&&this._index[d]===u?h(n,p)?function(t,e,r,n,i){r.splice(t,1),n.splice(t,1);for(var u=e+1;u<i.length;u++)i[u]--}(d,c,this._values,this._index,this._ptr):this._values[d]=n:h(n,p)||a(d,u,c,n,this._values,this._index,this._ptr),this},i.prototype.resize=function(t,e,r){if(!me(t))throw new TypeError("Array or Matrix expected");var n=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));if(2!==n.length)throw new Error("Only two dimensions matrix are supported");return n.forEach((function(t){if(!ae(t)||!er(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Pr(n)+")")})),s(r?this.clone():this,n[0],n[1],e)},i.prototype.reshape=function(t,e){if(!pe(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");t.forEach((function(e){if(!ae(e)||!er(e)||e<=-2||0===e)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Pr(t)+")")}));var r=this._size[0]*this._size[1];if(r!==(t=Xr(t,r))[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return n;for(var i=[],u=0;u<n._ptr.length;u++)for(var s=0;s<n._ptr[u+1]-n._ptr[u];s++)i.push(u);for(var c=n._values.slice(),f=n._index.slice(),l=0;l<n._index.length;l++){var h=f[l],p=i[l],d=h*n._size[1]+p;i[l]=d%t[1],f[l]=Math.floor(d/t[1])}n._values.length=0,n._index.length=0,n._ptr.length=t[1]+1,n._size=t.slice();for(var m=0;m<n._ptr.length;m++)n._ptr[m]=0;for(var y=0;y<c.length;y++){var v=f[y],g=i[y],D=c[y];a(o(v,n._ptr[g],n._ptr[g+1],n._index),v,g,D,n._values,n._index,n._ptr)}return n},i.prototype.clone=function(){return new i({values:this._values?$e(this._values):void 0,index:$e(this._index),ptr:$e(this._ptr),size:$e(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(t,n){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var u=this,o=this._size[0],a=this._size[1],s=Fr(t);return function(t,n,u,o,a,s,c){var f=[],l=[],h=[],p=r,d=0;he(t._datatype)&&(p=e.find(r,[t._datatype,t._datatype])||r,d=e.convert(0,t._datatype));for(var m=function(t,e,r){t=s(t,e,r),p(t,d)||(f.push(t),l.push(e))},y=o;y<=a;y++){h.push(f.length);var v=t._ptr[y],g=t._ptr[y+1];if(c)for(var D=v;D<g;D++){var w=t._index[D];w>=n&&w<=u&&m(t._values[D],w-n,y-o)}else{for(var b={},x=v;x<g;x++){b[t._index[x]]=t._values[x]}for(var _=n;_<=u;_++){m(_ in b?b[_]:0,_-n,y-o)}}}return h.push(f.length),new i({values:f,index:l,ptr:h,size:[u-n+1,a-o+1]})}(this,0,o-1,0,a-1,(function(e,r,n){return 1===s?t(e):2===s?t(e,[r,n]):t(e,[r,n],u)}),n)},i.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this._size[0],n=this._size[1],i=0;i<n;i++){var u=this._ptr[i],o=this._ptr[i+1];if(e)for(var a=u;a<o;a++){var s=this._index[a];t(this._values[a],[s,i],this)}else{for(var c={},f=u;f<o;f++){c[this._index[f]]=this._values[f]}for(var l=0;l<r;l++){t(l in c?c[l]:0,[l,i],this)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var t=this._size[1],e=0;e<t;e++)for(var r=this._ptr[e],n=this._ptr[e+1],i=r;i<n;i++){var u=this._index[i];yield{value:this._values[i],index:[u,e]}}},i.prototype.toArray=function(){return c(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return c(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(t){for(var e=this._size[0],r=this._size[1],n=this.density(),i="Sparse Matrix ["+Pr(e,t)+" x "+Pr(r,t)+"] density: "+Pr(n,t)+"\n",u=0;u<r;u++)for(var o=this._ptr[u],a=this._ptr[u+1],s=o;s<a;s++){i+="\n    ("+Pr(this._index[s],t)+", "+Pr(u,t)+") ==> "+(this._values?Pr(this._values[s],t):"X")}return i},i.prototype.toString=function(){return Pr(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(t){if(t){if(se(t)&&(t=t.toNumber()),!ae(t)||!er(t))throw new TypeError("The parameter k must be an integer number")}else t=0;var e=t>0?t:0,r=t<0?-t:0,n=this._size[0],u=this._size[1],o=Math.min(n-r,u-e),a=[],s=[],c=[];c[0]=0;for(var f=e;f<u&&a.length<o;f++)for(var l=this._ptr[f],h=this._ptr[f+1],p=l;p<h;p++){var d=this._index[p];if(d===f-e+r){a.push(this._values[p]),s[a.length-1]=d-r;break}}return c.push(a.length),new i({values:a,index:s,ptr:c,size:[o,1]})},i.fromJSON=function(t){return new i(t)},i.diagonal=function(t,n,u,o,a){if(!pe(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(se(t)&&(t=t.toNumber()),!ae(t)||!er(t)||t<1)throw new Error("Size values must be positive integers");return t})),u){if(se(u)&&(u=u.toNumber()),!ae(u)||!er(u))throw new TypeError("The parameter k must be an integer number")}else u=0;var s=r,c=0;he(a)&&(s=e.find(r,[a,a])||r,c=e.convert(0,a));var f,l=u>0?u:0,h=u<0?-u:0,p=t[0],d=t[1],m=Math.min(p-h,d-l);if(pe(n)){if(n.length!==m)throw new Error("Invalid value array length");f=function(t){return n[t]}}else if(de(n)){var y=n.size();if(1!==y.length||y[0]!==m)throw new Error("Invalid matrix length");f=function(t){return n.get([t])}}else f=function(){return n};for(var v=[],g=[],D=[],w=0;w<d;w++){D.push(v.length);var b=w-l;if(b>=0&&b<m){var x=f(b);s(x,c)||(g.push(b+h),v.push(x))}}return D.push(v.length),new i({values:v,index:g,ptr:D,size:[p,d]})},i.prototype.swapRows=function(t,e){if(!(ae(t)&&er(t)&&ae(e)&&er(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Zr(t,this._size[0]),Zr(e,this._size[0]),i._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(t,e,r,n,i){for(var u=n[t],o=n[t+1],a=u;a<o;a++)i(r[a],e[a])},i._swapRows=function(t,e,r,n,i,u){for(var a=0;a<r;a++){var s=u[a],c=u[a+1],f=o(t,s,c,i),l=o(e,s,c,i);if(f<c&&l<c&&i[f]===t&&i[l]===e){if(n){var h=n[f];n[f]=n[l],n[l]=h}}else if(f<c&&i[f]===t&&(l>=c||i[l]!==e)){var p=n?n[f]:void 0;i.splice(l,0,e),n&&n.splice(l,0,p),i.splice(l<=f?f+1:f,1),n&&n.splice(l<=f?f+1:f,1)}else if(l<c&&i[l]===e&&(f>=c||i[f]!==t)){var d=n?n[l]:void 0;i.splice(f,0,t),n&&n.splice(f,0,d),i.splice(f<=l?l+1:l,1),n&&n.splice(f<=l?l+1:l,1)}}},i}),{isClass:!0}),Du="subtractScalar",wu=Je(Du,["typed"],(t=>{var{typed:e}=t;return e(Du,{"number, number":kn,"Complex, Complex":function(t,e){return t.sub(e)},"BigNumber, BigNumber":function(t,e){return t.minus(e)},"Fraction, Fraction":function(t,e){return t.sub(e)},"Unit, Unit":e.referToSelf((t=>(r,n)=>{if(null===r.value||void 0===r.value)throw new Error("Parameter x contains a unit with undefined value");if(null===n.value||void 0===n.value)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(n))throw new Error("Units do not match");var i=r.clone();return i.value=e.find(t,[i.valueType(),n.valueType()])(i.value,n.value),i.fixPrefix=!1,i}))})})),bu="apply",xu=Je(bu,["typed","isInteger"],(t=>{var{typed:e,isInteger:r}=t;return e(bu,{"Array | Matrix, number | BigNumber, function":function(t,e,n){if(!r(e))throw new TypeError("Integer number expected for dimension");var i=Array.isArray(t)?Lr(t):t.size();if(e<0||e>=i.length)throw new Ur(e,i.length);return de(t)?t.create(_u(t.valueOf(),e,n)):_u(t,e,n)}})}));function _u(t,e,r){var n,i,u;if(e<=0){if(Array.isArray(t[0])){for(u=function(t){var e,r,n=t.length,i=t[0].length,u=[];for(r=0;r<i;r++){var o=[];for(e=0;e<n;e++)o.push(t[e][r]);u.push(o)}return u}(t),i=[],n=0;n<u.length;n++)i[n]=_u(u[n],e-1,r);return i}return r(t)}for(i=[],n=0;n<t.length;n++)i[n]=_u(t[n],e-1,r);return i}Je("bin",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("bin",{"number | BigNumber":function(t){return r(t,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(t,e){return r(t,{notation:"bin",wordSize:e})}})}));var Au="randomInt",Eu=Je(Au,["typed","config","?on"],(t=>{var{typed:e,config:r,on:n}=t,i=hu(r.randomSeed);return n&&n("config",(function(t,e){t.randomSeed!==e.randomSeed&&(i=hu(t.randomSeed))})),e(Au,{"":()=>o(0,1),number:t=>o(0,t),"number, number":(t,e)=>o(t,e),"Array | Matrix":t=>u(t,0,1),"Array | Matrix, number":(t,e)=>u(t,0,e),"Array | Matrix, number, number":(t,e,r)=>u(t,e,r)});function u(t,e,r){var n=pu(t.valueOf(),(()=>o(e,r)));return de(t)?t.create(n):n}function o(t,e){return Math.floor(t+i()*(e-t))}})),Fu=Je("sqrt",["config","typed","Complex"],(t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:i,Complex:function(t){return t.sqrt()},BigNumber:function(t){return!t.isNegative()||e.predictable?t.sqrt():i(t.toNumber())},Unit:function(t){return t.pow(.5)}});function i(t){return isNaN(t)?NaN:t>=0||e.predictable?Math.sqrt(t):new n(t,0).sqrt()}})),Cu="unaryMinus",Mu=Je(Cu,["typed"],(t=>{var{typed:e}=t;return e(Cu,{number:Pn,"Complex | BigNumber | Fraction":t=>t.neg(),Unit:e.referToSelf((t=>r=>{var n=r.clone();return n.value=e.find(t,n.valueType())(r.value),n})),"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t,!0)))})})),Bu=Je("fraction",["typed","Fraction"],(t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw new Error(t+" cannot be represented as a fraction");return new r(t)},string:function(t){return new r(t)},"number, number":function(t,e){return new r(t,e)},null:function(t){return new r(0)},BigNumber:function(t){return new r(t.toString())},Fraction:function(t){return t},Unit:e.referToSelf((t=>e=>{var r=e.clone();return r.value=t(e.value),r})),Object:function(t){return new r(t)},"Array | Matrix":e.referToSelf((t=>e=>Nn(e,t)))})})),Nu="matrix",Su=Je(Nu,["typed","Matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(Nu,{"":function(){return u([])},string:function(t){return u([],t)},"string, string":function(t,e){return u([],t,e)},Array:function(t){return u(t)},Matrix:function(t){return u(t,t.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(t,e,r){if("dense"===e||"default"===e||void 0===e)return new n(t,r);if("sparse"===e)return new i(t,r);throw new TypeError("Unknown matrix type "+JSON.stringify(e)+".")}}));function Ou(){throw new Error('No "bignumber" implementation available')}function Iu(){throw new Error('No "fraction" implementation available')}function Tu(){throw new Error('No "matrix" implementation available')}var ku=Je("numeric",["number","?bignumber","?fraction"],(t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},u={number:t=>e(t),BigNumber:r?t=>r(t):Ou,Fraction:n?t=>n(t):Iu};return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";if(void 0!==(arguments.length>2?arguments[2]:void 0))throw new SyntaxError("numeric() takes one or two arguments");var r=Ve(t);if(!(r in i))throw new TypeError("Cannot convert "+t+' of type "'+r+'"; valid input types are '+Object.keys(i).join(", "));if(!(e in u))throw new TypeError("Cannot convert "+t+' to type "'+e+'"; valid output types are '+Object.keys(u).join(", "));return e===r?t:u[e](t)}}));var zu="reshape",Pu=Je(zu,["typed","isInteger","matrix"],(t=>{var{typed:e,isInteger:r}=t;return e(zu,{"Matrix, Array":function(t,e){return t.reshape(e,!0)},"Array, Array":function(t,e){return e.forEach((function(t){if(!r(t))throw new TypeError("Invalid size for dimension: "+t)})),Gr(t,e)}})})),ju="size",qu=Je(ju,["typed","config","?matrix"],(t=>{var{typed:e,config:r,matrix:n}=t;return e(ju,{Matrix:function(t){return t.create(t.size())},Array:Lr,string:function(t){return"Array"===r.matrix?[t.length]:n([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return"Array"===r.matrix?[]:n?n([]):Tu()}})})),Ku="squeeze",Hu=Je(Ku,["typed","matrix"],(t=>{var{typed:e,matrix:r}=t;return e(Ku,{Array:function(t){return en($e(t))},Matrix:function(t){var e=en(t.toArray());return Array.isArray(e)?r(e):e},any:function(t){return $e(t)}})})),Ru="transpose",Uu=Je(Ru,["typed","matrix"],(t=>{var{typed:e,matrix:r}=t;return e(Ru,{Array:t=>n(r(t)).valueOf(),Matrix:n,any:$e});function n(t){var e,r=t.size();switch(r.length){case 1:e=t.clone();break;case 2:var n=r[0],i=r[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Pr(r)+")");switch(t.storage()){case"dense":e=function(t,e,r){for(var n,i=t._data,u=[],o=0;o<r;o++){n=u[o]=[];for(var a=0;a<e;a++)n[a]=$e(i[a][o])}return t.createDenseMatrix({data:u,size:[r,e],datatype:t._datatype})}(t,n,i);break;case"sparse":e=function(t,e,r){for(var n,i,u,o=t._values,a=t._index,s=t._ptr,c=o?[]:void 0,f=[],l=[],h=[],p=0;p<e;p++)h[p]=0;for(n=0,i=a.length;n<i;n++)h[a[n]]++;for(var d=0,m=0;m<e;m++)l.push(d),d+=h[m],h[m]=l[m];for(l.push(d),u=0;u<r;u++)for(var y=s[u],v=s[u+1],g=y;g<v;g++){var D=h[a[g]]++;f[D]=u,o&&(c[D]=$e(o[g]))}return t.createSparseMatrix({values:c,index:f,ptr:l,size:[r,e],datatype:t._datatype})}(t,n,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Pr(r)+")")}return e}})),Lu="zeros",Wu=Je(Lu,["typed","config","matrix","BigNumber"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(Lu,{"":function(){return"Array"===r.matrix?u([]):u([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var e=t.pop();return u(t,e)}return"Array"===r.matrix?u(t):u(t,"default")},Array:u,Matrix:function(t){var e=t.storage();return u(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return u(t.valueOf(),e)}});function u(t,e){var r=function(t){var e=!1;return t.forEach((function(t,r,n){se(t)&&(e=!0,n[r]=t.toNumber())})),e}(t),u=r?new i(0):0;if(function(t){t.forEach((function(t){if("number"!=typeof t||!er(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")}))}(t),e){var o=n(e);return t.length>0?o.resize(t,u):o}var a=[];return t.length>0?Yr(a,t,u):a}})),Vu="concat",$u=Je(Vu,["typed","matrix","isInteger"],(t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(Vu,{"...Array | Matrix | number | BigNumber":function(t){var e,i,u=t.length,o=-1,a=!1,s=[];for(e=0;e<u;e++){var c=t[e];if(de(c)&&(a=!0),ae(c)||se(c)){if(e!==u-1)throw new Error("Dimension must be specified as last argument");if(i=o,o=c.valueOf(),!n(o))throw new TypeError("Integer number expected for dimension");if(o<0||e>0&&o>i)throw new Ur(o,i+1)}else{var f=$e(c).valueOf(),l=Lr(f);if(s[e]=f,i=o,o=l.length-1,e>0&&o!==i)throw new Rr(i+1,o+1)}}if(0===s.length)throw new SyntaxError("At least one matrix expected");for(var h=s.shift();s.length;)h=cn(h,s.shift(),o);return a?r(h):h},"...string":function(t){return t.join("")}})})),Zu="ctranspose",Qu=Je(Zu,["typed","transpose","conj"],(t=>{var{typed:e,transpose:r,conj:n}=t;return e(Zu,{any:function(t){return n(r(t))}})})),Yu="diag",Ju=Je(Yu,["typed","matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(Yu,{Array:function(t){return u(t,0,Lr(t),null)},"Array, number":function(t,e){return u(t,e,Lr(t),null)},"Array, BigNumber":function(t,e){return u(t,e.toNumber(),Lr(t),null)},"Array, string":function(t,e){return u(t,0,Lr(t),e)},"Array, number, string":function(t,e,r){return u(t,e,Lr(t),r)},"Array, BigNumber, string":function(t,e,r){return u(t,e.toNumber(),Lr(t),r)},Matrix:function(t){return u(t,0,t.size(),t.storage())},"Matrix, number":function(t,e){return u(t,e,t.size(),t.storage())},"Matrix, BigNumber":function(t,e){return u(t,e.toNumber(),t.size(),t.storage())},"Matrix, string":function(t,e){return u(t,0,t.size(),e)},"Matrix, number, string":function(t,e,r){return u(t,e,t.size(),r)},"Matrix, BigNumber, string":function(t,e,r){return u(t,e.toNumber(),t.size(),r)}});function u(t,e,u,o){if(!er(e))throw new TypeError("Second parameter in function diag must be an integer");var a=e>0?e:0,s=e<0?-e:0;switch(u.length){case 1:return function(t,e,r,u,o,a){var s=[u+o,u+a];if(r&&"sparse"!==r&&"dense"!==r)throw new TypeError("Unknown matrix type ".concat(r,'"'));var c="sparse"===r?i.diagonal(s,t,e):n.diagonal(s,t,e);return null!==r?c:c.valueOf()}(t,e,o,u[0],s,a);case 2:return function(t,e,n,i,u,o){if(de(t)){var a=t.diagonal(e);return null!==n?n!==a.storage()?r(a,n):a:a.valueOf()}for(var s=Math.min(i[0]-u,i[1]-o),c=[],f=0;f<s;f++)c[f]=t[f+u][f+o];return null!==n?r(c):c}(t,e,o,u,s,a)}throw new RangeError("Matrix for function diag must be 2 dimensional")}})),Gu="divideScalar",Xu=Je(Gu,["typed","numeric"],(t=>{var{typed:e,numeric:r}=t;return e(Gu,{"number, number":function(t,e){return t/e},"Complex, Complex":function(t,e){return t.div(e)},"BigNumber, BigNumber":function(t,e){return t.div(e)},"Fraction, Fraction":function(t,e){return t.div(e)},"Unit, number | Complex | Fraction | BigNumber | Unit":(t,e)=>t.divide(e),"number | Fraction | Complex | BigNumber, Unit":(t,e)=>e.divideInto(t)})})),to=Je("matAlgo02xDS0",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i,u){var o=t._data,a=t._size,s=t._datatype||t.getDataType(),c=n._values,f=n._index,l=n._ptr,h=n._size,p=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(a.length!==h.length)throw new Rr(a.length,h.length);if(a[0]!==h[0]||a[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,m=a[0],y=a[1],v=r,g=0,D=i;"string"==typeof s&&s===p&&"mixed"!==s&&(d=s,v=e.find(r,[d,d]),g=e.convert(0,d),D=e.find(i,[d,d]));for(var w=[],b=[],x=[],_=0;_<y;_++){x[_]=b.length;for(var A=l[_],E=l[_+1],F=A;F<E;F++){var C=f[F],M=u?D(c[F],o[C][_]):D(o[C][_],c[F]);v(M,g)||(b.push(C),w.push(M))}}return x[y]=b.length,n.createSparseMatrix({values:w,index:b,ptr:x,size:[m,y],datatype:s===t._datatype&&p===n._datatype?d:void 0})}})),eo=Je("matAlgo03xDSf",["typed"],(t=>{var{typed:e}=t;return function(t,r,n,i){var u=t._data,o=t._size,a=t._datatype||t.getDataType(),s=r._values,c=r._index,f=r._ptr,l=r._size,h=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(o.length!==l.length)throw new Rr(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,d=o[0],m=o[1],y=0,v=n;"string"==typeof a&&a===h&&"mixed"!==a&&(p=a,y=e.convert(0,p),v=e.find(n,[p,p]));for(var g=[],D=0;D<d;D++)g[D]=[];for(var w=[],b=[],x=0;x<m;x++){for(var _=x+1,A=f[x],E=f[x+1],F=A;F<E;F++){var C=c[F];w[C]=i?v(s[F],u[C][x]):v(u[C][x],s[F]),b[C]=_}for(var M=0;M<d;M++)b[M]===_?g[M][x]=w[M]:g[M][x]=i?v(y,u[M][x]):v(u[M][x],y)}return t.createDenseMatrix({data:g,size:[d,m],datatype:a===t._datatype&&h===r._datatype?p:void 0})}})),ro=Je("matAlgo07xSSf",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,i,u){var o=t._size,a=t._datatype||void 0===t._data?t._datatype:t.getDataType(),s=i._size,c=i._datatype||void 0===i._data?i._datatype:i.getDataType();if(o.length!==s.length)throw new Rr(o.length,s.length);if(o[0]!==s[0]||o[1]!==s[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+s+")");var f,l,h,p=o[0],d=o[1],m=0,y=u;"string"==typeof a&&a===c&&"mixed"!==a&&(f=a,m=e.convert(0,f),y=e.find(u,[f,f]));var v=[];for(l=0;l<p;l++)v[l]=[];var g=[],D=[],w=[],b=[];for(h=0;h<d;h++){var x=h+1;for(n(t,h,w,g,x),n(i,h,b,D,x),l=0;l<p;l++){var _=w[l]===x?g[l]:m,A=b[l]===x?D[l]:m;v[l][h]=y(_,A)}}return new r({data:v,size:[p,d],datatype:a===t._datatype&&c===i._datatype?f:void 0})};function n(t,e,r,n,i){for(var u=t._values,o=t._index,a=t._ptr,s=a[e],c=a[e+1];s<c;s++){var f=o[s];r[f]=i,n[f]=u[s]}}})),no=Je("matAlgo11xS0s",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i,u){var o=t._values,a=t._index,s=t._ptr,c=t._size,f=t._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l,h=c[0],p=c[1],d=r,m=0,y=i;"string"==typeof f&&(l=f,d=e.find(r,[l,l]),m=e.convert(0,l),n=e.convert(n,l),y=e.find(i,[l,l]));for(var v=[],g=[],D=[],w=0;w<p;w++){D[w]=g.length;for(var b=s[w],x=s[w+1],_=b;_<x;_++){var A=a[_],E=u?y(n,o[_]):y(o[_],n);d(E,m)||(g.push(A),v.push(E))}}return D[p]=g.length,t.createSparseMatrix({values:v,index:g,ptr:D,size:[h,p],datatype:l})}})),io=Je("matAlgo12xSfs",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,n,i,u){var o=t._values,a=t._index,s=t._ptr,c=t._size,f=t._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l,h=c[0],p=c[1],d=i;"string"==typeof f&&(l=f,n=e.convert(n,l),d=e.find(i,[l,l]));for(var m=[],y=[],v=[],g=0;g<p;g++){for(var D=g+1,w=s[g],b=s[g+1],x=w;x<b;x++){var _=a[x];y[_]=o[x],v[_]=D}for(var A=0;A<h;A++)0===g&&(m[A]=[]),v[A]===D?m[A][g]=u?d(n,y[A]):d(y[A],n):m[A][g]=u?d(n,0):d(0,n)}return new r({data:m,size:[h,p],datatype:l})}})),uo=Je("matAlgo13xDD",["typed"],(t=>{var{typed:e}=t;return function(t,n,i){var u,o=t._data,a=t._size,s=t._datatype,c=n._data,f=n._size,l=n._datatype,h=[];if(a.length!==f.length)throw new Rr(a.length,f.length);for(var p=0;p<a.length;p++){if(a[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");h[p]=a[p]}var d=i;"string"==typeof s&&s===l&&(u=s,d=e.find(i,[u,u]));var m=h.length>0?r(d,0,h,h[0],o,c):[];return t.createDenseMatrix({data:m,size:h,datatype:u})};function r(t,e,n,i,u,o){var a=[];if(e===n.length-1)for(var s=0;s<i;s++)a[s]=t(u[s],o[s]);else for(var c=0;c<i;c++)a[c]=r(t,e+1,n,n[e+1],u[c],o[c]);return a}})),oo=Je("matAlgo14xDs",["typed"],(t=>{var{typed:e}=t;return function(t,n,i,u){var o,a=t._data,s=t._size,c=t._datatype,f=i;"string"==typeof c&&(o=c,n=e.convert(n,o),f=e.find(i,[o,o]));var l=s.length>0?r(f,0,s,s[0],a,n,u):[];return t.createDenseMatrix({data:l,size:$e(s),datatype:o})};function r(t,e,n,i,u,o,a){var s=[];if(e===n.length-1)for(var c=0;c<i;c++)s[c]=a?t(o,u[c]):t(u[c],o);else for(var f=0;f<i;f++)s[f]=r(t,e+1,n,n[e+1],u[f],o,a);return s}})),ao=Je("broadcast",["concat"],(t=>{var{concat:e}=t;return function(t,e){var i=Math.max(t._size.length,e._size.length);if(t._size.length===e._size.length&&t._size.every(((t,r)=>t===e._size[r])))return[t,e];for(var u=r(t._size,i,0),o=r(e._size,i,0),a=[],s=0;s<i;s++)a[s]=Math.max(u[s],o[s]);ln(u,a),ln(o,a);var c=t.clone(),f=e.clone();c._size.length<i?c.reshape(r(c._size,i,1)):f._size.length<i&&f.reshape(r(f._size,i,1));for(var l=0;l<i;l++)c._size[l]<a[l]&&(c=n(c,a[l],l)),f._size[l]<a[l]&&(f=n(f,a[l],l));return[c,f]};function r(t,e,r){return[...Array(e-t.length).fill(r),...t]}function n(t,r,n){return e(...Array(r).fill(t),n)}})),so=Je("matrixAlgorithmSuite",["typed","matrix","concat"],(t=>{var{typed:e,matrix:r,concat:n}=t,i=uo({typed:e}),u=oo({typed:e}),o=ao({concat:n});return function(t){var n,a=t.elop,s=t.SD||t.DS;a?(n={"DenseMatrix, DenseMatrix":(t,e)=>i(...o(t,e),a),"Array, Array":(t,e)=>i(...o(r(t),r(e)),a).valueOf(),"Array, DenseMatrix":(t,e)=>i(...o(r(t),e),a),"DenseMatrix, Array":(t,e)=>i(...o(t,r(e)),a)},t.SS&&(n["SparseMatrix, SparseMatrix"]=(e,r)=>t.SS(...o(e,r),a,!1)),t.DS&&(n["DenseMatrix, SparseMatrix"]=(e,r)=>t.DS(...o(e,r),a,!1),n["Array, SparseMatrix"]=(e,n)=>t.DS(...o(r(e),n),a,!1)),s&&(n["SparseMatrix, DenseMatrix"]=(t,e)=>s(...o(e,t),a,!0),n["SparseMatrix, Array"]=(t,e)=>s(...o(r(e),t),a,!0))):(n={"DenseMatrix, DenseMatrix":e.referToSelf((t=>(e,r)=>i(...o(e,r),t))),"Array, Array":e.referToSelf((t=>(e,n)=>i(...o(r(e),r(n)),t).valueOf())),"Array, DenseMatrix":e.referToSelf((t=>(e,n)=>i(...o(r(e),n),t))),"DenseMatrix, Array":e.referToSelf((t=>(e,n)=>i(...o(e,r(n)),t)))},t.SS&&(n["SparseMatrix, SparseMatrix"]=e.referToSelf((e=>(r,n)=>t.SS(...o(r,n),e,!1)))),t.DS&&(n["DenseMatrix, SparseMatrix"]=e.referToSelf((e=>(r,n)=>t.DS(...o(r,n),e,!1))),n["Array, SparseMatrix"]=e.referToSelf((e=>(n,i)=>t.DS(...o(r(n),i),e,!1)))),s&&(n["SparseMatrix, DenseMatrix"]=e.referToSelf((t=>(e,r)=>s(...o(r,e),t,!0))),n["SparseMatrix, Array"]=e.referToSelf((t=>(e,n)=>s(...o(r(n),e),t,!0)))));var c=t.scalar||"any";(t.Ds||t.Ss)&&(a?(n["DenseMatrix,"+c]=(t,e)=>u(t,e,a,!1),n[c+", DenseMatrix"]=(t,e)=>u(e,t,a,!0),n["Array,"+c]=(t,e)=>u(r(t),e,a,!1).valueOf(),n[c+", Array"]=(t,e)=>u(r(e),t,a,!0).valueOf()):(n["DenseMatrix,"+c]=e.referToSelf((t=>(e,r)=>u(e,r,t,!1))),n[c+", DenseMatrix"]=e.referToSelf((t=>(e,r)=>u(r,e,t,!0))),n["Array,"+c]=e.referToSelf((t=>(e,n)=>u(r(e),n,t,!1).valueOf())),n[c+", Array"]=e.referToSelf((t=>(e,n)=>u(r(n),e,t,!0).valueOf()))));var f=void 0!==t.sS?t.sS:t.Ss;return a?(t.Ss&&(n["SparseMatrix,"+c]=(e,r)=>t.Ss(e,r,a,!1)),f&&(n[c+", SparseMatrix"]=(t,e)=>f(e,t,a,!0))):(t.Ss&&(n["SparseMatrix,"+c]=e.referToSelf((e=>(r,n)=>t.Ss(r,n,e,!1)))),f&&(n[c+", SparseMatrix"]=e.referToSelf((t=>(e,r)=>f(r,e,t,!0))))),a&&a.signatures&&Ze(n,a.signatures),n}})),co="equal",fo=Je(co,["typed","matrix","equalScalar","DenseMatrix","concat"],(t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i,concat:u}=t,o=eo({typed:e}),a=ro({typed:e,DenseMatrix:i}),s=io({typed:e,DenseMatrix:i}),c=so({typed:e,matrix:r,concat:u});return e(co,lo({typed:e,equalScalar:n}),c({elop:n,SS:a,DS:o,Ss:s}))})),lo=Je(co,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return e(co,{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:r(t,e)}})})),ho="flatten",po=Je(ho,["typed","matrix"],(t=>{var{typed:e,matrix:r}=t;return e(ho,{Array:function(t){return on(t)},Matrix:function(t){var e=on(t.toArray());return r(e)}})})),mo="identity",yo=Je(mo,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:u,SparseMatrix:o}=t;return e(mo,{"":function(){return"Matrix"===r.matrix?n([]):[]},string:function(t){return n(t)},"number | BigNumber":function(t){return s(t,t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, string":function(t,e){return s(t,t,e)},"number | BigNumber, number | BigNumber":function(t,e){return s(t,e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,r){return s(t,e,r)},Array:function(t){return a(t)},"Array, string":function(t,e){return a(t,e)},Matrix:function(t){return a(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return a(t.valueOf(),e)}});function a(t,e){switch(t.length){case 0:return e?n(e):[];case 1:return s(t[0],t[0],e);case 2:return s(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function s(t,e,r){var n=se(t)||se(e)?i:null;if(se(t)&&(t=t.toNumber()),se(e)&&(e=e.toNumber()),!er(t)||t<1)throw new Error("Parameters in function identity must be positive integers");if(!er(e)||e<1)throw new Error("Parameters in function identity must be positive integers");var a=n?new i(1):1,s=n?new n(0):0,c=[t,e];if(r){if("sparse"===r)return o.diagonal(c,a,0,s);if("dense"===r)return u.diagonal(c,a,0,s);throw new TypeError('Unknown matrix type "'.concat(r,'"'))}for(var f=Yr([],c,s),l=t<e?t:e,h=0;h<l;h++)f[h][h]=a;return f}})),vo="largerEq",go=Je(vo,["typed","config","matrix","DenseMatrix","concat"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:u}=t,o=eo({typed:e}),a=ro({typed:e,DenseMatrix:i}),s=io({typed:e,DenseMatrix:i}),c=so({typed:e,matrix:n,concat:u}),f=Ti({typed:e});return e(vo,Do({typed:e,config:r}),{"boolean, boolean":(t,e)=>t>=e,"BigNumber, BigNumber":function(t,e){return t.gte(e)||Ii(t,e,r.epsilon)},"Fraction, Fraction":(t,e)=>-1!==t.compare(e),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:a,DS:o,Ss:s}))})),Do=Je(vo,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(vo,{"number, number":function(t,e){return t>=e||yr(t,e,r.epsilon)}})})),wo=Je("matAlgo01xDSid",["typed"],(t=>{var{typed:e}=t;return function(t,r,n,i){var u=t._data,o=t._size,a=t._datatype||t.getDataType(),s=r._values,c=r._index,f=r._ptr,l=r._size,h=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(o.length!==l.length)throw new Rr(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,d,m=o[0],y=o[1],v="string"==typeof a&&"mixed"!==a&&a===h?a:void 0,g=v?e.find(n,[v,v]):n,D=[];for(p=0;p<m;p++)D[p]=[];var w=[],b=[];for(d=0;d<y;d++){for(var x=d+1,_=f[d],A=f[d+1],E=_;E<A;E++)w[p=c[E]]=i?g(s[E],u[p][d]):g(u[p][d],s[E]),b[p]=x;for(p=0;p<m;p++)b[p]===x?D[p][d]=w[p]:D[p][d]=u[p][d]}return t.createDenseMatrix({data:D,size:[m,y],datatype:a===t._datatype&&h===r._datatype?v:void 0})}})),bo=Je("matAlgo10xSids",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,n,i,u){var o=t._values,a=t._index,s=t._ptr,c=t._size,f=t._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var l,h=c[0],p=c[1],d=i;"string"==typeof f&&(l=f,n=e.convert(n,l),d=e.find(i,[l,l]));for(var m=[],y=[],v=[],g=0;g<p;g++){for(var D=g+1,w=s[g],b=s[g+1],x=w;x<b;x++){var _=a[x];y[_]=o[x],v[_]=D}for(var A=0;A<h;A++)0===g&&(m[A]=[]),v[A]===D?m[A][g]=u?d(n,y[A]):d(y[A],n):m[A][g]=n}return new r({data:m,size:[h,p],datatype:l})}}));function xo(t){var{DenseMatrix:e}=t;return function(t,r,n){var i=t.size();if(2!==i.length)throw new RangeError("Matrix must be two dimensional (size: "+Pr(i)+")");var u=i[0];if(u!==i[1])throw new RangeError("Matrix must be square (size: "+Pr(i)+")");var o=[];if(de(r)){var a=r.size(),s=r._data;if(1===a.length){if(a[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var c=0;c<u;c++)o[c]=[s[c]];return new e({data:o,size:[u,1],datatype:r._datatype})}if(2===a.length){if(a[0]!==u||1!==a[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(ye(r)){if(n){o=[];for(var f=0;f<u;f++)o[f]=[s[f][0]];return new e({data:o,size:[u,1],datatype:r._datatype})}return r}if(ve(r)){for(var l=0;l<u;l++)o[l]=[0];for(var h=r._values,p=r._index,d=r._ptr,m=d[1],y=d[0];y<m;y++){o[p[y]][0]=h[y]}return new e({data:o,size:[u,1],datatype:r._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(pe(r)){var v=Lr(r);if(1===v.length){if(v[0]!==u)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var g=0;g<u;g++)o[g]=[r[g]];return new e({data:o,size:[u,1]})}if(2===v.length){if(v[0]!==u||1!==v[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var D=0;D<u;D++)o[D]=[r[D][0]];return new e({data:o,size:[u,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var _o="matrixFromColumns",Ao=Je(_o,["typed","matrix","flatten","size"],(t=>{var{typed:e,matrix:r,flatten:n,size:i}=t;return e(_o,{"...Array":function(t){return u(t)},"...Matrix":function(t){return r(u(t.map((t=>t.toArray()))))}});function u(t){if(0===t.length)throw new TypeError("At least one column is needed to construct a matrix.");for(var e=o(t[0]),r=[],i=0;i<e;i++)r[i]=[];for(var u of t){var a=o(u);if(a!==e)throw new TypeError("The vectors had different length: "+(0|e)+"  "+(0|a));for(var s=n(u),c=0;c<e;c++)r[c].push(s[c])}return r}function o(t){var e=i(t);if(1===e.length)return e[0];if(2===e.length){if(1===e[0])return e[1];if(1===e[1])return e[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}})),Eo=Je("ones",["typed","config","matrix","BigNumber"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e("ones",{"":function(){return"Array"===r.matrix?u([]):u([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var e=t.pop();return u(t,e)}return"Array"===r.matrix?u(t):u(t,"default")},Array:u,Matrix:function(t){var e=t.storage();return u(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return u(t.valueOf(),e)}});function u(t,e){var r=function(t){var e=!1;return t.forEach((function(t,r,n){se(t)&&(e=!0,n[r]=t.toNumber())})),e}(t),u=r?new i(1):1;if(function(t){t.forEach((function(t){if("number"!=typeof t||!er(t)||t<0)throw new Error("Parameters in function ones must be positive integers")}))}(t),e){var o=n(e);return t.length>0?o.resize(t,u):o}var a=[];return t.length>0?Yr(a,t,u):a}})),Fo=Je("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],(t=>{var{typed:e,matrix:r,zeros:n,identity:i,isZero:u,equal:o,sign:a,sqrt:s,conj:c,unaryMinus:f,addScalar:l,divideScalar:h,multiplyScalar:p,subtractScalar:d,complex:m}=t;return g(e("qr",{DenseMatrix:function(t){return v(t)},SparseMatrix:function(t){return function(t){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(t){var e=v(r(t));return{Q:e.Q.valueOf(),R:e.R.valueOf()}}}),{_denseQRimpl:y});function y(t){var e,r,m,y=t._size[0],v=t._size[1],g=i([y],"dense"),D=g._data,w=t.clone(),b=w._data,x=n([y],"");for(m=0;m<Math.min(v,y);++m){var _=b[m][m],A=f(o(_,0)?1:a(_)),E=c(A),F=0;for(e=m;e<y;e++)F=l(F,p(b[e][m],c(b[e][m])));var C=p(A,s(F));if(!u(C)){var M=d(_,C);for(x[m]=1,e=m+1;e<y;e++)x[e]=h(b[e][m],M);var B=f(c(h(M,C))),N=void 0;for(r=m;r<v;r++){for(N=0,e=m;e<y;e++)N=l(N,p(c(x[e]),b[e][r]));for(N=p(N,B),e=m;e<y;e++)b[e][r]=p(d(b[e][r],p(x[e],N)),E)}for(e=0;e<y;e++){for(N=0,r=m;r<y;r++)N=l(N,p(D[e][r],x[r]));for(N=p(N,B),r=m;r<y;++r)D[e][r]=h(d(D[e][r],p(N,c(x[r]))),E)}}}return{Q:g,R:w,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function v(t){var e=y(t),r=e.R._data;if(t._data.length>0)for(var n="Complex"===r[0][0].type?m(0):0,i=0;i<r.length;++i)for(var u=0;u<i&&u<(r[0]||[]).length;++u)r[i][u]=n;return e}}));function Co(t,e,r,n){if(!(this instanceof Co))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(null!=n?"-"+n:"")+" expected)",this.stack=(new Error).stack}Co.prototype=new Error,Co.prototype.constructor=Error,Co.prototype.name="ArgumentsError",Co.prototype.isArgumentsError=!0;var Mo="smaller",Bo=Je(Mo,["typed","config","matrix","DenseMatrix","concat"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:u}=t,o=eo({typed:e}),a=ro({typed:e,DenseMatrix:i}),s=io({typed:e,DenseMatrix:i}),c=so({typed:e,matrix:n,concat:u}),f=Ti({typed:e});return e(Mo,No({typed:e,config:r}),{"boolean, boolean":(t,e)=>t<e,"BigNumber, BigNumber":function(t,e){return t.lt(e)&&!Ii(t,e,r.epsilon)},"Fraction, Fraction":(t,e)=>-1===t.compare(e),"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:a,DS:o,Ss:s}))})),No=Je(Mo,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(Mo,{"number, number":function(t,e){return t<e&&!yr(t,e,r.epsilon)}})})),So=Je("matAlgo05xSfSf",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var u=t._values,o=t._index,a=t._ptr,s=t._size,c=t._datatype||void 0===t._data?t._datatype:t.getDataType(),f=n._values,l=n._index,h=n._ptr,p=n._size,d=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(s.length!==p.length)throw new Rr(s.length,p.length);if(s[0]!==p[0]||s[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+p+")");var m,y=s[0],v=s[1],g=r,D=0,w=i;"string"==typeof c&&c===d&&"mixed"!==c&&(m=c,g=e.find(r,[m,m]),D=e.convert(0,m),w=e.find(i,[m,m]));var b,x,_,A,E=u&&f?[]:void 0,F=[],C=[],M=E?[]:void 0,B=E?[]:void 0,N=[],S=[];for(x=0;x<v;x++){C[x]=F.length;var O=x+1;for(_=a[x],A=a[x+1];_<A;_++)b=o[_],F.push(b),N[b]=O,M&&(M[b]=u[_]);for(_=h[x],A=h[x+1];_<A;_++)N[b=l[_]]!==O&&F.push(b),S[b]=O,B&&(B[b]=f[_]);if(E)for(_=C[x];_<F.length;){var I=N[b=F[_]],T=S[b];if(I===O||T===O){var k=w(I===O?M[b]:D,T===O?B[b]:D);g(k,D)?F.splice(_,1):(E.push(k),_++)}}}return C[v]=F.length,t.createSparseMatrix({values:E,index:F,ptr:C,size:[y,v],datatype:c===t._datatype&&d===n._datatype?m:void 0})}})),Oo="subtract",Io=Je(Oo,["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],(t=>{var{typed:e,matrix:r,equalScalar:n,subtractScalar:i,unaryMinus:u,DenseMatrix:o,concat:a}=t,s=wo({typed:e}),c=eo({typed:e}),f=So({typed:e,equalScalar:n}),l=bo({typed:e,DenseMatrix:o}),h=io({typed:e,DenseMatrix:o}),p=so({typed:e,matrix:r,concat:a});return e(Oo,{"any, any":i},p({elop:i,SS:f,DS:s,SD:c,Ss:h,sS:l}))})),To="unequal",ko=(Je(To,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return e(To,{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:!r(t,e)}})})),"usolve"),zo=Je(ko,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:u,equalScalar:o,DenseMatrix:a}=t,s=xo({DenseMatrix:a});return e(ko,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=(e=s(t,e,!0))._data,c=t._size[0],f=t._size[1],l=t._values,h=t._index,p=t._ptr,d=[],m=f-1;m>=0;m--){var y=r[m][0]||0;if(o(y,0))d[m]=[0];else{for(var v=0,g=[],D=[],w=p[m],b=p[m+1]-1;b>=w;b--){var x=h[b];x===m?v=l[b]:x<m&&(g.push(l[b]),D.push(x))}if(o(v,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var _=n(y,v),A=0,E=D.length;A<E;A++){var F=D[A];r[F]=[u(r[F][0],i(_,g[A]))]}d[m]=[_]}}return new a({data:d,size:[c,1]})}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return c(t,e)},"Array, Array | Matrix":function(t,e){return c(r(t),e).valueOf()}});function c(t,e){for(var r=(e=s(t,e,!0))._data,c=t._size[0],f=t._size[1],l=[],h=t._data,p=f-1;p>=0;p--){var d=r[p][0]||0,m=void 0;if(o(d,0))m=0;else{var y=h[p][p];if(o(y,0))throw new Error("Linear system cannot be solved since matrix is singular");m=n(d,y);for(var v=p-1;v>=0;v--)r[v]=[u(r[v][0]||0,i(m,h[v][p]))]}l[p]=[m]}return new a({data:l,size:[c,1]})}})),Po=Je("matAlgo04xSidSid",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var u=t._values,o=t._index,a=t._ptr,s=t._size,c=t._datatype||void 0===t._data?t._datatype:t.getDataType(),f=n._values,l=n._index,h=n._ptr,p=n._size,d=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(s.length!==p.length)throw new Rr(s.length,p.length);if(s[0]!==p[0]||s[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+p+")");var m,y=s[0],v=s[1],g=r,D=0,w=i;"string"==typeof c&&c===d&&"mixed"!==c&&(m=c,g=e.find(r,[m,m]),D=e.convert(0,m),w=e.find(i,[m,m]));var b,x,_,A,E,F=u&&f?[]:void 0,C=[],M=[],B=u&&f?[]:void 0,N=u&&f?[]:void 0,S=[],O=[];for(x=0;x<v;x++){M[x]=C.length;var I=x+1;for(A=a[x],E=a[x+1],_=A;_<E;_++)b=o[_],C.push(b),S[b]=I,B&&(B[b]=u[_]);for(A=h[x],E=h[x+1],_=A;_<E;_++)if(S[b=l[_]]===I){if(B){var T=w(B[b],f[_]);g(T,D)?S[b]=null:B[b]=T}}else C.push(b),O[b]=I,N&&(N[b]=f[_]);if(B&&N)for(_=M[x];_<C.length;)S[b=C[_]]===I?(F[_]=B[b],_++):O[b]===I?(F[_]=N[b],_++):C.splice(_,1)}return M[v]=C.length,t.createSparseMatrix({values:F,index:C,ptr:M,size:[y,v],datatype:c===t._datatype&&d===n._datatype?m:void 0})}})),jo=Je("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],(t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:u,SparseMatrix:o,concat:a}=t,s=wo({typed:e}),c=Po({typed:e,equalScalar:i}),f=bo({typed:e,DenseMatrix:u}),l=so({typed:e,matrix:r,concat:a});return e("add",{"any, any":n,"any, any, ...any":e.referToSelf((t=>(e,r,n)=>{for(var i=t(e,r),u=0;u<n.length;u++)i=t(i,n[u]);return i}))},l({elop:n,DS:s,SS:c,Ss:f}))})),qo=Je("matAlgo09xS0Sf",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var u=t._values,o=t._index,a=t._ptr,s=t._size,c=t._datatype||void 0===t._data?t._datatype:t.getDataType(),f=n._values,l=n._index,h=n._ptr,p=n._size,d=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(s.length!==p.length)throw new Rr(s.length,p.length);if(s[0]!==p[0]||s[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+p+")");var m,y=s[0],v=s[1],g=r,D=0,w=i;"string"==typeof c&&c===d&&"mixed"!==c&&(m=c,g=e.find(r,[m,m]),D=e.convert(0,m),w=e.find(i,[m,m]));var b,x,_,A,E,F=u&&f?[]:void 0,C=[],M=[],B=F?[]:void 0,N=[];for(x=0;x<v;x++){M[x]=C.length;var S=x+1;if(B)for(A=h[x],E=h[x+1],_=A;_<E;_++)N[b=l[_]]=S,B[b]=f[_];for(A=a[x],E=a[x+1],_=A;_<E;_++)if(b=o[_],B){var O=N[b]===S?B[b]:D,I=w(u[_],O);g(I,D)||(C.push(b),F.push(I))}else C.push(b)}return M[v]=C.length,t.createSparseMatrix({values:F,index:C,ptr:M,size:[y,v],datatype:c===t._datatype&&d===n._datatype?m:void 0})}}));Hr.signature="any, any";var Ko=Je("dot",["typed","addScalar","multiplyScalar","conj","size"],(t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:u}=t;return e("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(t,u){var s=o(t,u),c=de(t)?t._data:t,f=de(t)?t._datatype||t.getDataType():void 0,l=de(u)?u._data:u,h=de(u)?u._datatype||u.getDataType():void 0,p=2===a(t).length,d=2===a(u).length,m=r,y=n;if(f&&h&&f===h&&"string"==typeof f&&"mixed"!==f){var v=f;m=e.find(r,[v,v]),y=e.find(n,[v,v])}if(!p&&!d){for(var g=y(i(c[0]),l[0]),D=1;D<s;D++)g=m(g,y(i(c[D]),l[D]));return g}if(!p&&d){for(var w=y(i(c[0]),l[0][0]),b=1;b<s;b++)w=m(w,y(i(c[b]),l[b][0]));return w}if(p&&!d){for(var x=y(i(c[0][0]),l[0]),_=1;_<s;_++)x=m(x,y(i(c[_][0]),l[_]));return x}if(p&&d){for(var A=y(i(c[0][0]),l[0][0]),E=1;E<s;E++)A=m(A,y(i(c[E][0]),l[E][0]));return A}},"SparseMatrix, SparseMatrix":function(t,e){o(t,e);var i=t._index,u=t._values,a=e._index,s=e._values,c=0,f=r,l=n,h=0,p=0;for(;h<i.length&&p<a.length;){var d=i[h],m=a[p];d<m?h++:d>m?p++:d===m&&(c=f(c,l(u[h],s[p])),h++,p++)}return c}});function o(t,e){var r,n,i=a(t),u=a(e);if(1===i.length)r=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");r=i[0]}if(1===u.length)n=u[0];else{if(2!==u.length||1!==u[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+u.join(", ")+")");n=u[0]}if(r!==n)throw new RangeError("Vectors must have equal length ("+r+" != "+n+")");if(0===r)throw new RangeError("Cannot calculate the dot product of empty vectors");return r}function a(t){return de(t)?t.size():u(t)}})),Ho="number | BigNumber | Fraction | Matrix | Array";"".concat(Ho,", ").concat(Ho,", ...").concat(Ho);var Ro=Je("ImmutableDenseMatrix",["smaller","DenseMatrix"],(t=>{var{smaller:e,DenseMatrix:r}=t;function n(t,e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!he(e))throw new Error("Invalid datatype: "+e);if(de(t)||pe(t)){var i=new r(t,e);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(t&&pe(t.data)&&pe(t.size))this._data=t.data,this._size=t.size,this._datatype=t.datatype,this._min=void 0!==t.min?t.min:null,this._max=void 0!==t.max?t.max:null;else{if(t)throw new TypeError("Unsupported type of data ("+Ve(t)+")");this._data=[],this._size=[0],this._datatype=e,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(t){switch(arguments.length){case 1:var e=r.prototype.subset.call(this,t);return de(e)?new n({data:e._data,size:e._size,datatype:e._datatype}):e;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:$e(this._data),size:$e(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(t){return new n(t)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(null===this._min){var t=null;this.forEach((function(r){(null===t||e(r,t))&&(t=r)})),this._min=null!==t?t:void 0}return this._min},n.prototype.max=function(){if(null===this._max){var t=null;this.forEach((function(r){(null===t||e(t,r))&&(t=r)})),this._max=null!==t?t:void 0}return this._max},n}),{isClass:!0}),Uo=Je("Index",["ImmutableDenseMatrix","getMatrixDataType"],(t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:r}=t;function n(t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var e=0,u=arguments.length;e<u;e++){var o=arguments[e],a=pe(o),s=de(o),c=null;if(ge(o))this._dimensions.push(o),this._isScalar=!1;else if(a||s){var f=void 0;"boolean"===r(o)?(a&&(f=i(Lo(o).valueOf())),s&&(f=i(Lo(o._data).valueOf())),c=o.valueOf().length):f=i(o.valueOf()),this._dimensions.push(f);var l=f.size();1===l.length&&1===l[0]&&null===c||(this._isScalar=!1)}else if("number"==typeof o)this._dimensions.push(i([o]));else{if("string"!=typeof o)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(o)}this._sourceSize.push(c)}}function i(t){for(var r=0,n=t.length;r<n;r++)if("number"!=typeof t[r]||!er(t[r]))throw new TypeError("Index parameters must be positive integer numbers");return new e(t)}return n.prototype.type="Index",n.prototype.isIndex=!0,n.prototype.clone=function(){var t=new n;return t._dimensions=$e(this._dimensions),t._isScalar=this._isScalar,t._sourceSize=this._sourceSize,t},n.create=function(t){var e=new n;return n.apply(e,t),e},n.prototype.size=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?1:n.size()[0]}return t},n.prototype.max=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.max()}return t},n.prototype.min=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.min()}return t},n.prototype.forEach=function(t){for(var e=0,r=this._dimensions.length;e<r;e++)t(this._dimensions[e],e,this)},n.prototype.dimension=function(t){return this._dimensions[t]||null},n.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t.push("string"==typeof n?n:n.toArray())}return t},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];"string"==typeof n?t.push(JSON.stringify(n)):t.push(n.toString())}return"["+t.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(t){return n.create(t.dimensions)},n}),{isClass:!0});function Lo(t){var e=[];return t.forEach(((t,r)=>{t&&e.push(r)})),e}var Wo="larger",Vo=Je(Wo,["typed","config","matrix","DenseMatrix","concat"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:u}=t,o=eo({typed:e}),a=ro({typed:e,DenseMatrix:i}),s=io({typed:e,DenseMatrix:i}),c=so({typed:e,matrix:n,concat:u}),f=Ti({typed:e});return e(Wo,$o({typed:e,config:r}),{"boolean, boolean":(t,e)=>t>e,"BigNumber, BigNumber":function(t,e){return t.gt(e)&&!Ii(t,e,r.epsilon)},"Fraction, Fraction":(t,e)=>1===t.compare(e),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:a,DS:o,Ss:s}))})),$o=Je(Wo,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(Wo,{"number, number":function(t,e){return t>e&&!yr(t,e,r.epsilon)}})})),Zo="multiply",Qo=Je(Zo,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:u,dot:o}=t,a=no({typed:e,equalScalar:u}),s=oo({typed:e});function c(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}}function f(t,r){if("dense"!==r.storage())throw new Error("Support for SparseMatrix not implemented");return function(t,r){var u,o=t._data,a=t._size,s=t._datatype||t.getDataType(),c=r._data,f=r._size,l=r._datatype||r.getDataType(),h=a[0],p=f[1],d=n,m=i;s&&l&&s===l&&"string"==typeof s&&"mixed"!==s&&(u=s,d=e.find(n,[u,u]),m=e.find(i,[u,u]));for(var y=[],v=0;v<p;v++){for(var g=m(o[0],c[0][v]),D=1;D<h;D++)g=d(g,m(o[D],c[D][v]));y[v]=g}return t.createDenseMatrix({data:y,size:[p],datatype:s===t._datatype&&l===r._datatype?u:void 0})}(t,r)}var l=e("_multiplyMatrixVector",{"DenseMatrix, any":function(t,r){var u,o=t._data,a=t._size,s=t._datatype||t.getDataType(),c=r._data,f=r._datatype||r.getDataType(),l=a[0],h=a[1],p=n,d=i;s&&f&&s===f&&"string"==typeof s&&"mixed"!==s&&(u=s,p=e.find(n,[u,u]),d=e.find(i,[u,u]));for(var m=[],y=0;y<l;y++){for(var v=o[y],g=d(v[0],c[0]),D=1;D<h;D++)g=p(g,d(v[D],c[D]));m[y]=g}return t.createDenseMatrix({data:m,size:[l],datatype:s===t._datatype&&f===r._datatype?u:void 0})},"SparseMatrix, any":function(t,r){var o=t._values,a=t._index,s=t._ptr,c=t._datatype||void 0===t._data?t._datatype:t.getDataType();if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var f,l=r._data,h=r._datatype||r.getDataType(),p=t._size[0],d=r._size[0],m=[],y=[],v=[],g=n,D=i,w=u,b=0;c&&h&&c===h&&"string"==typeof c&&"mixed"!==c&&(f=c,g=e.find(n,[f,f]),D=e.find(i,[f,f]),w=e.find(u,[f,f]),b=e.convert(0,f));var x=[],_=[];v[0]=0;for(var A=0;A<d;A++){var E=l[A];if(!w(E,b))for(var F=s[A],C=s[A+1],M=F;M<C;M++){var B=a[M];_[B]?x[B]=g(x[B],D(E,o[M])):(_[B]=!0,y.push(B),x[B]=D(E,o[M]))}}for(var N=y.length,S=0;S<N;S++){var O=y[S];m[S]=x[O]}return v[1]=y.length,t.createSparseMatrix({values:m,index:y,ptr:v,size:[p,1],datatype:c===t._datatype&&h===r._datatype?f:void 0})}}),h=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(t,r){var u,o=t._data,a=t._size,s=t._datatype||t.getDataType(),c=r._data,f=r._size,l=r._datatype||r.getDataType(),h=a[0],p=a[1],d=f[1],m=n,y=i;s&&l&&s===l&&"string"==typeof s&&"mixed"!==s&&"mixed"!==s&&(u=s,m=e.find(n,[u,u]),y=e.find(i,[u,u]));for(var v=[],g=0;g<h;g++){var D=o[g];v[g]=[];for(var w=0;w<d;w++){for(var b=y(D[0],c[0][w]),x=1;x<p;x++)b=m(b,y(D[x],c[x][w]));v[g][w]=b}}return t.createDenseMatrix({data:v,size:[h,d],datatype:s===t._datatype&&l===r._datatype?u:void 0})},"DenseMatrix, SparseMatrix":function(t,r){var o=t._data,a=t._size,s=t._datatype||t.getDataType(),c=r._values,f=r._index,l=r._ptr,h=r._size,p=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(!c)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var d,m=a[0],y=h[1],v=n,g=i,D=u,w=0;s&&p&&s===p&&"string"==typeof s&&"mixed"!==s&&(d=s,v=e.find(n,[d,d]),g=e.find(i,[d,d]),D=e.find(u,[d,d]),w=e.convert(0,d));for(var b=[],x=[],_=[],A=r.createSparseMatrix({values:b,index:x,ptr:_,size:[m,y],datatype:s===t._datatype&&p===r._datatype?d:void 0}),E=0;E<y;E++){_[E]=x.length;var F=l[E],C=l[E+1];if(C>F)for(var M=0,B=0;B<m;B++){for(var N=B+1,S=void 0,O=F;O<C;O++){var I=f[O];M!==N?(S=g(o[B][I],c[O]),M=N):S=v(S,g(o[B][I],c[O]))}M!==N||D(S,w)||(x.push(B),b.push(S))}}return _[y]=x.length,A},"SparseMatrix, DenseMatrix":function(t,r){var o=t._values,a=t._index,s=t._ptr,c=t._datatype||void 0===t._data?t._datatype:t.getDataType();if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var f,l=r._data,h=r._datatype||r.getDataType(),p=t._size[0],d=r._size[0],m=r._size[1],y=n,v=i,g=u,D=0;c&&h&&c===h&&"string"==typeof c&&"mixed"!==c&&(f=c,y=e.find(n,[f,f]),v=e.find(i,[f,f]),g=e.find(u,[f,f]),D=e.convert(0,f));for(var w=[],b=[],x=[],_=t.createSparseMatrix({values:w,index:b,ptr:x,size:[p,m],datatype:c===t._datatype&&h===r._datatype?f:void 0}),A=[],E=[],F=0;F<m;F++){x[F]=b.length;for(var C=F+1,M=0;M<d;M++){var B=l[M][F];if(!g(B,D))for(var N=s[M],S=s[M+1],O=N;O<S;O++){var I=a[O];E[I]!==C?(E[I]=C,b.push(I),A[I]=v(B,o[O])):A[I]=y(A[I],v(B,o[O]))}}for(var T=x[F],k=b.length,z=T;z<k;z++){var P=b[z];w[z]=A[P]}}return x[m]=b.length,_},"SparseMatrix, SparseMatrix":function(t,r){var u,o=t._values,a=t._index,s=t._ptr,c=t._datatype||void 0===t._data?t._datatype:t.getDataType(),f=r._values,l=r._index,h=r._ptr,p=r._datatype||void 0===r._data?r._datatype:r.getDataType(),d=t._size[0],m=r._size[1],y=o&&f,v=n,g=i;c&&p&&c===p&&"string"==typeof c&&"mixed"!==c&&(u=c,v=e.find(n,[u,u]),g=e.find(i,[u,u]));for(var D,w,b,x,_,A,E,F,C=y?[]:void 0,M=[],B=[],N=t.createSparseMatrix({values:C,index:M,ptr:B,size:[d,m],datatype:c===t._datatype&&p===r._datatype?u:void 0}),S=y?[]:void 0,O=[],I=0;I<m;I++){B[I]=M.length;var T=I+1;for(_=h[I],A=h[I+1],x=_;x<A;x++)if(F=l[x],y)for(w=s[F],b=s[F+1],D=w;D<b;D++)O[E=a[D]]!==T?(O[E]=T,M.push(E),S[E]=g(f[x],o[D])):S[E]=v(S[E],g(f[x],o[D]));else for(w=s[F],b=s[F+1],D=w;D<b;D++)O[E=a[D]]!==T&&(O[E]=T,M.push(E));if(y)for(var k=B[I],z=M.length,P=k;P<z;P++){var j=M[P];C[P]=S[j]}}return B[m]=M.length,N}});return e(Zo,i,{"Array, Array":e.referTo("Matrix, Matrix",(t=>(e,n)=>{c(Lr(e),Lr(n));var i=t(r(e),r(n));return de(i)?i.valueOf():i})),"Matrix, Matrix":function(t,e){var r=t.size(),n=e.size();return c(r,n),1===r.length?1===n.length?function(t,e,r){if(0===r)throw new Error("Cannot multiply two empty vectors");return o(t,e)}(t,e,r[0]):f(t,e):1===n.length?l(t,e):h(t,e)},"Matrix, Array":e.referTo("Matrix,Matrix",(t=>(e,n)=>t(e,r(n)))),"Array, Matrix":e.referToSelf((t=>(e,n)=>t(r(e,n.storage()),n))),"SparseMatrix, any":function(t,e){return a(t,e,i,!1)},"DenseMatrix, any":function(t,e){return s(t,e,i,!1)},"any, SparseMatrix":function(t,e){return a(e,t,i,!0)},"any, DenseMatrix":function(t,e){return s(e,t,i,!0)},"Array, any":function(t,e){return s(r(t),e,i,!1).valueOf()},"any, Array":function(t,e){return s(r(e),t,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf((t=>(e,r,n)=>{for(var i=t(e,r),u=0;u<n.length;u++)i=t(i,n[u]);return i}))})}));var Yo="subset",Jo=Je(Yo,["typed","matrix","zeros","add"],(t=>{var{typed:e,matrix:r,zeros:n,add:i}=t;return e(Yo,{"Matrix, Index":function(t,e){return Qr(e)?r():($r(t,e),t.subset(e))},"Array, Index":e.referTo("Matrix, Index",(function(t){return function(e,n){var i=t(r(e),n);return n.isScalar()?i:i.valueOf()}})),"Object, Index":ta,"string, Index":Go,"Matrix, Index, any, any":function(t,e,r,u){return Qr(e)?t:($r(t,e),t.clone().subset(e,function(t,e){if("string"==typeof t)throw new Error("can't boradcast a string");if(e._isScalar)return t;var r=e.size();if(!r.every((t=>t>0)))return t;try{return i(t,n(r))}catch(u){return t}}(r,e),u))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",(function(t){return function(e,n,i,u){var o=t(r(e),n,i,u);return o.isMatrix?o.valueOf():o}})),"Array, Index, any":e.referTo("Matrix, Index, any, any",(function(t){return function(e,n,i){return t(r(e),n,i,void 0).valueOf()}})),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",(function(t){return function(e,r,n){return t(e,r,n,void 0)}})),"string, Index, string":Xo,"string, Index, string, string":Xo,"Object, Index, any":ea})}));function Go(t,e){if(!De(e))throw new TypeError("Index expected");if(Qr(e))return"";if($r(Array.from(t),e),1!==e.size().length)throw new Rr(e.size().length,1);var r=t.length;Zr(e.min()[0],r),Zr(e.max()[0],r);var n=e.dimension(0),i="";return n.forEach((function(e){i+=t.charAt(e)})),i}function Xo(t,e,r,n){if(!e||!0!==e.isIndex)throw new TypeError("Index expected");if(Qr(e))return t;if($r(Array.from(t),e),1!==e.size().length)throw new Rr(e.size().length,1);if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0);if(i.size()[0]!==r.length)throw new Rr(i.size()[0],r.length);var u=t.length;Zr(e.min()[0]),Zr(e.max()[0]);for(var o=[],a=0;a<u;a++)o[a]=t.charAt(a);if(i.forEach((function(t,e){o[t]=r.charAt(e[0])})),o.length>u)for(var s=u-1,c=o.length;s<c;s++)o[s]||(o[s]=n);return o.join("")}function ta(t,e){if(!Qr(e)){if(1!==e.size().length)throw new Rr(e.size(),1);var r=e.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");return mn(t,r)}}function ea(t,e,r){if(Qr(e))return t;if(1!==e.size().length)throw new Rr(e.size(),1);var n=e.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");var i=$e(t);return yn(i,n,r),i}var ra="usolveAll",na=Je(ra,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtractScalar:u,equalScalar:o,DenseMatrix:a}=t,s=xo({DenseMatrix:a});return e(ra,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=[s(t,e,!0)._data.map((t=>t[0]))],c=t._size[0],f=t._size[1],l=t._values,h=t._index,p=t._ptr,d=f-1;d>=0;d--)for(var m=r.length,y=0;y<m;y++){for(var v=r[y],g=[],D=[],w=p[d],b=0,x=p[d+1]-1;x>=w;x--){var _=h[x];_===d?b=l[x]:_<d&&(g.push(l[x]),D.push(_))}if(o(b,0))if(o(v[d],0)){if(0===y){var A=[...v];A[d]=1;for(var E=0,F=D.length;E<F;E++){var C=D[E];A[C]=u(A[C],g[E])}r.push(A)}}else{if(0===y)return[];r.splice(y,1),y-=1,m-=1}else{v[d]=n(v[d],b);for(var M=0,B=D.length;M<B;M++){var N=D[M];v[N]=u(v[N],i(v[d],g[M]))}}}return r.map((t=>new a({data:t.map((t=>[t])),size:[c,1]})))}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return c(t,e)},"Array, Array | Matrix":function(t,e){return c(r(t),e).map((t=>t.valueOf()))}});function c(t,e){for(var r=[s(t,e,!0)._data.map((t=>t[0]))],c=t._data,f=t._size[0],l=t._size[1]-1;l>=0;l--)for(var h=r.length,p=0;p<h;p++){var d=r[p];if(o(c[l][l],0))if(o(d[l],0)){if(0===p){var m=[...d];m[l]=1;for(var y=l-1;y>=0;y--)m[y]=u(m[y],c[y][l]);r.push(m)}}else{if(0===p)return[];r.splice(p,1),p-=1,h-=1}else{d[l]=n(d[l],c[l][l]);for(var v=l-1;v>=0;v--)d[v]=u(d[v],i(d[l],c[v][l]))}}return r.map((t=>new a({data:t.map((t=>[t])),size:[f,1]})))}}));r(880);var ia=Je("det",["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],(t=>{var{typed:e,matrix:r,subtractScalar:n,multiply:i,divideScalar:u,isZero:o,unaryMinus:a}=t;return e("det",{any:function(t){return $e(t)},"Array | Matrix":function(t){var e;switch((e=de(t)?t.size():Array.isArray(t)?(t=r(t)).size():[]).length){case 0:return $e(t);case 1:if(1===e[0])return $e(t.valueOf()[0]);if(0===e[0])return 1;throw new RangeError("Matrix must be square (size: "+Pr(e)+")");case 2:var s=e[0],c=e[1];if(s===c)return function(t,e,r){if(1===e)return $e(t[0][0]);if(2===e)return n(i(t[0][0],t[1][1]),i(t[1][0],t[0][1]));for(var s=!1,c=new Array(e).fill(0).map(((t,e)=>e)),f=0;f<e;f++){var l=c[f];if(o(t[l][f])){var h=void 0;for(h=f+1;h<e;h++)if(!o(t[c[h]][f])){l=c[h],c[h]=c[f],c[f]=l,s=!s;break}if(h===e)return t[l][f]}for(var p=t[l][f],d=0===f?1:t[c[f-1]][f-1],m=f+1;m<e;m++)for(var y=c[m],v=f+1;v<e;v++)t[y][v]=u(n(i(t[y][v],p),i(t[y][f],t[l][v])),d)}var g=t[c[e-1]][e-1];return s?a(g):g}(t.clone().valueOf(),s);if(0===c)return 1;throw new RangeError("Matrix must be square (size: "+Pr(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Pr(e)+")")}}})})),ua="dotMultiply",oa=Je(ua,["typed","matrix","equalScalar","multiplyScalar","concat"],(t=>{var{typed:e,matrix:r,equalScalar:n,multiplyScalar:i,concat:u}=t,o=to({typed:e,equalScalar:n}),a=qo({typed:e,equalScalar:n}),s=no({typed:e,equalScalar:n}),c=so({typed:e,matrix:r,concat:u});return e(ua,c({elop:i,SS:a,DS:o,Ss:s}))})),aa="index",sa=Je(aa,["typed","Index"],(t=>{var{typed:e,Index:r}=t;return e(aa,{"...number | string | BigNumber | Range | Array | Matrix":function(t){var e=t.map((function(t){return se(t)?t.toNumber():pe(t)||de(t)?t.map((function(t){return se(t)?t.toNumber():t})):t})),n=new r;return r.apply(n,e),n}})})),ca="smallerEq",fa=Je(ca,["typed","config","matrix","DenseMatrix","concat"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i,concat:u}=t,o=eo({typed:e}),a=ro({typed:e,DenseMatrix:i}),s=io({typed:e,DenseMatrix:i}),c=so({typed:e,matrix:n,concat:u}),f=Ti({typed:e});return e(ca,la({typed:e,config:r}),{"boolean, boolean":(t,e)=>t<=e,"BigNumber, BigNumber":function(t,e){return t.lte(e)||Ii(t,e,r.epsilon)},"Fraction, Fraction":(t,e)=>1!==t.compare(e),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,c({SS:a,DS:o,Ss:s}))})),la=Je(ca,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(ca,{"number, number":function(t,e){return t<=e||yr(t,e,r.epsilon)}})})),ha="range",pa=Je(ha,["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],(t=>{var{typed:e,config:r,matrix:n,bignumber:i,smaller:u,smallerEq:o,larger:a,largerEq:s,add:c,isPositive:f}=t;return e(ha,{string:h,"string, boolean":h,"number, number":function(t,e){return l(p(t,e,1,!1))},"number, number, number":function(t,e,r){return l(p(t,e,r,!1))},"number, number, boolean":function(t,e,r){return l(p(t,e,1,r))},"number, number, number, boolean":function(t,e,r,n){return l(p(t,e,r,n))},"BigNumber, BigNumber":function(t,e){return l(p(t,e,new(0,t.constructor)(1),!1))},"BigNumber, BigNumber, BigNumber":function(t,e,r){return l(p(t,e,r,!1))},"BigNumber, BigNumber, boolean":function(t,e,r){return l(p(t,e,new(0,t.constructor)(1),r))},"BigNumber, BigNumber, BigNumber, boolean":function(t,e,r,n){return l(p(t,e,r,n))},"Unit, Unit, Unit":function(t,e,r){return l(p(t,e,r,!1))},"Unit, Unit, Unit, boolean":function(t,e,r,n){return l(p(t,e,r,n))}});function l(t){return"Matrix"===r.matrix?n?n(t):Tu():t}function h(t,e){var n=function(t){var e=t.split(":"),r=e.map((function(t){return Number(t)}));if(r.some((function(t){return isNaN(t)})))return null;switch(r.length){case 2:return{start:r[0],end:r[1],step:1};case 3:return{start:r[0],end:r[2],step:r[1]};default:return null}}(t);if(!n)throw new SyntaxError('String "'+t+'" is no valid range');return"BigNumber"===r.number?(void 0===i&&Ou(),l(p(i(n.start),i(n.end),i(n.step)))):l(p(n.start,n.end,n.step,e))}function p(t,e,r,n){for(var i=[],l=f(r)?n?o:u:n?s:a,h=t;l(h,e);)i.push(h),h=c(h,r);return i}})),da=Je("row",["typed","Index","matrix","range"],(t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e("row",{"Matrix, number":u,"Array, number":function(t,e){return u(n($e(t)),e).valueOf()}});function u(t,e){if(2!==t.size().length)throw new Error("Only two dimensional matrix is supported");Zr(e,t.size()[0]);var u=i(0,t.size()[1]),o=new r(e,u),a=t.subset(o);return de(a)?a:n([[a]])}})),ma="column",ya=Je(ma,["typed","Index","matrix","range"],(t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e(ma,{"Matrix, number":u,"Array, number":function(t,e){return u(n($e(t)),e).valueOf()}});function u(t,e){if(2!==t.size().length)throw new Error("Only two dimensional matrix is supported");Zr(e,t.size()[1]);var u=i(0,t.size()[0]),o=new r(u,e),a=t.subset(o);return de(a)?a:n([[a]])}})),va=Je("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:u,unaryMinus:o,det:a,identity:s,abs:c}=t;return e("inv",{"Array | Matrix":function(t){var e=de(t)?t.size():Lr(t);switch(e.length){case 1:if(1===e[0])return de(t)?r([n(1,t.valueOf()[0])]):[n(1,t[0])];throw new RangeError("Matrix must be square (size: "+Pr(e)+")");case 2:var i=e[0],u=e[1];if(i===u)return de(t)?r(f(t.valueOf(),i,u),t.storage()):f(t,i,u);throw new RangeError("Matrix must be square (size: "+Pr(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+Pr(e)+")")}},any:function(t){return n(1,t)}});function f(t,e,r){var f,l,h,p,d;if(1===e){if(0===(p=t[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,p)]]}if(2===e){var m=a(t);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[n(t[1][1],m),n(o(t[0][1]),m)],[n(o(t[1][0]),m),n(t[0][0],m)]]}var y=t.concat();for(f=0;f<e;f++)y[f]=y[f].concat();for(var v=s(e).valueOf(),g=0;g<r;g++){var D=c(y[g][g]),w=g;for(f=g+1;f<e;)c(y[f][g])>D&&(D=c(y[f][g]),w=f),f++;if(0===D)throw Error("Cannot calculate inverse, determinant is zero");(f=w)!==g&&(d=y[g],y[g]=y[f],y[f]=d,d=v[g],v[g]=v[f],v[f]=d);var b=y[g],x=v[g];for(f=0;f<e;f++){var _=y[f],A=v[f];if(f!==g){if(0!==_[g]){for(h=n(o(_[g]),b[g]),l=g;l<r;l++)_[l]=i(_[l],u(h,b[l]));for(l=0;l<r;l++)A[l]=i(A[l],u(h,x[l]))}}else{for(h=b[g],l=g;l<r;l++)_[l]=n(_[l],h);for(l=0;l<r;l++)A[l]=n(A[l],h)}}}return v}})),ga=Je("pow",["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],(t=>{var{typed:e,config:r,identity:n,multiply:i,matrix:u,inv:o,number:a,fraction:s,Complex:c}=t;return e("pow",{"number, number":f,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(t,e){return e.isInteger()||t>=0||r.predictable?t.pow(e):new c(t.toNumber(),0).pow(e.toNumber(),0)},"Fraction, Fraction":function(t,e){var n=t.pow(e);if(null!=n)return n;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return f(t.valueOf(),e.valueOf())},"Array, number":l,"Array, BigNumber":function(t,e){return l(t,e.toNumber())},"Matrix, number":h,"Matrix, BigNumber":function(t,e){return h(t,e.toNumber())},"Unit, number | BigNumber":function(t,e){return t.pow(e)}});function f(t,e){if(r.predictable&&!er(e)&&t<0)try{var n=s(e),i=a(n);if((e===i||Math.abs((e-i)/e)<1e-14)&&n.d%2==1)return(n.n%2==0?1:-1)*Math.pow(-t,e)}catch(u){}return r.predictable&&(t<-1&&e===1/0||t>-1&&t<0&&e===-1/0)?NaN:er(e)||t>=0||r.predictable?Qn(t,e):t*t<1&&e===1/0||t*t>1&&e===-1/0?0:new c(t,0).pow(e,0)}function l(t,e){if(!er(e))throw new TypeError("For A^b, b must be an integer (value is "+e+")");var r=Lr(t);if(2!==r.length)throw new Error("For A^b, A must be 2 dimensional (A has "+r.length+" dimensions)");if(r[0]!==r[1])throw new Error("For A^b, A must be square (size is "+r[0]+"x"+r[1]+")");if(e<0)try{return l(o(t),-e)}catch(s){if("Cannot calculate inverse, determinant is zero"===s.message)throw new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+e+")");throw s}for(var u=n(r[0]).valueOf(),a=t;e>=1;)1&~e||(u=i(a,u)),e>>=1,a=i(a,a);return u}function h(t,e){return u(l(t.valueOf(),e))}}));r(693);var Da=Je("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(t=>{var{typed:e,matrix:r,multiply:n,equalScalar:i,divideScalar:u,inv:o}=t,a=no({typed:e,equalScalar:i}),s=oo({typed:e});return e("divide",Ze({"Array | Matrix, Array | Matrix":function(t,e){return n(t,o(e))},"DenseMatrix, any":function(t,e){return s(t,e,u,!1)},"SparseMatrix, any":function(t,e){return a(t,e,u,!1)},"Array, any":function(t,e){return s(r(t),e,u,!1).valueOf()},"any, Array | Matrix":function(t,e){return n(t,o(e))}},u.signatures))}));function wa(t){var{addScalar:e,subtract:r,flatten:n,multiply:i,multiplyScalar:u,divideScalar:o,sqrt:a,abs:s,bignumber:c,diag:f,size:l,reshape:h,inv:p,qr:d,usolve:m,usolveAll:y,equal:v,complex:g,larger:D,smaller:w,matrixFromColumns:b,dot:x}=t;function _(t,n,i,o){var s=e(t,o),c=r(u(t,o),u(n,i)),f=u(s,.5),l=u(a(r(u(s,s),u(4,c))),.5);return[e(f,l),r(f,l)]}function A(t,e,n,i,u,o,a,f){var l="BigNumber"===f,h="Complex"===f,p=l?c(0):h?g(0):0,d=l?c(1):h?g(1):1;if(w(s(n),a))return[[d,p],[p,d]];if(D(s(r(u,o)),a))return[[r(u,i),r(o,i)],[n,n]];var m=r(t,u),y=r(i,u);return w(s(e),a)&&w(s(y),a)?[[m,d],[n,p]]:[[e,p],[y,d]]}function E(t,e){for(var r=0;r<t.length;r++)t[r].push(...Array(e-t[r].length).fill(0));for(var n=t.length;n<e;n++)t.push(Array(e).fill(0)),t[n][n]=1;return t}function F(t,e,r){for(var n=0;n<t.length;n++)if(r(t[n],e))return n;return-1}function C(t,e,r,n,i){for(var u,o="BigNumber"===i?c(1e3):1e3,a=0;a<5;++a){u=M(e,r,i);try{u=m(t,u)}catch(f){continue}if(D(N(u),o))break}if(a>=5)return null;for(a=0;;){var s=m(t,u);if(w(N(B(u,[s])),n))break;if(++a>=10)return null;u=S(s)}return u}function M(t,e,r){var n="BigNumber"===r,i="Complex"===r,u=Array(t).fill(0).map((t=>2*Math.random()-1));return n&&(u=u.map((t=>c(t)))),i&&(u=u.map((t=>g(t)))),S(u=B(u,e),r)}function B(t,e){var n=l(t);for(var u of e)u=h(u,n),t=r(t,i(o(x(u,t),x(u,u)),u));return t}function N(t){return s(a(x(t,t)))}function S(t,e){var r="Complex"===e,n="BigNumber"===e?c(1):r?g(1):1;return i(o(n,N(t)),t)}return function(t,a,l,h){var m=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],b=function(t,r,n,i,a){var l,h="BigNumber"===i,p="Complex"===i,d=h?c(0):0,m=h?c(1):p?g(1):1,y=h?c(1):1,b=h?c(10):2,x=u(b,b);a&&(l=Array(r).fill(m));var _=!1;for(;!_;){_=!0;for(var A=0;A<r;A++){for(var E=d,F=d,C=0;C<r;C++)A!==C&&(E=e(E,s(t[C][A])),F=e(F,s(t[A][C])));if(!v(E,0)&&!v(F,0)){for(var M=y,B=E,N=o(F,b),S=u(F,b);w(B,N);)B=u(B,x),M=u(M,b);for(;D(B,S);)B=o(B,x),M=o(M,b);if(w(o(e(B,F),M),u(e(E,F),.95))){_=!1;for(var O=o(1,M),I=0;I<r;I++)A!==I&&(t[A][I]=u(t[A][I],O),t[I][A]=u(t[I][A],M));a&&(l[A]=u(l[A],O))}}}}return a?f(l):null}(t,a,0,h,m);!function(t,n,i,a,f,l){var h="BigNumber"===a,p="Complex"===a,d=h?c(0):p?g(0):0;h&&(i=c(i));for(var m=0;m<n-2;m++){for(var y=0,v=d,D=m+1;D<n;D++){var b=t[D][m];w(s(v),s(b))&&(v=b,y=D)}if(!w(s(v),i)){if(y!==m+1){var x=t[y];t[y]=t[m+1],t[m+1]=x;for(var _=0;_<n;_++){var A=t[_][y];t[_][y]=t[_][m+1],t[_][m+1]=A}if(f){var E=l[y];l[y]=l[m+1],l[m+1]=E}}for(var F=m+2;F<n;F++){var C=o(t[F][m],v);if(0!==C){for(var M=0;M<n;M++)t[F][M]=r(t[F][M],u(C,t[m+1][M]));for(var B=0;B<n;B++)t[B][m+1]=e(t[B][m+1],u(C,t[B][F]));if(f)for(var N=0;N<n;N++)l[F][N]=r(l[F][N],u(C,l[m+1][N]))}}}}}(t,a,l,h,m,b);var{values:x,C:M}=function(t,n,u,o,a){var l="BigNumber"===o,h="Complex"===o,p=l?c(1):h?g(1):1;l&&(u=c(u));var m=$e(t),y=[],v=n,D=[],b=a?f(Array(n).fill(p)):void 0,x=a?f(Array(v).fill(p)):void 0,F=0;for(;F<=100;){F+=1;for(var C=m[v-1][v-1],M=0;M<v;M++)m[M][M]=r(m[M][M],C);var{Q:B,R:N}=d(m);m=i(N,B);for(var S=0;S<v;S++)m[S][S]=e(m[S][S],C);if(a&&(x=i(x,B)),1===v||w(s(m[v-1][v-2]),u)){F=0,y.push(m[v-1][v-1]),a&&(D.unshift([[1]]),E(x,n),b=i(b,x),v>1&&(x=f(Array(v-1).fill(p)))),v-=1,m.pop();for(var O=0;O<v;O++)m[O].pop()}else if(2===v||w(s(m[v-2][v-3]),u)){F=0;var I=_(m[v-2][v-2],m[v-2][v-1],m[v-1][v-2],m[v-1][v-1]);y.push(...I),a&&(D.unshift(A(m[v-2][v-2],m[v-2][v-1],m[v-1][v-2],m[v-1][v-1],I[0],I[1],u,o)),E(x,n),b=i(b,x),v>2&&(x=f(Array(v-2).fill(p)))),v-=2,m.pop(),m.pop();for(var T=0;T<v;T++)m[T].pop(),m[T].pop()}if(0===v)break}if(y.sort(((t,e)=>+r(s(t),s(e)))),F>100){var k=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+y.join(", "));throw k.values=y,k.vectors=[],k}var z=a?i(b,function(t,e){for(var r=[],n=0;n<e;n++)r[n]=Array(e).fill(0);var i=0;for(var u of t){for(var o=u.length,a=0;a<o;a++)for(var s=0;s<o;s++)r[i+a][i+s]=u[a][s];i+=o}return r}(D,n)):void 0;return{values:y,C:z}}(t,a,l,h,m);if(m){var B=function(t,e,u,o,a,s,l){var h=p(u),d=i(h,t,u),m="BigNumber"===l,D="Complex"===l,w=m?c(0):D?g(0):0,b=m?c(1):D?g(1):1,x=[],_=[];for(var A of a){var E=F(x,A,v);-1===E?(x.push(A),_.push(1)):_[E]+=1}for(var M=[],B=x.length,N=Array(e).fill(w),S=f(Array(e).fill(b)),O=function(){var t=x[I],a=r(d,i(t,S)),c=y(a,N);for(c.shift();c.length<_[I];){var f=C(a,e,c,s,l);if(null===f)break;c.push(f)}var h=i(p(o),u);c=c.map((t=>i(h,t))),M.push(...c.map((e=>({value:t,vector:n(e)}))))},I=0;I<B;I++)O();return M}(t,a,M,b,x,l,h);return{values:x,eigenvectors:B}}return{values:x}}}function ba(t){var{config:e,addScalar:r,subtract:n,abs:i,atan:u,cos:o,sin:a,multiplyScalar:s,inv:c,bignumber:f,multiply:l,add:h}=t;function p(t,r,n){var i=r-t;return Math.abs(i)<=e.epsilon?Math.PI/4:.5*Math.atan(2*n/(r-t))}function d(t,r,o){var a=n(r,t);return i(a)<=e.epsilon?f(-1).acos().div(4):s(.5,u(l(2,o,c(a))))}function m(t,e,r,n){for(var i=t.length,u=Math.cos(e),o=Math.sin(e),a=Array(i).fill(0),s=Array(i).fill(0),c=0;c<i;c++)a[c]=u*t[c][r]-o*t[c][n],s[c]=o*t[c][r]+u*t[c][n];for(var f=0;f<i;f++)t[f][r]=a[f],t[f][n]=s[f];return t}function y(t,e,i,u){for(var c=t.length,l=o(e),h=a(e),p=Array(c).fill(f(0)),d=Array(c).fill(f(0)),m=0;m<c;m++)p[m]=n(s(l,t[m][i]),s(h,t[m][u])),d[m]=r(s(h,t[m][i]),s(l,t[m][u]));for(var y=0;y<c;y++)t[y][i]=p[y],t[y][u]=d[y];return t}function v(t,e,i,u){for(var c=t.length,p=f(o(e)),d=f(a(e)),m=s(p,p),y=s(d,d),v=Array(c).fill(f(0)),g=Array(c).fill(f(0)),D=l(f(2),p,d,t[i][u]),w=r(n(s(m,t[i][i]),D),s(y,t[u][u])),b=h(s(y,t[i][i]),D,s(m,t[u][u])),x=0;x<c;x++)v[x]=n(s(p,t[i][x]),s(d,t[u][x])),g[x]=r(s(d,t[i][x]),s(p,t[u][x]));t[i][i]=w,t[u][u]=b,t[i][u]=f(0),t[u][i]=f(0);for(var _=0;_<c;_++)_!==i&&_!==u&&(t[i][_]=v[_],t[_][i]=v[_],t[u][_]=g[_],t[_][u]=g[_]);return t}function g(t,e,r,n){for(var i=t.length,u=Math.cos(e),o=Math.sin(e),a=u*u,s=o*o,c=Array(i).fill(0),f=Array(i).fill(0),l=a*t[r][r]-2*u*o*t[r][n]+s*t[n][n],h=s*t[r][r]+2*u*o*t[r][n]+a*t[n][n],p=0;p<i;p++)c[p]=u*t[r][p]-o*t[n][p],f[p]=o*t[r][p]+u*t[n][p];t[r][r]=l,t[n][n]=h,t[r][n]=0,t[n][r]=0;for(var d=0;d<i;d++)d!==r&&d!==n&&(t[r][d]=c[d],t[d][r]=c[d],t[n][d]=f[d],t[d][n]=f[d]);return t}function D(t){for(var e=t.length,r=0,n=[0,1],i=0;i<e;i++)for(var u=i+1;u<e;u++)Math.abs(r)<Math.abs(t[i][u])&&(r=Math.abs(t[i][u]),n=[i,u]);return[n,r]}function w(t){for(var e=t.length,r=0,n=[0,1],u=0;u<e;u++)for(var o=u+1;o<e;o++)i(r)<i(t[u][o])&&(r=i(t[u][o]),n=[u,o]);return[n,r]}function b(t,e,r){var n,u=t.length,o=Array(u);if(r){n=Array(u);for(var a=0;a<u;a++)n[a]=Array(u)}for(var s=0;s<u;s++){for(var c=0,f=t[0],l=0;l<t.length;l++)i(t[l])<i(f)&&(f=t[c=l]);if(o[s]=t.splice(c,1)[0],r)for(var h=0;h<u;h++)n[s][h]=e[h][c],e[h].splice(c,1)}if(!r)return{values:o};var p=n.map(((t,e)=>({value:o[e],vector:t})));return{values:o,eigenvectors:p}}return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.epsilon,u=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if("number"===u)return function(t,e,r){var n,i,u=t.length,o=Math.abs(e/u);if(r){i=new Array(u);for(var a=0;a<u;a++)i[a]=Array(u).fill(0),i[a][a]=1}var s=D(t);for(;Math.abs(s[1])>=Math.abs(o);){var c=s[0][0],f=s[0][1];t=g(t,n=p(t[c][c],t[f][f],t[c][f]),c,f),r&&(i=m(i,n,c,f)),s=D(t)}for(var l=Array(u).fill(0),h=0;h<u;h++)l[h]=t[h][h];return b($e(l),i,r)}(t,n,o);if("BigNumber"===u)return function(t,e,r){var n,u,o=t.length,a=i(e/o);if(r){u=new Array(o);for(var s=0;s<o;s++)u[s]=Array(o).fill(0),u[s][s]=1}var c=w(t);for(;i(c[1])>=i(a);){var f=c[0][0],l=c[0][1];t=v(t,n=d(t[f][f],t[l][l],t[f][l]),f,l),r&&(u=y(u,n,f,l)),c=w(t)}for(var h=Array(o).fill(0),p=0;p<o;p++)h[p]=t[p][p];return b($e(h),u,r)}(t,n,o);throw TypeError("Unsupported data type: "+u)}}var xa=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],_a=Je("eigs",xa,(t=>{var{config:e,typed:r,matrix:n,addScalar:i,subtract:u,equal:o,abs:a,atan:s,cos:c,sin:f,multiplyScalar:l,divideScalar:h,inv:p,bignumber:d,multiply:m,add:y,larger:v,column:D,flatten:w,number:b,complex:x,sqrt:_,diag:A,size:E,reshape:F,qr:C,usolve:M,usolveAll:B,im:N,re:S,smaller:O,matrixFromColumns:I,dot:T}=t,k=ba({config:e,addScalar:i,subtract:u,column:D,flatten:w,equal:o,abs:a,atan:s,cos:c,sin:f,multiplyScalar:l,inv:p,bignumber:d,complex:x,multiply:m,add:y}),z=wa({config:e,addScalar:i,subtract:u,multiply:m,multiplyScalar:l,flatten:w,divideScalar:h,sqrt:_,abs:a,bignumber:d,diag:A,size:E,reshape:F,qr:C,inv:p,usolve:M,usolveAll:B,equal:o,complex:x,larger:v,smaller:O,matrixFromColumns:I,dot:T});return r("eigs",{Array:function(t){return P(n(t))},"Array, number|BigNumber":function(t,e){return P(n(t),{precision:e})},"Array, Object"(t,e){return P(n(t),e)},Matrix:function(t){return P(t,{matricize:!0})},"Matrix, number|BigNumber":function(t,e){return P(t,{precision:e,matricize:!0})},"Matrix, Object":function(t,e){var r={matricize:!0};return g(r,e),P(t,r)}});function P(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!("eigenvectors"in i)||i.eigenvectors,s=function(t,e,r){var n=t.toArray(),i=t.size();if(2!==i.length||i[0]!==i[1])throw new RangeError("Matrix must be square (size: ".concat(Pr(i),")"));var o=i[0];if(function(t,e,r){for(var n=0;n<e;n++)for(var i=0;i<e;i++)if(v(d(a(N(t[n][i]))),r))return!1;return!0}(n,o,e)&&(function(t,e){for(var r=0;r<e;r++)for(var n=0;n<e;n++)t[r][n]=S(t[r][n])}(n,o),function(t,e,r){for(var n=0;n<e;n++)for(var i=n;i<e;i++)if(v(d(a(u(t[n][i],t[i][n]))),r))return!1;return!0}(n,o,e))){var s=j(t,n,o);return k(n,o,e,s,r)}var c=j(t,n,o);return z(n,o,e,c,r)}(t,null!==(r=i.precision)&&void 0!==r?r:e.epsilon,o);return i.matricize&&(s.values=n(s.values),o&&(s.eigenvectors=s.eigenvectors.map((t=>{var{value:e,vector:r}=t;return{value:e,vector:n(r)}})))),o&&Object.defineProperty(s,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),s}function j(t,e,r){var n=t.datatype();if("number"===n||"BigNumber"===n||"Complex"===n)return n;for(var i=!1,u=!1,o=!1,a=0;a<r;a++)for(var s=0;s<r;s++){var c=e[a][s];if(ae(c)||fe(c))i=!0;else if(se(c))u=!0;else{if(!ce(c))throw TypeError("Unsupported type in Matrix: "+Ve(c));o=!0}}if(u&&o&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),o){for(var f=0;f<r;f++)for(var l=0;l<r;l++)e[f][l]=x(e[f][l]);return"Complex"}if(u){for(var h=0;h<r;h++)for(var p=0;p<r;p++)e[h][p]=d(e[h][p]);return"BigNumber"}if(i){for(var m=0;m<r;m++)for(var y=0;y<r;y++)e[m][y]=b(e[m][y]);return"number"}throw TypeError("Matrix contains unsupported types only.")}})),Aa="norm",Ea=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],Fa=Je(Aa,Ea,(t=>{var{typed:e,abs:r,add:n,pow:i,conj:u,sqrt:o,multiply:a,equalScalar:s,larger:c,smaller:f,matrix:l,ctranspose:h,eigs:p}=t;return e(Aa,{number:Math.abs,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},boolean:function(t){return Math.abs(t)},Array:function(t){return y(l(t),2)},Matrix:function(t){return y(t,2)},"Array, number | BigNumber | string":function(t,e){return y(l(t),e)},"Matrix, number | BigNumber | string":function(t,e){return y(t,e)}});function d(t,e){if(e===Number.POSITIVE_INFINITY||"inf"===e)return function(t){var e=0;return t.forEach((function(t){var n=r(t);c(n,e)&&(e=n)}),!0),e}(t);if(e===Number.NEGATIVE_INFINITY||"-inf"===e)return function(t){var e;return t.forEach((function(t){var n=r(t);e&&!f(n,e)||(e=n)}),!0),e||0}(t);if("fro"===e)return y(t,2);if("number"==typeof e&&!isNaN(e)){if(!s(e,0)){var u=0;return t.forEach((function(t){u=n(i(r(t),e),u)}),!0),i(u,1/e)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function m(t,e){if(1===e)return function(t){var e=[],i=0;return t.forEach((function(t,u){var o=u[1],a=n(e[o]||0,r(t));c(a,i)&&(i=a),e[o]=a}),!0),i}(t);if(e===Number.POSITIVE_INFINITY||"inf"===e)return function(t){var e=[],i=0;return t.forEach((function(t,u){var o=u[0],a=n(e[o]||0,r(t));c(a,i)&&(i=a),e[o]=a}),!0),i}(t);if("fro"===e)return function(t){var e=0;return t.forEach((function(t,r){e=n(e,a(t,u(t)))})),r(o(e))}(t);if(2===e)return function(t){var e=t.size();if(e[0]!==e[1])throw new RangeError("Invalid matrix dimensions");var n=h(t),i=a(n,t),u=p(i).values.toArray(),s=u[u.length-1];return r(o(s))}(t);throw new Error("Unsupported parameter value "+e)}function y(t,e){var r=t.size();if(1===r.length)return d(t,e);if(2===r.length){if(r[0]&&r[1])return m(t,e);throw new RangeError("Invalid matrix dimensions")}}})),Ca=Xe({config:x}),Ma=_r({}),Ba=Sr({}),Na=Or({}),Sa=pn({Matrix:Na}),Oa=Fn({BigNumber:Ca,Complex:Ma,DenseMatrix:Sa,Fraction:Ba}),Ia=Yn({typed:Oa}),Ta=mi({typed:Oa}),ka=yi({typed:Oa}),za=vi({BigNumber:Ca,typed:Oa}),Pa=Mi({Complex:Ma,typed:Oa}),ja=Ni({typed:Oa}),qa=Oi({typed:Oa}),Ka=zi({config:x,typed:Oa}),Ha=ji({typed:Oa}),Ra=qi({typed:Oa}),Ua=Hi({typed:Oa}),La=Zi({typed:Oa}),Wa=Yi({typed:Oa}),Va=nu({typed:Oa}),$a=cu({typed:Oa}),Za=du({typed:Oa}),Qa=yu({BigNumber:Ca,Fraction:Ba,complex:Pa,typed:Oa}),Ya=vu({typed:Oa}),Ja=gu({Matrix:Na,equalScalar:Ka,typed:Oa}),Ga=wu({typed:Oa}),Xa=xu({isInteger:Ua,typed:Oa}),ts=Eu({config:x,typed:Oa}),es=Fu({Complex:Ma,config:x,typed:Oa}),rs=Mu({typed:Oa}),ns=Bu({Fraction:Ba,typed:Oa}),is=Su({DenseMatrix:Sa,Matrix:Na,SparseMatrix:Ja,typed:Oa}),us=ku({bignumber:za,fraction:ns,number:$a}),os=Pu({isInteger:Ua,matrix:is,typed:Oa}),as=qu({matrix:is,config:x,typed:Oa}),ss=Hu({matrix:is,typed:Oa}),cs=Uu({matrix:is,typed:Oa}),fs=Wu({BigNumber:Ca,config:x,matrix:is,typed:Oa}),ls=$u({isInteger:Ua,matrix:is,typed:Oa}),hs=Qu({conj:ja,transpose:cs,typed:Oa}),ps=Ju({DenseMatrix:Sa,SparseMatrix:Ja,matrix:is,typed:Oa}),ds=Xu({numeric:us,typed:Oa}),ms=fo({DenseMatrix:Sa,concat:ls,equalScalar:Ka,matrix:is,typed:Oa}),ys=po({matrix:is,typed:Oa}),vs=yo({BigNumber:Ca,DenseMatrix:Sa,SparseMatrix:Ja,config:x,matrix:is,typed:Oa}),gs=go({DenseMatrix:Sa,concat:ls,config:x,matrix:is,typed:Oa}),Ds=Ao({flatten:ys,matrix:is,size:as,typed:Oa}),ws=Eo({BigNumber:Ca,config:x,matrix:is,typed:Oa}),bs=Fo({addScalar:Ta,complex:Pa,conj:ja,divideScalar:ds,equal:ms,identity:vs,isZero:Wa,matrix:is,multiplyScalar:Va,sign:Qa,sqrt:es,subtractScalar:Ga,typed:Oa,unaryMinus:rs,zeros:fs}),xs=Bo({DenseMatrix:Sa,concat:ls,config:x,matrix:is,typed:Oa}),_s=Io({DenseMatrix:Sa,concat:ls,equalScalar:Ka,matrix:is,subtractScalar:Ga,typed:Oa,unaryMinus:rs}),As=zo({DenseMatrix:Sa,divideScalar:ds,equalScalar:Ka,matrix:is,multiplyScalar:Va,subtractScalar:Ga,typed:Oa}),Es=jo({DenseMatrix:Sa,SparseMatrix:Ja,addScalar:Ta,concat:ls,equalScalar:Ka,matrix:is,typed:Oa}),Fs=Ko({addScalar:Ta,conj:ja,multiplyScalar:Va,size:as,typed:Oa}),Cs=Uo({ImmutableDenseMatrix:Ro({DenseMatrix:Sa,smaller:xs}),getMatrixDataType:Ha}),Ms=Vo({DenseMatrix:Sa,concat:ls,config:x,matrix:is,typed:Oa}),Bs=Qo({addScalar:Ta,dot:Fs,equalScalar:Ka,matrix:is,multiplyScalar:Va,typed:Oa}),Ns=Jo({add:Es,matrix:is,typed:Oa,zeros:fs}),Ss=na({DenseMatrix:Sa,divideScalar:ds,equalScalar:Ka,matrix:is,multiplyScalar:Va,subtractScalar:Ga,typed:Oa}),Os=ia({divideScalar:ds,isZero:Wa,matrix:is,multiply:Bs,subtractScalar:Ga,typed:Oa,unaryMinus:rs}),Is=oa({concat:ls,equalScalar:Ka,matrix:is,multiplyScalar:Va,typed:Oa}),Ts=sa({Index:Cs,typed:Oa}),ks=fa({DenseMatrix:Sa,concat:ls,config:x,matrix:is,typed:Oa}),zs=pa({bignumber:za,matrix:is,add:Es,config:x,isPositive:La,larger:Ms,largerEq:gs,smaller:xs,smallerEq:ks,typed:Oa}),Ps=da({Index:Cs,matrix:is,range:zs,typed:Oa}),js=ya({Index:Cs,matrix:is,range:zs,typed:Oa}),qs=va({abs:Ia,addScalar:Ta,det:Os,divideScalar:ds,identity:vs,matrix:is,multiply:Bs,typed:Oa,unaryMinus:rs}),Ks=ga({Complex:Ma,config:x,fraction:ns,identity:vs,inv:qs,matrix:is,multiply:Bs,number:$a,typed:Oa}),Hs=Da({divideScalar:ds,equalScalar:Ka,inv:qs,matrix:is,multiply:Bs,typed:Oa}),Rs=_a({abs:Ia,add:Es,addScalar:Ta,atan:ka,bignumber:za,column:js,complex:Pa,config:x,cos:qa,diag:ps,divideScalar:ds,dot:Fs,equal:ms,flatten:ys,im:Ra,inv:qs,larger:Ms,matrix:is,matrixFromColumns:Ds,multiply:Bs,multiplyScalar:Va,number:$a,qr:bs,re:Za,reshape:os,sin:Ya,size:as,smaller:xs,sqrt:es,subtract:_s,typed:Oa,usolve:As,usolveAll:Ss}),Us=Fa({abs:Ia,add:Es,conj:ja,ctranspose:hs,eigs:Rs,equalScalar:Ka,larger:Ms,matrix:is,multiply:Bs,pow:Ks,smaller:xs,sqrt:es,typed:Oa});let Ls=function(){function t(){this.db=new v("Biomebot-0.11"),this.db.version(1).stores({botModules:"[data.botId+data.moduleName]",scripts:"++id,[botModuleId+doc]",memory:"[botId+moduleName+key]",wordTag:"++id, &word, tag"})}return t.prototype.getDir=async function(t){const e=await this.db.mains.where({botId:t}).first(),r=await this.db.parts.where({botId:t}).first();return!(!e||!r)},t}();new Ls;const Ws=/^(\{[a-zA-Z0-9_]+\}) (.+)$/,Vs=/^\{([a-zA-Z_][a-zA-Z0-9_]*)\}/,$s=/\{([0-9]+)\}/,Zs="abcdefghijklmnopqrstuvwxyz".split("");let Qs=function(r){function n(){var t;return(t=r.call(this)||this).getModuleNames=t.getModuleNames.bind(t),t.uploadDxScheme=t.uploadDxScheme.bind(t),t.downloadDxScheme=t.downloadDxScheme.bind(t),t.touchDxScheme=t.touchDxScheme.bind(t),t.downloadDxModule=t.downloadDxModule.bind(t),t.downloadDxScript=t.downloadDxScript.bind(t),t.downloadDxMemory=t.downloadDxMemory.bind(t),t.updateTagValue=t.updateTagValue.bind(t),t.decodeTag=t.decodeTag.bind(t),t.readTag=t.readTag.bind(t),t.pickTag=t.pickTag.bind(t),t._findTag=t._findTag.bind(t),t.writeTag=t.writeTag.bind(t),t.deleteTag=t.deleteTag.bind(t),t.expand=t.expand.bind(t),t.expandWordTag=t.expandWordTag.bind(t),t.memorizeLine=t.memorizeLine.bind(t),t.uploadDxWordToTagList=t.uploadDxWordToTagList.bind(t),t.downloadDxWordToTagList=t.downloadDxWordToTagList.bind(t),t}var i,u;u=r,(i=n).prototype=Object.create(u.prototype),i.prototype.constructor=i,e(i,u);var o=n.prototype;return o.getModuleNames=async function(t){const e=await this.db.botModules.where("data.botId").equals(t).toArray(),r=[];for(const n of e)r.push(n.data.moduleName);return r},o.uploadDxScheme=async function(t){for(const e of t.botModules){await this.db.botModules.put({fsId:e.fsId,data:{...e.data,script:"on script db/memory db"}}),this.db.scripts.where("[botModuleId+doc]").equals([e.fsId,"origin"]).delete(),this.db.memory.where("botId").equals(e.fsId).delete();for(const t of e.data.script){const r=t.text.match(Ws);r?await this.db.memory.put({botId:e.data.botId,moduleName:e.data.moduleName,key:r[1],value:r[2].split(","),doc:"origin"}):await this.db.scripts.add({botModuleId:e.fsId,...t,doc:"origin"})}}},o.touchDxScheme=async function(t,e){await this.db.botModules.where("[data.botId+data.moduleName]").equals([t,e]).modify((t=>{t.data.updatedAt=new Date}))},o.downloadDxScheme=async function(t){const e={updatedAt:new Date(0),botModules:[]},r=await this.db.botModules.where(["data.botId","data.moduleName"]).between([t,v.minKey],[t,v.maxKey]).toArray();for(const n of r){if(n.fsId){const e=n.fsId;n.data.script=await this.downloadDxScript(e),n.data.memory=await this.downloadDxMemory(t,n.moduleName)}e.botModules.push(n),"[object Date]"!==toString.call(n.data.updatedAt)&&(n.data.updatedAt=new Date(1e3*n.data.updatedAt.seconds)),e.updatedAt<n.data.updatedAt&&(e.updatedAt=n.data.updatedAt)}return e},o.downloadDxModule=async function(t,e){return await this.db.botModules.where(["data.botId","data.moduleName"]).equals([t,e]).first()},o.findUserDxModule=async function(t,e){const r=await this.db.botModules.where(["data.botId","data.moduleName"]).equals([`bot${t}`,"main"]).toArray();if(e){for(const t of r)if(t.data.schemeName===e)return{botId:t.data.botId,schemeName:e};return null}for(const n of r)return{botId:n.data.botId,schemeName:n.data.schemeName};return{botId:null,schemeName:null}},o.downloadDxScript=async function(t){return await this.db.scripts.where("[botModuleId+doc]").between([t,v.minKey],[t,v.maxKey]).sortBy("id")},o.downloadDxMemory=async function(t,e){const r=await this.db.memory.filter((e=>{e.botId===t&&e.moduleName})).toArray(),n={};for(const i of r)n[i.key]=i.value;return n},o.updateTagValue=async function(t,e,r,n){void 0===n&&(n={});const i=n.moduleName||"main",u=n.overwrite||!1,o=Array.isArray(e)?e:[e];return await this.db.memory.where(["botId","moduleName","key"]).equals([r,i,t]).modify((t=>{t.value=u?o:t.value.push(e)}))},o.decodeTag=async function(e,r,n){void 0===n&&(n="main");const i=this.db;const u=await this.readTag(e,r,n),o=u[ts(u.length)];return await t(o,Vs,(async function e(u){let o=await i.memory.where(["botId","moduleName","key"]).equals([r,n,u]).first();return o||"main"===n||(o=await i.memory.where(["botId","moduleName","key"]).equals([r,"main",u]).first()),o?t(o.value[ts(o.value.length)],Vs,e):u}))},o.writeTag=async function(t,e,r,n){return void 0===n&&(n="main"),await this.db.memory.put({key:t,botId:r,moduleName:n,value:e})},o.deleteTag=async function(t,e,r){return void 0===r&&(r="main"),await this.db.memory.where(["botId","moduleName","key"]).equals([e,r,t]).delete()},o.readTag=async function(t,e,r,n){return void 0===r&&(r=""),void 0===n&&(n="main"),await this._findTag(t,e,r,n)},o.pickTag=async function(t,e,r,n){void 0===r&&(r=null),void 0===n&&(n="main");const i=await this._findTag(t,e,null,n);return i?i[ts(i.length)]:r},o.readCondTags=async function(t,e){const r=Object.keys(t);return await Promise.all(r.map((async t=>({key:t,value:await this.db.memory.where(["botId","moduleName","key"]).equals([e,"main",t]).first()?1:0}))))},o.clearSessionTags=async function(t){await this.db.memory.filter((t=>t.key.startsWith(Zs))).delete()},o.uploadDxWordToTagList=async function(t){await this.db.wordTag.toCollection().delete();for(const e of t){const t=e.word,r=await this.db.wordTag.where("word").equals(t).first();r?(console.warning("wordTag duplicated, overwrited",r),await this.db.wordTag.update(r.id,{word:t,tag:e.tag})):await this.db.wordTag.add({tag:e.tag,word:e.word})}},o.downloadDxWordToTagList=async function(){return await this.db.wordTag.toCollection().sortBy("word",(t=>t.sort(((t,e)=>e.word.length-t.word.length))))},o._findTag=async function(t,e,r,n){let i;var u;if(void 0===r&&(r=null),void 0===n&&(n=null),n)return i=await this.db.memory.where(["botId","moduleName","key"]).equals([e,n,t]).first(),i||(i=await this.db.memory.where(["botId","moduleName","key"]).equals([e,"main",t]).first()),(null===(u=i)||void 0===u?void 0:u.value)||r},o.expand=function(e,r,n){const i=this.db;return t(e,Vs,(async function e(u){let o=await i.memory.where(["botId","moduleName","key"]).equals([r,n,u]).first();return o||(o=await i.memory.where(["botId","moduleName","key"]).equals([r,"main",u]).first()),o?t(o.value[ts(o.value.length)],Vs,e):u}))},o.expandWordTag=function(e){const r=this.db.wordTag;return t(e,$s,(async function e(n){const i=await r.wordTag.where("tag").equals(n).first();return i?t(i.value[ts(i.value.length)],$s,e):n}))},o.memorizeLine=async function(t,e,r){if(""!==t.text&&""!==e.text){const n=(new Date).valueOf();console.log(t,e),await this.db.scripts.add({botModuleId:r,head:"user",text:`${t.text}\t${n}`,doc:"page0"}),await this.db.scripts.add({botModuleId:r,head:"bot",doc:"page0",text:e.text})}},n}(Ls);const Ys=new Qs;let Js=function(){function t(){const t={"[]":"M","[-]":"H","[-]":"I","[--]":"K","[a-zA-Z------_<>{}+\\-$!.]":"A","[0-9-]":"N"};this.chartype_=[];for(let e in t){let r=new RegExp;r.compile(e),this.chartype_.push([r,t[e]])}this.BIAS__=-332,this.BC1__={HH:6,II:2461,KH:406,OH:-1378},this.BC2__={AA:-3267,AI:2744,AN:-878,HH:-4070,HM:-1711,HN:4012,HO:3761,IA:1327,IH:-1184,II:-1332,IK:1721,IO:5492,KI:3831,KK:-8741,MH:-3132,MK:3334,OO:-2920},this.BC3__={HH:996,HI:626,HK:-721,HN:-1307,HO:-836,IH:-301,KK:2762,MK:1079,MM:4034,OA:-1652,OH:266},this.BP1__={BB:295,OB:304,OO:-125,UB:352},this.BP2__={BO:60,OO:-1762},this.BQ1__={BHH:1150,BHM:1521,BII:-1158,BIM:886,BMH:1208,BNH:449,BOH:-91,BOO:-2597,OHI:451,OIH:-296,OKA:1851,OKH:-1020,OKK:904,OOO:2965},this.BQ2__={BHH:118,BHI:-1159,BHM:466,BIH:-919,BKK:-1720,BKO:864,OHH:-1139,OHM:-181,OIH:153,UHI:-1146},this.BQ3__={BHH:-792,BHI:2664,BII:-299,BKI:419,BMH:937,BMM:8335,BNN:998,BOH:775,OHH:2174,OHM:439,OII:280,OKH:1798,OKI:-793,OKO:-2242,OMH:-2402,OOO:11699},this.BQ4__={BHH:-3895,BIH:3761,BII:-4654,BIK:1348,BKK:-1806,BMI:-3385,BOO:-12396,OAH:926,OHH:266,OHK:-2036,ONN:-973},this.BW1__={",":660,",":727,"B1":1404,"B1":542,"":660,"":727,"":1682,"":1505,"":1743,"":-2055,"":672,"":-4817,"":665,"":3472,"":600,"":-790,"":2083,"":-1262,"":-4143,"":4573,"":2641,"":1104,"":-3399,"":1977,"":-871,"":1122,"":601,"":3463,"":-802,"":805,"":1249,"":1127,"":3445,"":844,"":-4915,"":1922,"":3887,"":5713,"":3015,"":7379,"":-1113,"":2468,"":1498,"":1671,"":-912,"":-501,"":741,"":2448,"":1711,"":2600,"":-2155,"":-1947,"":-2565,"":2369,"":-913,"":1860,"":731,"":-1886,"":2558,"":-2784,"":-2604,"":1497,"":-2314,"":-1336,"":-195,"":-2423,"":-2113,"":-724,"":1404,"":542,"":1682},this.BW2__={"..":-11822,11:-669,"":-5730,"":-13175,"":-1609,"":2490,"":-1350,"":-602,"":-7194,"":4612,"":853,"":-3198,"":1941,"":-1597,"":-8392,"":-4193,"":4533,"":13168,"":-3977,"":-1819,"":-545,"":5078,"":972,"":939,"":-3744,"":-1253,"":-662,"":-3857,"":-786,"":1224,"":-939,"":4589,"":1647,"":-2094,"":6144,"":3640,"":2551,"":-3110,"":-3065,"":2666,"":-1528,"":-3828,"":-4761,"":-4203,"":1890,"":-1746,"":-2279,"":720,"":5168,"":-3941,"":-2488,"":-1313,"":-6509,"":2614,"":3099,"":-1615,"":2748,"":2454,"":-7236,"":-14943,"":-4688,"":-11388,"":2093,"":-7059,"":-6041,"":-6125,"":1073,"":-1033,"":-2532,"":1813,"":-1316,"":-6621,"":5409,"":-3153,"":2230,"":-10713,"":-944,"":-1611,"":-1897,"":651,"":1620,"":4270,"":849,"":4114,"":6067,"":7901,"":-11877,"":728,"":-4115,"":602,"":-1375,"":970,"":-1051,"":-4479,"":-1116,"":2163,"":-7758,"":970,"":-913,"":-2471,"":-1250,"":-1050,"":-8669,"":-1626,"":-2363,"":-1982,"":-4066,"":-722,"":-7068,"":3372,"":-601,"":-2355,"":-2697,"":-1543,"":-1384,"":-1276,"":-990,"":-1612,"":-4268,"":-669},this.BW3__={"":-2194,"":719,"":3846,".":-1185,"":-1185,"":5308,"":2079,"":3029,"":2056,"":1883,"":5600,"":1527,"":1117,"":4798,"":1454,".":2857,"":2857,"":-743,"":-4098,"":-669,"":6520,"":-2670,",":1816,"":1816,"":-4855,"":-1127,"":-913,"":-4977,"":-2064,"":1645,"":1374,"":7397,"":1542,"":-2757,"":-714,"":976,",":1557,"":1557,"":-3714,"":3562,"":1449,"":2608,"":1200,".":-1310,"":-1310,"":6521,",":3426,"":3426,"":841,"":428,".":8875,"":8875,"":-594,"":812,"":-1183,"":-853,".":4098,"":4098,"":1004,"":-4748,"":300,"":6240,"":855,"":302,"":1437,"":-1482,"":2295,"":-1387,"":2266,"":541,"":-3543,"":4664,"":1796,"":-903,"":2135,",":-1021,"":-1021,"":1771,"":1906,"":2644,",":-724,"":-724,"":-1e3,",":1337,"":1337,"":2181,"":1113,"":6943,"":-1549,"":6154,"":-793,"":1479,"":6820,"":3818,",":854,"":854,"":1850,"":1375,"":-3246,"":1091,"":-605,"":606,"":798,"":990,"":860,"":1232,"":2217,"":1681,"":965,"":-5055,",":974,"":974,"":2024,"":990},this.TC1__={AAA:1093,HHH:1029,HHM:580,HII:998,HOH:-390,HOM:-331,IHI:1169,IOH:-142,IOI:-1015,IOM:467,MMH:187,OOI:-1832},this.TC2__={HHO:2088,HII:-1023,HMM:-1154,IHI:-1965,KKH:703,OII:-2649},this.TC3__={AAA:-294,HHH:346,HHI:-341,HII:-1088,HIK:731,HOH:-1486,IHH:128,IHI:-3041,IHO:-1935,IIH:-825,IIM:-1035,IOI:-542,KHH:-1216,KKA:491,KKH:-1217,KOK:-1009,MHH:-2694,MHM:-457,MHO:123,MMH:-471,NNH:-1689,NNO:662,OHO:-3393},this.TC4__={HHH:-203,HHI:1344,HHK:365,HHM:-122,HHN:182,HHO:669,HIH:804,HII:679,HOH:446,IHH:695,IHO:-2324,IIH:321,III:1497,IIO:656,IOO:54,KAK:4845,KKA:3386,KKK:3065,MHH:-405,MHI:201,MMH:-241,MMM:661,MOM:841},this.TQ1__={BHHH:-227,BHHI:316,BHIH:-132,BIHH:60,BIII:1595,BNHH:-744,BOHH:225,BOOO:-908,OAKK:482,OHHH:281,OHIH:249,OIHI:200,OIIH:-68},this.TQ2__={BIHH:-1401,BIII:-1033,BKAK:-543,BOOO:-5591},this.TQ3__={BHHH:478,BHHM:-1073,BHIH:222,BHII:-504,BIIH:-116,BIII:-105,BMHI:-863,BMHM:-464,BOMH:620,OHHH:346,OHHI:1729,OHII:997,OHMH:481,OIHH:623,OIIH:1344,OKAK:2792,OKHH:587,OKKA:679,OOHH:110,OOII:-685},this.TQ4__={BHHH:-721,BHHM:-3604,BHII:-966,BIIH:-607,BIII:-2181,OAAA:-2763,OAKK:180,OHHH:-294,OHHI:2446,OHHO:480,OHIH:-1573,OIHH:1935,OIHI:-493,OIIH:626,OIII:-4007,OKAK:-8156},this.TW1__={"":-4681,"":2026},this.TW2__={"":-2049,"":-1256,"":-2434,"":3873,"":-4430,"":-1049,"":1833,"":-4657,"":-4517,"":1882,"":-792,"":-1512,"":-8097,"":-1255,"":-2721,"":-3216},this.TW3__={"":-1734,"":1314,"":-4314,"":-5483,"":-5989,"":-6247,",":-727,"":-727,"":-600,"":-3752,"":-2287},this.TW4__={".":8576,"":8576,"":-2348,"":2958,",":1516,"":1516,"":1538,"":1349,"":5543,"":1097,"":-4258,"":5865},this.UC1__={A:484,K:93,M:645,O:-505},this.UC2__={A:819,H:1059,I:409,M:3987,N:5775,O:646},this.UC3__={A:-1370,I:2311},this.UC4__={A:-2643,H:1809,I:-1032,K:-3450,M:3565,N:3876,O:6646},this.UC5__={H:313,I:-1238,K:-799,M:539,O:-831},this.UC6__={H:-506,I:-253,K:87,M:247,O:-387},this.UP1__={O:-214},this.UP2__={B:69,O:935},this.UP3__={B:189},this.UQ1__={BH:21,BI:-12,BK:-99,BN:142,BO:-56,OH:-95,OI:477,OK:410,OO:-2422},this.UQ2__={BH:216,BI:113,OK:1759},this.UQ3__={BA:-479,BH:42,BI:1913,BK:-7198,BM:3160,BN:6427,BO:14761,OI:-827,ON:-3212},this.UW1__={",":156,"":156,"":-463,"":-941,"":-127,"":-553,"":121,"":505,"":-201,"":-547,"":-123,"":-789,"":-185,"":-847,"":-466,"":-470,"":182,"":-292,"":208,"":169,"":-446,"":-137,"":-135,"":-402,"":-268,"":-912,"":871,"":-460,"":561,"":729,"":-411,"":-141,"":361,"":-408,"":-386,"":-718,"":-463,"":-135},this.UW2__={",":-829,"":-829,"":892,"":-645,"":3145,"":-538,"":505,"":134,"":-502,"":1454,"":-856,"":-412,"":1141,"":878,"":540,"":1529,"":-675,"":300,"":-1011,"":188,"":1837,"":-949,"":-291,"":-268,"":-981,"":1273,"":1063,"":-1764,"":130,"":-409,"":-1273,"":1261,"":600,"":-1263,"":-402,"":1639,"":-579,"":-694,"":571,"":-2516,"":2095,"":-587,"":306,"":568,"":831,"":-758,"":-2150,"":-302,"":-968,"":-861,"":492,"":-123,"":978,"":362,"":548,"":-3025,"":-1566,"":-3414,"":-422,"":-1769,"":-865,"":-483,"":-1519,"":760,"":1023,"":-2009,"":-813,"":-1060,"":1067,"":-1519,"":-1033,"":1522,"":-1355,"":-1682,"":-1815,"":-1462,"":-630,"":-1843,"":-1650,"":-931,"":-665,"":-2378,"":-180,"":-1740,"":752,"":529,"":-1584,"":-242,"":-1165,"":-763,"":810,"":509,"":-1353,"":838,"":-744,"":-3874,"":1010,"":1198,"":3041,"":1758,"":-1257,"":-645,"":3145,"":831,"":-587,"":306,"":568},this.UW3__={",":4889,1:-800,"":-1723,"":4889,"":-2311,"":5827,"":2670,"":-3573,"":-2696,"":1006,"":2342,"":1983,"":-4864,"":-1163,"":3271,"":1004,"":388,"":401,"":-3552,"":-3116,"":-1058,"":-395,"":584,"":3685,"":-5228,"":842,"":-521,"":-1444,"":-1081,"":6167,"":2318,"":1691,"":-899,"":-2788,"":2745,"":4056,"":4555,"":-2171,"":-1798,"":1199,"":-5516,"":-4384,"":-120,"":1205,"":2323,"":-788,"":-202,"":727,"":649,"":5905,"":2773,"":-1207,"":6620,"":-518,"":551,"":1319,"":874,"":-1350,"":521,"":1109,"":1591,"":2201,"":278,"":-3794,"":-1619,"":-1759,"":-2087,"":3815,"":653,"":-758,"":-1193,"":974,"":2742,"":792,"":1889,"":-1368,"":811,"":4265,"":-361,"":-2439,"":4858,"":3593,"":1574,"":-3030,"":755,"":-1880,"":5807,"":3095,"":457,"":2475,"":1129,"":2286,"":4437,"":365,"":-949,"":-1872,"":1327,"":-1038,"":4646,"":-2309,"":-783,"":-1006,"":483,"":1233,"":3588,"":-241,"":3906,"":-837,"":4513,"":642,"":1389,"":1219,"":-241,"":2016,"":-1356,"":-423,"":-1008,"":1078,"":-513,"":-3102,"":1155,"":3197,"":-1804,"":2416,"":-1030,"":1605,"":1452,"":-2352,"":-3885,"":1905,"":-1291,"":1822,"":-488,"":-3973,"":-2013,"":-1479,"":3222,"":-1489,"":1764,"":2099,"":5792,"":-661,"":-1248,"":-951,"":-937,"":4125,"":360,"":3094,"":364,"":-805,"":5156,"":2438,"":484,"":2613,"":-1694,"":-1073,"":1868,"":-495,"":979,"":461,"":-3850,"":-273,"":914,"":1215,"":7313,"":-1835,"":792,"":6293,"":-1528,"":4231,"":401,"":-960,"":1201,"":7767,"":3066,"":3663,"":1384,"":-4229,"":1163,"":1255,"":6457,"":725,"":-2869,"":785,"":1044,"":-562,"":-733,"":1777,"":1835,"":1375,"":-1504,"":-1136,"":-681,"":1026,"":4404,"":1200,"":2163,"":421,"":-1432,"":1302,"":-1282,rain:2009,"":-1045,"":2066,"":1620,"":-800,"":2670,"":-3794,"":-1350,"":551,"":1319,"":874,"":521,"":1109,"":1591,"":2201,"":278},this.UW4__={",":3930,".":3508,"":-4841,"":3930,"":3508,"":4999,"":1895,"":3798,"":-5156,"":4752,"":-3435,"":-640,"":-2514,"":2405,"":530,"":6006,"":-4482,"":-3821,"":-3788,"":-4376,"":-4734,"":2255,"":1979,"":2864,"":-843,"":-2506,"":-731,"":1251,"":181,"":4091,"":5034,"":5408,"":-3654,"":-5882,"":-1659,"":3994,"":7410,"":4547,"":5433,"":6499,"":1853,"":1413,"":7396,"":8578,"":1940,"":4249,"":-4134,"":1345,"":6665,"":-744,"":1464,"":1051,"":-2082,"":-882,"":-5046,"":4169,"":-2666,"":2795,"":-1544,"":3351,"":-2922,"":-9726,"":-14896,"":-2613,"":-4570,"":-1783,"":13150,"":-2352,"":2145,"":1789,"":1287,"":-724,"":-403,"":-1635,"":-881,"":-541,"":-856,"":-3637,"":-4371,"":-11870,"":-2069,"":2210,"":782,"":-190,"":-1768,"":1036,"":544,"":950,"":-1286,"":530,"":4292,"":601,"":-2006,"":-1212,"":584,"":788,"":1347,"":1623,"":3879,"":-302,"":-740,"":-2715,"":776,"":4517,"":1013,"":1555,"":-1834,"":-681,"":-910,"":-851,"":1500,"":-619,"":-1200,"":866,"":-1410,"":-2094,"":-1413,"":1067,"":571,"":-4802,"":-1397,"":-1057,"":-809,"":1910,"":-1328,"":-1500,"":-2056,"":-2667,"":2771,"":374,"":-4556,"":456,"":553,"":916,"":-1566,"":856,"":787,"":2182,"":704,"":522,"":-856,"":1798,"":1829,"":845,"":-9066,"":-485,"":-442,"":-360,"":-1043,"":5388,"":-2716,"":-910,"":-939,"":-543,"":-735,"":672,"":-1267,"":-1286,"":-1101,"":-2900,"":1826,"":2586,"":922,"":-3485,"":2997,"":-867,"":-2112,"":788,"":2937,"":786,"":2171,"":1146,"":-1169,"":940,"":-994,"":749,"":2145,"":-730,"":-852,"":-792,"":792,"":-1184,"":-244,"":-1e3,"":730,"":-1481,"":1158,"":-1433,"":-3370,"":929,"":-1291,"":2596,"":-4866,"":1192,"":-1100,"":-2213,"":357,"":-2344,"":-2297,"":-2604,"":-878,"":-1659,"":-792,"":-1984,"":1749,"":2120,"":1895,"":3798,"":-4371,"":-724,"":-11870,"":2145,"":1789,"":1287,"":-403,"":-1635,"":-881,"":-541,"":-856,"":-3637},this.UW5__={",":465,".":-299,1:-514,E2:-32768,"]":-2762,"":465,"":-299,"":363,"":1655,"":331,"":-503,"":1199,"":527,"":647,"":-421,"":1624,"":1971,"":312,"":-983,"":-1537,"":-1371,"":-852,"":-1186,"":1093,"":52,"":921,"":-18,"":-850,"":-127,"":1682,"":-787,"":-1224,"":-635,"":-578,"":1001,"":502,"":865,"":3350,"":854,"":-208,"":429,"":504,"":419,"":-1264,"":327,"":241,"":451,"":-343,"":-871,"":722,"":-1153,"":-654,"":3519,"":-901,"":848,"":2104,"":-1296,"":-548,"":1785,"":-1304,"":-2991,"":921,"":1763,"":872,"":-814,"":1618,"":-1682,"":218,"":-4353,"":932,"":1356,"":-1508,"":-1347,"":240,"":-3912,"":-3149,"":1319,"":-1052,"":-4003,"":-997,"":-278,"":-813,"":1955,"":-2233,"":663,"":-1073,"":1219,"":-1018,"":-368,"":786,"":1191,"":2368,"":-689,"":-514,"":-32768,"":363,"":241,"":451,"":-343},this.UW6__={",":227,".":808,1:-270,E1:306,"":227,"":808,"":-307,"":189,"":241,"":-73,"":-121,"":-200,"":1782,"":383,"":-428,"":573,"":-1014,"":101,"":-105,"":-253,"":-149,"":-417,"":-236,"":-206,"":187,"":-135,"":195,"":-673,"":-496,"":-277,"":201,"":-800,"":624,"":302,"":1792,"":-1212,"":798,"":-960,"":887,"":-695,"":535,"":-697,"":753,"":-507,"":974,"":-822,"":1811,"":463,"":1082,"":-270,"":306,"":-673,"":-496}}var e=t.prototype;return e.ctype_=function(t){for(let e in this.chartype_)if(t.match(this.chartype_[e][0]))return this.chartype_[e][1];return"O"},e.ts_=function(t){return t||0},e.segment=function(t){if(null==t||""===t)return[];let e=[],r=["B3","B2","B1"],n=["O","O","O"],i=t.split("");for(var u=0;u<i.length;++u)r.push(i[u]),n.push(this.ctype_(i[u]));r.push("E1"),r.push("E2"),r.push("E3"),n.push("O"),n.push("O"),n.push("O");let o=r[3],a="U",s="U",c="U";for(u=4;u<r.length-3;++u){let t=this.BIAS__,i=r[u-3],f=r[u-2],l=r[u-1],h=r[u],p=r[u+1],d=r[u+2],m=n[u-3],y=n[u-2],v=n[u-1],g=n[u],D=n[u+1],w=n[u+2];t+=this.ts_(this.UP1__[a]),t+=this.ts_(this.UP2__[s]),t+=this.ts_(this.UP3__[c]),t+=this.ts_(this.BP1__[a+s]),t+=this.ts_(this.BP2__[s+c]),t+=this.ts_(this.UW1__[i]),t+=this.ts_(this.UW2__[f]),t+=this.ts_(this.UW3__[l]),t+=this.ts_(this.UW4__[h]),t+=this.ts_(this.UW5__[p]),t+=this.ts_(this.UW6__[d]),t+=this.ts_(this.BW1__[f+l]),t+=this.ts_(this.BW2__[l+h]),t+=this.ts_(this.BW3__[h+p]),t+=this.ts_(this.TW1__[i+f+l]),t+=this.ts_(this.TW2__[f+l+h]),t+=this.ts_(this.TW3__[l+h+p]),t+=this.ts_(this.TW4__[h+p+d]),t+=this.ts_(this.UC1__[m]),t+=this.ts_(this.UC2__[y]),t+=this.ts_(this.UC3__[v]),t+=this.ts_(this.UC4__[g]),t+=this.ts_(this.UC5__[D]),t+=this.ts_(this.UC6__[w]),t+=this.ts_(this.BC1__[y+v]),t+=this.ts_(this.BC2__[v+g]),t+=this.ts_(this.BC3__[g+D]),t+=this.ts_(this.TC1__[m+y+v]),t+=this.ts_(this.TC2__[y+v+g]),t+=this.ts_(this.TC3__[v+g+D]),t+=this.ts_(this.TC4__[g+D+w]),t+=this.ts_(this.UQ1__[a+m]),t+=this.ts_(this.UQ2__[s+y]),t+=this.ts_(this.UQ3__[c+v]),t+=this.ts_(this.BQ1__[s+y+v]),t+=this.ts_(this.BQ2__[s+v+g]),t+=this.ts_(this.BQ3__[c+y+v]),t+=this.ts_(this.BQ4__[c+v+g]),t+=this.ts_(this.TQ1__[s+m+y+v]),t+=this.ts_(this.TQ2__[s+y+v+g]),t+=this.ts_(this.TQ3__[c+m+y+v]),t+=this.ts_(this.TQ4__[c+y+v+g]);let b="O";t>0&&(e.push(o),o="",b="B"),a=s,s=c,c=b,o+=r[u]}return e.push(o),e},t}();const Gs=/\{(\?|\?!|!|\+|-|)[a-zA-Z_][a-zA-Z_0-9]*\}/g,Xs={"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};let tc=function(t,e){this.surface=t,this.feat=e},ec=function(){function t(t){this.botId=t,this.segmenter=new Js,this.nameToTags=[],this.wordToTags=[],this.loadTags=this.loadTags.bind(this),this.nodify=this.nodify.bind(this)}var e=t.prototype;return e.loadTags=async function(){const t=["{USER_NAME}","{USER_NICKNAME}","{BOT_NAME}","{BOT_NICKNAME}"],e=await Promise.all(t.map((async t=>await Ys.readTag(t,this.botId))));for(let r=0;r<e.length;r++)for(const n of e[r])this.nameToTags.push({tag:t[r],name:n});this.nameToTags=this.nameToTags.sort(((t,e)=>e.name.length-t.name.length)),this.wordToTags=await Ys.downloadDxWordToTagList()},e.nodify=function(t){const e={};let r=[],n=0;t=t.replace(Gs,(t=>(e[n]={surf:t,feat:t},`\v${n++}\v`)));for(const{tag:o,name:a}of this.nameToTags)-1!==t.indexOf(a)&&(e[n]={surf:a,feat:o},t=t.replaceAll(a,`\v${n++}\v`));for(const{tag:o,word:a}of this.wordToTags)-1!==t.indexOf(a)&&(e[n]={surf:a,feat:o},t=t.replaceAll(a,`\v${n++}\v`));const i=this.segmenter.segment(t);let u=0;for(const o of i)if(0!==u||"\v"!==o)if(1!==u)2!==u?r.push(new tc(o,o)):u=0;else{const t=e[o];r.push(new tc(t.surf,t.feat)),u=2}else u=1;return r=function(t){const e=[];let r=0;for(const n of t)if(0===r&&n.feat.startsWith("{"))r=1,e.push(n);else if(1!==r)e.push(n);else{if(n.surface in Xs){const t=e.length-1;e[t].surface+=n.surface,e[t].feat+=`\t${n.surface}`}else e.push(n);r=0}return e}(r),r},t}();function rc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function nc(t){return function(t){if(Array.isArray(t))return rc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return rc(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rc(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ic(t){if(!t)return NaN;"object"==typeof t&&"seconds"in t&&(t=new Date(1e3*t.seconds));const e=t.toLocaleDateString().slice(0,4),r=new Date(`${e}-01-01T00:00:00+09:00`);return(t-r)/(new Date(`${e}-12-31T23:59:59.999+09:00`)-r)*2*Math.PI}function uc(t){if(!t)return NaN;"object"==typeof t&&"seconds"in t&&(t=new Date(1e3*t.seconds));const e=t.toLocaleTimeString("jp"),[r,n,i]=e.split(":");return(60*Number(r)*60+60*Number(n)+Number(i)-0)/86399*2*Math.PI}const oc=/^\{(\?|!|\?!)([a-zA-Z_][a-zA-Z0-9_]*)\}/;async function ac(t,e,r,n){const i=n.nodify(t.text),[u,o]=function(t,e){let r=fs(1,e.wordVocabLength),n={word:"",state:0};for(const o of t)if(o.feat in e.wordVocab){const t=e.wordVocab[o.feat];r.set([0,t],r.get([0,t])+1),n.state>0&&(n.state=-1)}else 0===n.state?n={word:o.surface,state:1}:1===n.state&&(n={word:n.word+o.surface,state:2});const i=Xa(r,1,(t=>Hs(1,Us(t)||1)));r=Bs(ps(i),r);let u=ls(e.prevWv,r,0);return u=Bs(e.delayEffect,u),u=Ps(u,1),[u,n]}(i,e),a=await async function(t,e,r){const n=fs(1,e.condVocabLength),i=await Ys.readCondTags(e.condVocab,r);for(const o of i){const t=e.condVocab[o.key];n.set([0,t],Number(o.value))}let u;for(const o of t)if(u=o.feat.match(oc),u&&u[2]in e.condVocab){const t=e.condVocab[u[2]];n.set([0,t],"?"===u[1]?1:-1)}return ss(n)}(i,e,r),s=function(t){const e=t.timestamp;return[ic(e),uc(e)]}(t);-1===o.state&&await Ys.writeTag("{UNKNOWN}",[o.word],r);const c=ss(u),f=Xa(e.wordMatrix,1,(t=>Fs(ss(t),c))),l=Xa(e.condMatrix,1,(t=>Fs(ss(t),a))),h=Xa(e.timeMatrix,1,(t=>function(t,e){const r=t[0]-e[0],n=t[1]-e[1];return(isNaN(r)?0:qa(r))+(isNaN(n)?0:qa(n))}(ss(t),s))),p=Es(f,Bs(l,e.condWeight),Bs(h,e.timeWeight)).valueOf(),d=Math.max.apply(Math,nc(p)),m=[];let y,v;for(y=0,v=p.length;y<v;y++)p[y]===d&&m.push(y);return e.prevWv=is(u),{score:d,index:m[ts(m.length)]}}const sc=/^\s*$/,cc=/^\{(\?|!|\?!)([a-zA-Z_][a-zA-Z0-9_]*)\}/,fc=/[!?.,]$/;function lc(t,e,r){const{tailing:n,condWeight:i,timeWeight:u}=e;let o,a;const s={},c={},f=[];for(const b of t){const t=[];for(const e of b){const n=r.nodify(e[1]);t.push(n);for(const t of n)o=t.feat.match(cc),o?s[o[2]]=!0:c[t.feat]=!0}f.push(t)}const l=Object.keys(s),h=Object.keys(c);1===h.length&&h.push("__dummy__"),1===l.length&&l.push("__dummy__");let p=0,d=0;for(const b of l)s[b]=p++;for(const b of h)c[b]=d++;let m=fs(1,h.length),y=fs(1,l.length);for(const b of f){a=0;let t=fs(b.length,h.length);const e=fs(b.length,l.length);for(const r of b){for(const n of r)if(o=n.feat.match(cc),o){const t=s[o[2]];e.set([a,t],"?"===o[1]?1:-1)}else if(n.feat in c){const e=c[n.feat];t.set([a,e],t.get([a,e])+1)}a++}if(b.length>1){const e=hc(b.length,n);t=Bs(e,t)}m=ls(m,t,0),y=ls(y,e,0)}const v=as(m).toArray(),g=as(y).toArray();m=Ns(m,Ts(zs(1,v[0]),zs(0,v[1]))),y=Ns(y,Ts(zs(1,g[0]),zs(0,g[1]))),v[0]--,g[0]--;const D=Xa(m,1,(t=>Hs(1,Us(t)||1)));m=Bs(ps(D),m);let w=Is(ws(v[0],2),NaN);a=0;for(const b of t)for(const t of b){const e=t[2];w=Ns(w,Ts(a,[0,1]),[ic(e),uc(e)]),a++}return{status:"ok",wordVocabLength:h.length,condVocabLength:l.length,wordVocab:c,condVocab:s,wordMatrix:m,condMatrix:y,timeMatrix:w,condWeight:i,timeWeight:u,prevWv:fs(1,v[1]),prevCv:fs(1,g[1]),delayEffect:hc(2,n)}}function hc(t,e){const r=vs(t);let n=Bs(vs(t-1),e);return n=ls(fs(1,t-1),n,0),n=ls(n,fs(t,1)),Es(r,n)}const pc=/\{([+-])([a-zA-Z_][a-zA-Z_0-9]*)\}/g,dc=/\{([0-9]+)\}\t?(.+)?/,mc={botId:null,moduleId:null,schemeName:null,moduleName:null,channel:new BroadcastChannel("biomebot"),activationLevel:0,source:{},latestInput:{avatar:"",text:"",displayName:""},latestOutput:{avatar:"",text:"",displayName:""},deploy:async t=>{const{botId:e,moduleName:r,validAvatars:n}=t,i=await Ys.downloadDxModule(e,r);return mc.botId=e,mc.moduleId=i.fsId,mc.schemeName=i.data.schemeName,mc.moduleName=i.data.moduleName,mc.validAvatars=n,mc.defaultAvatar=await Ys.pickTag("{DEFAULT_AVATAR}",e,"peace"),mc.calcParams={tailing:Number(await Ys.pickTag("{TAILING}",e,.6)),condWeight:Number(await Ys.pickTag("{CONDITION_WEIGHT}",e,1)),timeWeight:Number(await Ys.pickTag("{TIMESTAMP_WEIGHT}",e,.2))},mc.noder=new ec(e),mc.retention=Number(await Ys.pickTag("{RETENTION}",e,.8)),await mc.noder.loadTags(),mc._calc_matrix(),mc.channel.onmessage=t=>{const e=t.data;if(e.moduleName===mc.moduleName)switch(e.type){case"start":return void mc.start(e).then();case"approve":return void mc.render(e).then()}switch(e.type){case"input":return void mc.recieve(e).then();case"approve":return void mc.deactivate();case"kill":return void mc.channel.close()}},!0},start:async t=>{mc.activationLevel=Number(await Ys.pickTag("{FORCED_ACTIVATION}",mc.botId,2));const e=await ac({text:"{!on_start}",timestamp:new Date},mc.source,mc.botId,mc.noder);mc.latestInput={avatar:"peace",text:"",displayName:t.user.displayName},mc.channel.postMessage({type:"propose",moduleName:mc.moduleName,score:e.score*mc.activationLevel,index:e.index})},recieve:async t=>{const e=t.message;mc.latestInput={avatar:"peace",text:mc._standardize(e.text),displayName:e.displayName},console.log(mc.latestInput);const r=await ac(e,mc.source,mc.botId,mc.noder);mc.channel.postMessage({type:"propose",moduleName:mc.moduleName,score:r.score,index:r.index})},render:async e=>{mc.activationLevel>0?(await Ys.memorizeLine(mc.latestOutput,mc.latestInput,mc.moduleId),await Ys.touchDxScheme(mc.botId,mc.moduleName),mc.activationLevel*=mc.retention):mc.activationLevel=Number(await Ys.pickTag("{ACTIVATION}",mc.botId,1.2)),await mc._spotWord(mc.latestInput.text);const r=mc.outScript[e.index],n=r[0];let i=await Ys.expand(r[1],mc.botId,mc.moduleName);i=await t(i,pc,(async(t,e,r)=>("+"===e?await Ys.writeTag(`{${r}}`,"True",mc.botId,mc.moduleName):"-"===e&&await Ys.deleteTag(r,mc.botId,mc.moduleName),""))),i=await mc._dispatchWord(i);const u="bot"!==n?n:mc.defaultAvatar;mc.latestOutput={avatar:u,text:`${i}`,displayName:""},i=i.replaceAll("{user}",mc.latestInput.displayName),mc.channel.postMessage({type:"reply",moduleName:mc.moduleName,text:i,avatar:u})},deactivate:()=>{mc.activationLevel*=mc.retention},_calc_matrix:async()=>{const t=function(t,e,r){const n=[];let i="",u=null,o=[],a=!1,s=!1;const c=[],f=t=>{let e="",r="",n=null;return"head"in t?(e=t.head,r=t.text):""!==t.text&&([e,r]=t.text.split(" ",2)),"timestamp"in t?n="seconds"in t.timestamp?new Date(1e3*t.timestamp.seconds):t.timestamp:([r,n]=r.split("\t",2),n=n?new Date(Number(n)):null),[e,r,n]},l={bot:r,peace:"peace"};for(const h of e)l[h]=h;for(let h=0,p=t.length;h<p;h++){const e=f(t[h]);let[r,p,d]=e;r.startsWith("#")||("with"!==r?p.match(sc)?0!==o.length&&a&&s&&(n.push(nc(o)),o=[],s=!1,a=!1):(p.match(fc)||(p+=""),"cue"!==r?"user"!==r?r in l?(e[0]=l[r],2==u?o[o.length-1][1]+=`\n${p}`:o.push([r,p]),s=!0,u=2):c.push(`${h}:${t[h]}`):(1===u&&o.push(["peace",`{prompt}${i}`,null,null]),o.push([r,p+i,d]),u=1,a=!0):(0!==o.length&&a&&s&&(n.push(nc(o)),o=[],s=!1,a=!1),o.push([r,p+i,d]),a=!0,u=4)):i=p)}return 0!==o.length&&n.push(o),2!==u&&(console.log(t[t.length-1]),c.push(`${t[t.length-1]}bot`)),{script:n,status:0===c.length?"ok":"error",errors:c}}(await Ys.downloadDxScript(mc.moduleId),mc.validAvatars,mc.defaultAvatar);console.assert("ok"===t.status,mc.moduleName,t.errors);const e=function(t){const e=[],r=[];let n=[],i=[];const u=[];let o=0;for(const a of t){for(const t of a)"user"===t[0]||"cue"===t[0]?n.push(t):i.push(t),o++;e.push(nc(n)),r.push.apply(r,nc(i)),n=[],i=[],n.length!==i.length&&u.push(`${o}: `)}return{inScript:e,outScript:r,status:0===u.length?"ok":"error",errors:u}}(t.script);console.assert("ok"===e.status,mc.moduleName,e.errors),mc.outScript=e.outScript,mc.source={moduleName:mc.moduleName,...lc(e.inScript,mc.calcParams,mc.noder)}},async _spotWord(t){const e=mc.noder.nodify(t);console.log(e);for(const r of e){const t=r.feat.match(dc);if(t){const e=t[1],n=[r.surface.split(t[2])];console.log("spotted",e,"=",n),await Ys.updateTagValue(e,n,mc.botId,{overwrite:!0})}}},async _dispatchWord(t){const e=mc.noder.nodify(t),r=[];for(const n of e){const t=n.feat.match(dc);if(t){const e=t[1],i=t[2],u=await Ys.pickTag(e,mc.botId);u?r.push(`${u}${i}`):r.push(n.surface)}else r.push(n.surface)}return r.join("")},_standardize(t){return t.match(/[!?.,]$/)?t:`${t}`}};self.onmessage=t=>{const e=t.data;switch(e.type){case"deploy":mc.deploy(e).then((t=>{t?self.postMessage({type:"deployed",moduleName:mc.moduleName}):self.postMessage({type:"deployError",moduleName:mc.moduleName})}));break;case"kill":mc.kill(),self.close();break;default:throw new Error(`partWorker: invalid action ${e.type}`)}}}()}();
//# sourceMappingURL=part.worker-50bfe737012a4bfba057.worker.js.map